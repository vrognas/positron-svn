"use strict";var _p=Object.create;var $r=Object.defineProperty;var Ja=Object.getOwnPropertyDescriptor;var Ap=Object.getOwnPropertyNames;var Lp=Object.getPrototypeOf,Mp=Object.prototype.hasOwnProperty;var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),ec=(n,e)=>{for(var t in e)$r(n,t,{get:e[t],enumerable:!0})},Ln=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ap(e))!Mp.call(n,i)&&i!==t&&$r(n,i,{get:()=>e[i],enumerable:!(r=Ja(e,i))||r.enumerable});return n},Zo=(n,e,t)=>(Ln(n,e,"default"),t&&Ln(t,e,"default")),X=(n,e,t)=>(t=n!=null?_p(Lp(n)):{},Ln(e||!n||!n.__esModule?$r(t,"default",{value:n,enumerable:!0}):t,n)),Fp=n=>Ln($r({},"__esModule",{value:!0}),n),H=(n,e,t,r)=>{for(var i=r>1?void 0:r?Ja(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&$r(e,t,i),i};var Gr=F((Zy,Cc)=>{"use strict";var Qp="2.0.0",Kp=Number.MAX_SAFE_INTEGER||9007199254740991,Zp=16,Jp=250,eh=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Cc.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Zp,MAX_SAFE_BUILD_LENGTH:Jp,MAX_SAFE_INTEGER:Kp,RELEASE_TYPES:eh,SEMVER_SPEC_VERSION:Qp,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Xr=F((Jy,Ic)=>{"use strict";var th=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};Ic.exports=th});var yr=F((at,Sc)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:hs,MAX_SAFE_BUILD_LENGTH:rh,MAX_LENGTH:nh}=Gr(),ih=Xr();at=Sc.exports={};var oh=at.re=[],sh=at.safeRe=[],q=at.src=[],ah=at.safeSrc=[],j=at.t={},ch=0,xs="[a-zA-Z0-9-]",uh=[["\\s",1],["\\d",nh],[xs,rh]],lh=n=>{for(let[e,t]of uh)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},W=(n,e,t)=>{let r=lh(e),i=ch++;ih(n,i,e),j[n]=i,q[i]=e,ah[i]=r,oh[i]=new RegExp(e,t?"g":void 0),sh[i]=new RegExp(r,t?"g":void 0)};W("NUMERICIDENTIFIER","0|[1-9]\\d*");W("NUMERICIDENTIFIERLOOSE","\\d+");W("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${xs}*`);W("MAINVERSION",`(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})`);W("MAINVERSIONLOOSE",`(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASEIDENTIFIER",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIER]})`);W("PRERELEASEIDENTIFIERLOOSE",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASE",`(?:-(${q[j.PRERELEASEIDENTIFIER]}(?:\\.${q[j.PRERELEASEIDENTIFIER]})*))`);W("PRERELEASELOOSE",`(?:-?(${q[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${q[j.PRERELEASEIDENTIFIERLOOSE]})*))`);W("BUILDIDENTIFIER",`${xs}+`);W("BUILD",`(?:\\+(${q[j.BUILDIDENTIFIER]}(?:\\.${q[j.BUILDIDENTIFIER]})*))`);W("FULLPLAIN",`v?${q[j.MAINVERSION]}${q[j.PRERELEASE]}?${q[j.BUILD]}?`);W("FULL",`^${q[j.FULLPLAIN]}$`);W("LOOSEPLAIN",`[v=\\s]*${q[j.MAINVERSIONLOOSE]}${q[j.PRERELEASELOOSE]}?${q[j.BUILD]}?`);W("LOOSE",`^${q[j.LOOSEPLAIN]}$`);W("GTLT","((?:<|>)?=?)");W("XRANGEIDENTIFIERLOOSE",`${q[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);W("XRANGEIDENTIFIER",`${q[j.NUMERICIDENTIFIER]}|x|X|\\*`);W("XRANGEPLAIN",`[v=\\s]*(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:${q[j.PRERELEASE]})?${q[j.BUILD]}?)?)?`);W("XRANGEPLAINLOOSE",`[v=\\s]*(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:${q[j.PRERELEASELOOSE]})?${q[j.BUILD]}?)?)?`);W("XRANGE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAIN]}$`);W("XRANGELOOSE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAINLOOSE]}$`);W("COERCEPLAIN",`(^|[^\\d])(\\d{1,${hs}})(?:\\.(\\d{1,${hs}}))?(?:\\.(\\d{1,${hs}}))?`);W("COERCE",`${q[j.COERCEPLAIN]}(?:$|[^\\d])`);W("COERCEFULL",q[j.COERCEPLAIN]+`(?:${q[j.PRERELEASE]})?(?:${q[j.BUILD]})?(?:$|[^\\d])`);W("COERCERTL",q[j.COERCE],!0);W("COERCERTLFULL",q[j.COERCEFULL],!0);W("LONETILDE","(?:~>?)");W("TILDETRIM",`(\\s*)${q[j.LONETILDE]}\\s+`,!0);at.tildeTrimReplace="$1~";W("TILDE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAIN]}$`);W("TILDELOOSE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAINLOOSE]}$`);W("LONECARET","(?:\\^)");W("CARETTRIM",`(\\s*)${q[j.LONECARET]}\\s+`,!0);at.caretTrimReplace="$1^";W("CARET",`^${q[j.LONECARET]}${q[j.XRANGEPLAIN]}$`);W("CARETLOOSE",`^${q[j.LONECARET]}${q[j.XRANGEPLAINLOOSE]}$`);W("COMPARATORLOOSE",`^${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]})$|^$`);W("COMPARATOR",`^${q[j.GTLT]}\\s*(${q[j.FULLPLAIN]})$|^$`);W("COMPARATORTRIM",`(\\s*)${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]}|${q[j.XRANGEPLAIN]})`,!0);at.comparatorTrimReplace="$1$2$3";W("HYPHENRANGE",`^\\s*(${q[j.XRANGEPLAIN]})\\s+-\\s+(${q[j.XRANGEPLAIN]})\\s*$`);W("HYPHENRANGELOOSE",`^\\s*(${q[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${q[j.XRANGEPLAINLOOSE]})\\s*$`);W("STAR","(<|>)?=?\\s*\\*");W("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");W("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Xn=F((ew,Dc)=>{"use strict";var fh=Object.freeze({loose:!0}),ph=Object.freeze({}),hh=n=>n?typeof n!="object"?fh:n:ph;Dc.exports=hh});var ds=F((tw,Pc)=>{"use strict";var Rc=/^[0-9]+$/,Tc=(n,e)=>{if(typeof n=="number"&&typeof e=="number")return n===e?0:n<e?-1:1;let t=Rc.test(n),r=Rc.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},xh=(n,e)=>Tc(e,n);Pc.exports={compareIdentifiers:Tc,rcompareIdentifiers:xh}});var Re=F((rw,Oc)=>{"use strict";var Wn=Xr(),{MAX_LENGTH:Nc,MAX_SAFE_INTEGER:Vn}=Gr(),{safeRe:zn,t:Hn}=yr(),dh=Xn(),{compareIdentifiers:ms}=ds(),gs=class n{constructor(e,t){if(t=dh(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Nc)throw new TypeError(`version is longer than ${Nc} characters`);Wn("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?zn[Hn.LOOSE]:zn[Hn.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Vn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vn||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Vn)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Wn("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(Wn("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ms(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(Wn("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ms(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?zn[Hn.PRERELEASELOOSE]:zn[Hn.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];r===!1&&(o=[t]),ms(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Oc.exports=gs});var Zt=F((nw,Ac)=>{"use strict";var _c=Re(),mh=(n,e,t=!1)=>{if(n instanceof _c)return n;try{return new _c(n,e)}catch(r){if(!t)return null;throw r}};Ac.exports=mh});var Mc=F((iw,Lc)=>{"use strict";var gh=Zt(),yh=(n,e)=>{let t=gh(n,e);return t?t.version:null};Lc.exports=yh});var Uc=F((ow,Fc)=>{"use strict";var wh=Zt(),vh=(n,e)=>{let t=wh(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Fc.exports=vh});var Bc=F((sw,$c)=>{"use strict";var kc=Re(),bh=(n,e,t,r,i)=>{typeof t=="string"&&(i=r,r=t,t=void 0);try{return new kc(n instanceof kc?n.version:n,t).inc(e,r,i).version}catch{return null}};$c.exports=bh});var Gc=F((aw,jc)=>{"use strict";var qc=Zt(),Eh=(n,e)=>{let t=qc(n,null,!0),r=qc(e,null,!0),i=t.compare(r);if(i===0)return null;let o=i>0,s=o?t:r,a=o?r:t,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let d=c?"pre":"";return t.major!==r.major?d+"major":t.minor!==r.minor?d+"minor":t.patch!==r.patch?d+"patch":"prerelease"};jc.exports=Eh});var Wc=F((cw,Xc)=>{"use strict";var Ch=Re(),Ih=(n,e)=>new Ch(n,e).major;Xc.exports=Ih});var zc=F((uw,Vc)=>{"use strict";var Sh=Re(),Dh=(n,e)=>new Sh(n,e).minor;Vc.exports=Dh});var Yc=F((lw,Hc)=>{"use strict";var Rh=Re(),Th=(n,e)=>new Rh(n,e).patch;Hc.exports=Th});var Kc=F((fw,Qc)=>{"use strict";var Ph=Zt(),Nh=(n,e)=>{let t=Ph(n,e);return t&&t.prerelease.length?t.prerelease:null};Qc.exports=Nh});var Ye=F((pw,Jc)=>{"use strict";var Zc=Re(),Oh=(n,e,t)=>new Zc(n,t).compare(new Zc(e,t));Jc.exports=Oh});var t0=F((hw,e0)=>{"use strict";var _h=Ye(),Ah=(n,e,t)=>_h(e,n,t);e0.exports=Ah});var n0=F((xw,r0)=>{"use strict";var Lh=Ye(),Mh=(n,e)=>Lh(n,e,!0);r0.exports=Mh});var Yn=F((dw,o0)=>{"use strict";var i0=Re(),Fh=(n,e,t)=>{let r=new i0(n,t),i=new i0(e,t);return r.compare(i)||r.compareBuild(i)};o0.exports=Fh});var a0=F((mw,s0)=>{"use strict";var Uh=Yn(),kh=(n,e)=>n.sort((t,r)=>Uh(t,r,e));s0.exports=kh});var u0=F((gw,c0)=>{"use strict";var $h=Yn(),Bh=(n,e)=>n.sort((t,r)=>$h(r,t,e));c0.exports=Bh});var Wr=F((yw,l0)=>{"use strict";var qh=Ye(),jh=(n,e,t)=>qh(n,e,t)>0;l0.exports=jh});var Qn=F((ww,f0)=>{"use strict";var Gh=Ye(),Xh=(n,e,t)=>Gh(n,e,t)<0;f0.exports=Xh});var ys=F((vw,p0)=>{"use strict";var Wh=Ye(),Vh=(n,e,t)=>Wh(n,e,t)===0;p0.exports=Vh});var ws=F((bw,h0)=>{"use strict";var zh=Ye(),Hh=(n,e,t)=>zh(n,e,t)!==0;h0.exports=Hh});var Kn=F((Ew,x0)=>{"use strict";var Yh=Ye(),Qh=(n,e,t)=>Yh(n,e,t)>=0;x0.exports=Qh});var Zn=F((Cw,d0)=>{"use strict";var Kh=Ye(),Zh=(n,e,t)=>Kh(n,e,t)<=0;d0.exports=Zh});var vs=F((Iw,m0)=>{"use strict";var Jh=ys(),ex=ws(),tx=Wr(),rx=Kn(),nx=Qn(),ix=Zn(),ox=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Jh(n,t,r);case"!=":return ex(n,t,r);case">":return tx(n,t,r);case">=":return rx(n,t,r);case"<":return nx(n,t,r);case"<=":return ix(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};m0.exports=ox});var y0=F((Sw,g0)=>{"use strict";var sx=Re(),ax=Zt(),{safeRe:Jn,t:ei}=yr(),cx=(n,e)=>{if(n instanceof sx)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(e.includePrerelease?Jn[ei.COERCEFULL]:Jn[ei.COERCE]);else{let c=e.includePrerelease?Jn[ei.COERCERTLFULL]:Jn[ei.COERCERTL],u;for(;(u=c.exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(t===null)return null;let r=t[2],i=t[3]||"0",o=t[4]||"0",s=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return ax(`${r}.${i}.${o}${s}${a}`,e)};g0.exports=cx});var v0=F((Dw,w0)=>{"use strict";var bs=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};w0.exports=bs});var Qe=F((Rw,I0)=>{"use strict";var ux=/\s+/g,Es=class n{constructor(e,t){if(t=fx(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof Cs)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(ux," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!E0(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&yx(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&mx)|(this.options.loose&&gx))+":"+e,i=b0.get(r);if(i)return i;let o=this.options.loose,s=o?Ne[Te.HYPHENRANGELOOSE]:Ne[Te.HYPHENRANGE];e=e.replace(s,Tx(this.options.includePrerelease)),se("hyphen replace",e),e=e.replace(Ne[Te.COMPARATORTRIM],hx),se("comparator trim",e),e=e.replace(Ne[Te.TILDETRIM],xx),se("tilde trim",e),e=e.replace(Ne[Te.CARETTRIM],dx),se("caret trim",e);let a=e.split(" ").map(m=>wx(m,this.options)).join(" ").split(/\s+/).map(m=>Rx(m,this.options));o&&(a=a.filter(m=>(se("loose invalid filter",m,this.options),!!m.match(Ne[Te.COMPARATORLOOSE])))),se("range list",a);let c=new Map,u=a.map(m=>new Cs(m,this.options));for(let m of u){if(E0(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return b0.set(r,d),d}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>C0(r,t)&&e.set.some(i=>C0(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new px(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Px(this.set[t],e,this.options))return!0;return!1}};I0.exports=Es;var lx=v0(),b0=new lx,fx=Xn(),Cs=Vr(),se=Xr(),px=Re(),{safeRe:Ne,t:Te,comparatorTrimReplace:hx,tildeTrimReplace:xx,caretTrimReplace:dx}=yr(),{FLAG_INCLUDE_PRERELEASE:mx,FLAG_LOOSE:gx}=Gr(),E0=n=>n.value==="<0.0.0-0",yx=n=>n.value==="",C0=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},wx=(n,e)=>(n=n.replace(Ne[Te.BUILD],""),se("comp",n,e),n=Ex(n,e),se("caret",n),n=vx(n,e),se("tildes",n),n=Ix(n,e),se("xrange",n),n=Dx(n,e),se("stars",n),n),Oe=n=>!n||n.toLowerCase()==="x"||n==="*",vx=(n,e)=>n.trim().split(/\s+/).map(t=>bx(t,e)).join(" "),bx=(n,e)=>{let t=e.loose?Ne[Te.TILDELOOSE]:Ne[Te.TILDE];return n.replace(t,(r,i,o,s,a)=>{se("tilde",n,r,i,o,s,a);let c;return Oe(i)?c="":Oe(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Oe(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(se("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,se("tilde return",c),c})},Ex=(n,e)=>n.trim().split(/\s+/).map(t=>Cx(t,e)).join(" "),Cx=(n,e)=>{se("caret",n,e);let t=e.loose?Ne[Te.CARETLOOSE]:Ne[Te.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{se("caret",n,i,o,s,a,c);let u;return Oe(o)?u="":Oe(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Oe(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(se("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(se("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),se("caret return",u),u})},Ix=(n,e)=>(se("replaceXRanges",n,e),n.split(/\s+/).map(t=>Sx(t,e)).join(" ")),Sx=(n,e)=>{n=n.trim();let t=e.loose?Ne[Te.XRANGELOOSE]:Ne[Te.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{se("xRange",n,r,i,o,s,a,c);let u=Oe(o),d=u||Oe(s),m=d||Oe(a),g=m;return i==="="&&g&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&g?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:m&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),se("xRange return",r),r})},Dx=(n,e)=>(se("replaceStars",n,e),n.trim().replace(Ne[Te.STAR],"")),Rx=(n,e)=>(se("replaceGTE0",n,e),n.trim().replace(Ne[e.includePrerelease?Te.GTE0PRE:Te.GTE0],"")),Tx=n=>(e,t,r,i,o,s,a,c,u,d,m,g)=>(Oe(r)?t="":Oe(i)?t=`>=${r}.0.0${n?"-0":""}`:Oe(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,Oe(u)?c="":Oe(d)?c=`<${+u+1}.0.0-0`:Oe(m)?c=`<${u}.${+d+1}.0-0`:g?c=`<=${u}.${d}.${m}-${g}`:n?c=`<${u}.${d}.${+m+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),Px=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(se(n[r].semver),n[r].semver!==Cs.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Vr=F((Tw,N0)=>{"use strict";var zr=Symbol("SemVer ANY"),Ds=class n{static get ANY(){return zr}constructor(e,t){if(t=S0(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ss("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===zr?this.value="":this.value=this.operator+this.semver.version,Ss("comp",this)}parse(e){let t=this.options.loose?D0[R0.COMPARATORLOOSE]:D0[R0.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new T0(r[2],this.options.loose):this.semver=zr}toString(){return this.value}test(e){if(Ss("Comparator.test",e,this.options.loose),this.semver===zr||e===zr)return!0;if(typeof e=="string")try{e=new T0(e,this.options)}catch{return!1}return Is(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new P0(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new P0(this.value,t).test(e.semver):(t=S0(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Is(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Is(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};N0.exports=Ds;var S0=Xn(),{safeRe:D0,t:R0}=yr(),Is=vs(),Ss=Xr(),T0=Re(),P0=Qe()});var Hr=F((Pw,O0)=>{"use strict";var Nx=Qe(),Ox=(n,e,t)=>{try{e=new Nx(e,t)}catch{return!1}return e.test(n)};O0.exports=Ox});var A0=F((Nw,_0)=>{"use strict";var _x=Qe(),Ax=(n,e)=>new _x(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));_0.exports=Ax});var M0=F((Ow,L0)=>{"use strict";var Lx=Re(),Mx=Qe(),Fx=(n,e,t)=>{let r=null,i=null,o=null;try{o=new Mx(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new Lx(r,t))}),r};L0.exports=Fx});var U0=F((_w,F0)=>{"use strict";var Ux=Re(),kx=Qe(),$x=(n,e,t)=>{let r=null,i=null,o=null;try{o=new kx(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new Ux(r,t))}),r};F0.exports=$x});var B0=F((Aw,$0)=>{"use strict";var Rs=Re(),Bx=Qe(),k0=Wr(),qx=(n,e)=>{n=new Bx(n,e);let t=new Rs("0.0.0");if(n.test(t)||(t=new Rs("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=>{let a=new Rs(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||k0(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!t||k0(t,o))&&(t=o)}return t&&n.test(t)?t:null};$0.exports=qx});var j0=F((Lw,q0)=>{"use strict";var jx=Qe(),Gx=(n,e)=>{try{return new jx(n,e).range||"*"}catch{return null}};q0.exports=Gx});var ti=F((Mw,V0)=>{"use strict";var Xx=Re(),W0=Vr(),{ANY:Wx}=W0,Vx=Qe(),zx=Hr(),G0=Wr(),X0=Qn(),Hx=Zn(),Yx=Kn(),Qx=(n,e,t,r)=>{n=new Xx(n,r),e=new Vx(e,r);let i,o,s,a,c;switch(t){case">":i=G0,o=Hx,s=X0,a=">",c=">=";break;case"<":i=X0,o=Yx,s=G0,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zx(n,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],m=null,g=null;if(d.forEach(l=>{l.semver===Wx&&(l=new W0(">=0.0.0")),m=m||l,g=g||l,i(l.semver,m.semver,r)?m=l:s(l.semver,g.semver,r)&&(g=l)}),m.operator===a||m.operator===c||(!g.operator||g.operator===a)&&o(n,g.semver))return!1;if(g.operator===c&&s(n,g.semver))return!1}return!0};V0.exports=Qx});var H0=F((Fw,z0)=>{"use strict";var Kx=ti(),Zx=(n,e,t)=>Kx(n,e,">",t);z0.exports=Zx});var Q0=F((Uw,Y0)=>{"use strict";var Jx=ti(),ed=(n,e,t)=>Jx(n,e,"<",t);Y0.exports=ed});var J0=F((kw,Z0)=>{"use strict";var K0=Qe(),td=(n,e,t)=>(n=new K0(n,t),e=new K0(e,t),n.intersects(e,t));Z0.exports=td});var tu=F(($w,eu)=>{"use strict";var rd=Hr(),nd=Ye();eu.exports=(n,e,t)=>{let r=[],i=null,o=null,s=n.sort((d,m)=>nd(d,m,t));for(let d of s)rd(d,e,t)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[d,m]of r)d===m?a.push(d):!m&&d===s[0]?a.push("*"):m?d===s[0]?a.push(`<=${m}`):a.push(`${d} - ${m}`):a.push(`>=${d}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var au=F((Bw,su)=>{"use strict";var ru=Qe(),Ps=Vr(),{ANY:Ts}=Ps,Yr=Hr(),Ns=Ye(),id=(n,e,t={})=>{if(n===e)return!0;n=new ru(n,t),e=new ru(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=sd(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},od=[new Ps(">=0.0.0-0")],nu=[new Ps(">=0.0.0")],sd=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Ts){if(e.length===1&&e[0].semver===Ts)return!0;t.includePrerelease?n=od:n=nu}if(e.length===1&&e[0].semver===Ts){if(t.includePrerelease)return!0;e=nu}let r=new Set,i,o;for(let l of n)l.operator===">"||l.operator===">="?i=iu(i,l,t):l.operator==="<"||l.operator==="<="?o=ou(o,l,t):r.add(l.semver);if(r.size>1)return null;let s;if(i&&o){if(s=Ns(i.semver,o.semver,t),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let l of r){if(i&&!Yr(l,String(i),t)||o&&!Yr(l,String(o),t))return null;for(let y of e)if(!Yr(l,String(y),t))return!1;return!0}let a,c,u,d,m=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,g=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&o.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let l of e){if(d=d||l.operator===">"||l.operator===">=",u=u||l.operator==="<"||l.operator==="<=",i){if(g&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===g.major&&l.semver.minor===g.minor&&l.semver.patch===g.patch&&(g=!1),l.operator===">"||l.operator===">="){if(a=iu(i,l,t),a===l&&a!==i)return!1}else if(i.operator===">="&&!Yr(i.semver,String(l),t))return!1}if(o){if(m&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===m.major&&l.semver.minor===m.minor&&l.semver.patch===m.patch&&(m=!1),l.operator==="<"||l.operator==="<="){if(c=ou(o,l,t),c===l&&c!==o)return!1}else if(o.operator==="<="&&!Yr(o.semver,String(l),t))return!1}if(!l.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&d&&!i&&s!==0||g||m)},iu=(n,e,t)=>{if(!n)return e;let r=Ns(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},ou=(n,e,t)=>{if(!n)return e;let r=Ns(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};su.exports=id});var wr=F((qw,lu)=>{"use strict";var Os=yr(),cu=Gr(),ad=Re(),uu=ds(),cd=Zt(),ud=Mc(),ld=Uc(),fd=Bc(),pd=Gc(),hd=Wc(),xd=zc(),dd=Yc(),md=Kc(),gd=Ye(),yd=t0(),wd=n0(),vd=Yn(),bd=a0(),Ed=u0(),Cd=Wr(),Id=Qn(),Sd=ys(),Dd=ws(),Rd=Kn(),Td=Zn(),Pd=vs(),Nd=y0(),Od=Vr(),_d=Qe(),Ad=Hr(),Ld=A0(),Md=M0(),Fd=U0(),Ud=B0(),kd=j0(),$d=ti(),Bd=H0(),qd=Q0(),jd=J0(),Gd=tu(),Xd=au();lu.exports={parse:cd,valid:ud,clean:ld,inc:fd,diff:pd,major:hd,minor:xd,patch:dd,prerelease:md,compare:gd,rcompare:yd,compareLoose:wd,compareBuild:vd,sort:bd,rsort:Ed,gt:Cd,lt:Id,eq:Sd,neq:Dd,gte:Rd,lte:Td,cmp:Pd,coerce:Nd,Comparator:Od,Range:_d,satisfies:Ad,toComparators:Ld,maxSatisfying:Md,minSatisfying:Fd,minVersion:Ud,validRange:kd,outside:$d,gtr:Bd,ltr:qd,intersects:jd,simplifyRange:Gd,subset:Xd,SemVer:ad,re:Os.re,src:Os.src,tokens:Os.t,SEMVER_SPEC_VERSION:cu.SEMVER_SPEC_VERSION,RELEASE_TYPES:cu.RELEASE_TYPES,compareIdentifiers:uu.compareIdentifiers,rcompareIdentifiers:uu.rcompareIdentifiers}});var fu=F((As,_s)=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});var ri;As.default=()=>{if(typeof _s=="object"&&typeof _s.exports=="object")return ri=ri||require("fs"),ri;throw new Error("File system is not available")}});var Jt=F(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.default=(n,e,t)=>({confidence:t,name:e.name(n),lang:e.language?e.language():void 0})});var hu=F(Qr=>{"use strict";var Wd=Qr&&Qr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qr,"__esModule",{value:!0});var pu=Wd(Jt()),Ms=class{name(){return"ASCII"}match(e){let t=e.rawInput;for(let r=0;r<e.rawLen;r++){let i=t[r];if(i<32||i>126)return(0,pu.default)(e,this,0)}return(0,pu.default)(e,this,100)}};Qr.default=Ms});var xu=F(Kr=>{"use strict";var Vd=Kr&&Kr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kr,"__esModule",{value:!0});var zd=Vd(Jt()),Fs=class{name(){return"UTF-8"}match(e){let t=!1,r=0,i=0,o=0,s,a=e.rawInput;e.rawLen>=3&&(a[0]&255)==239&&(a[1]&255)==187&&(a[2]&255)==191&&(t=!0);for(let c=0;c<e.rawLen;c++){let u=a[c];if(u&128){if((u&224)==192)o=1;else if((u&240)==224)o=2;else if((u&248)==240)o=3;else{if(i++,i>5)break;o=0}for(;c++,!(c>=e.rawLen);){if((a[c]&192)!=128){i++;break}if(--o==0){r++;break}}}}if(s=0,t&&i==0)s=100;else if(t&&r>i*10)s=80;else if(r>3&&i==0)s=100;else if(r>0&&i==0)s=80;else if(r==0&&i==0)s=10;else if(r>i*10)s=25;else return null;return(0,zd.default)(e,this,s)}};Kr.default=Fs});var du=F(Ke=>{"use strict";var Hd=Ke&&Ke.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.UTF_32LE=Ke.UTF_32BE=Ke.UTF_16LE=Ke.UTF_16BE=void 0;var qs=Hd(Jt()),Us=class{name(){return"UTF-16BE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==254&&(t[1]&255)==255?(0,qs.default)(e,this,100):null}};Ke.UTF_16BE=Us;var ks=class{name(){return"UTF-16LE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==255&&(t[1]&255)==254?t.length>=4&&t[2]==0&&t[3]==0?null:(0,qs.default)(e,this,100):null}};Ke.UTF_16LE=ks;var ni=class{name(){return"UTF-32"}getChar(e,t){return-1}match(e){let t=0,r=0,i=!1,o=0,s=e.rawLen/4*4,a=e.rawInput;if(s==0)return null;this.getChar(a,0)==65279&&(i=!0);for(let c=0;c<s;c+=4){let u=this.getChar(a,c);u<0||u>=1114111||u>=55296&&u<=57343?r+=1:t+=1}return i&&r==0?o=100:i&&t>r*10?o=80:t>3&&r==0?o=100:t>0&&r==0?o=80:t>r*10&&(o=25),o==0?null:(0,qs.default)(e,this,o)}},$s=class extends ni{name(){return"UTF-32BE"}getChar(e,t){return(e[t+0]&255)<<24|(e[t+1]&255)<<16|(e[t+2]&255)<<8|e[t+3]&255}};Ke.UTF_32BE=$s;var Bs=class extends ni{name(){return"UTF-32LE"}getChar(e,t){return(e[t+3]&255)<<24|(e[t+2]&255)<<16|(e[t+1]&255)<<8|e[t+0]&255}};Ke.UTF_32LE=Bs});var gu=F(Fe=>{"use strict";var Yd=Fe&&Fe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.gb_18030=Fe.euc_kr=Fe.euc_jp=Fe.big5=Fe.sjis=void 0;var Qd=Yd(Jt());function Kd(n,e){let t=(r,i,o,s)=>{if(s<o)return-1;let a=Math.floor(o+s>>>1);return i>r[a]?t(r,i,a+1,s):i<r[a]?t(r,i,o,a-1):a};return t(n,e,0,n.length-1)}var js=class{constructor(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1}reset(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1}nextByte(e){return this.nextIndex>=e.rawLen?(this.done=!0,-1):e.rawInput[this.nextIndex++]&255}},er=class{constructor(){this.commonChars=[]}name(){return"mbcs"}match(e){let t=0,r=0,i=0,o=0,s=0,a=new js;e:{for(a.reset();this.nextChar(a,e);){if(o++,a.error)i++;else{let c=a.charValue&4294967295;c>255&&(t++,this.commonChars!=null&&Kd(this.commonChars,c)>=0&&r++)}if(i>=2&&i*5>=t)break e}if(t<=10&&i==0){t==0&&o<10?s=0:s=10;break e}if(t<20*i){s=0;break e}if(this.commonChars==null)s=30+t-20*i,s>100&&(s=100);else{let u=90/Math.log(t/4);s=Math.floor(Math.log(r+1)*u+10),s=Math.min(s,100)}}return s==0?null:(0,Qd.default)(e,this,s)}nextChar(e,t){return!0}},Gs=class extends er{constructor(){super(...arguments),this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314]}name(){return"Shift_JIS"}language(){return"ja"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r>160&&r<=223)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=r<<8|i,i>=64&&i<=127||i>=128&&i<=255||(e.error=!0),!0)}};Fe.sjis=Gs;var Xs=class extends er{constructor(){super(...arguments),this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271]}name(){return"Big5"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r==255)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=e.charValue<<8|i,(i<64||i==127||i==255)&&(e.error=!0),!0)}};Fe.big5=Xs;function mu(n,e){n.index=n.nextIndex,n.error=!1;let t=0,r=0,i=0;e:{if(t=n.charValue=n.nextByte(e),t<0){n.done=!0;break e}if(t<=141)break e;if(r=n.nextByte(e),n.charValue=n.charValue<<8|r,t>=161&&t<=254){r<161&&(n.error=!0);break e}if(t==142){r<161&&(n.error=!0);break e}t==143&&(i=n.nextByte(e),n.charValue=n.charValue<<8|i,i<161&&(n.error=!0))}return n.done==!1}var Ws=class extends er{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=mu}name(){return"EUC-JP"}language(){return"ja"}};Fe.euc_jp=Ws;var Vs=class extends er{constructor(){super(...arguments),this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=mu}name(){return"EUC-KR"}language(){return"ko"}};Fe.euc_kr=Vs;var zs=class extends er{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]}name(){return"GB18030"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=0,i=0,o=0,s=0;e:{if(r=e.charValue=e.nextByte(t),r<0){e.done=!0;break e}if(r<=128)break e;if(i=e.nextByte(t),e.charValue=e.charValue<<8|i,r>=129&&r<=254){if(i>=64&&i<=126||i>=80&&i<=254)break e;if(i>=48&&i<=57&&(o=e.nextByte(t),o>=129&&o<=254&&(s=e.nextByte(t),s>=48&&s<=57))){e.charValue=e.charValue<<16|o<<8|s;break e}e.error=!0;break e}}return e.done==!1}};Fe.gb_18030=zs});var wu=F(ae=>{"use strict";var Zd=ae&&ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ae,"__esModule",{value:!0});ae.KOI8_R=ae.windows_1256=ae.windows_1251=ae.ISO_8859_9=ae.ISO_8859_8=ae.ISO_8859_7=ae.ISO_8859_6=ae.ISO_8859_5=ae.ISO_8859_2=ae.ISO_8859_1=void 0;var yu=Zd(Jt()),Jd=16777215,ii=class{constructor(e,t){this.byteIndex=0,this.ngram=0,this.ngramCount=0,this.hitCount=0,this.spaceChar=32,this.ngramList=e,this.byteMap=t}search(e,t){let r=0;return e[r+32]<=t&&(r+=32),e[r+16]<=t&&(r+=16),e[r+8]<=t&&(r+=8),e[r+4]<=t&&(r+=4),e[r+2]<=t&&(r+=2),e[r+1]<=t&&(r+=1),e[r]>t&&(r-=1),r<0||e[r]!=t?-1:r}lookup(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)}addByte(e){this.ngram=(this.ngram<<8)+(e&255)&Jd,this.lookup(this.ngram)}nextByte(e){return this.byteIndex>=e.inputLen?-1:e.inputBytes[this.byteIndex++]&255}parse(e,t){let r,i=!1;for(this.spaceChar=t;(r=this.nextByte(e))>=0;){let s=this.byteMap[r];s!=0&&(s==this.spaceChar&&i||this.addByte(s),i=s==this.spaceChar)}this.addByte(this.spaceChar);let o=this.hitCount/this.ngramCount;return o>.33?98:Math.floor(o*300)}},we=class{constructor(e,t){this.fLang=e,this.fNGrams=t}},em=n=>Array.isArray(n)&&isFinite(n[0]),Ze=class{constructor(){this.spaceChar=32,this.nGramLang=void 0}ngrams(){return[]}byteMap(){return[]}name(e){return"sbcs"}language(){return this.nGramLang}match(e){this.nGramLang=void 0;let t=this.ngrams();if(em(t)){let o=new ii(t,this.byteMap()).parse(e,this.spaceChar);return o<=0?null:(0,yu.default)(e,this,o)}let r=-1;for(let i=t.length-1;i>=0;i--){let o=t[i],a=new ii(o.fNGrams,this.byteMap()).parse(e,this.spaceChar);a>r&&(r=a,this.nGramLang=o.fLang)}return r<=0?null:(0,yu.default)(e,this,r)}},Hs=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[new we("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new we("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new we("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new we("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new we("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new we("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new we("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new we("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new we("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new we("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]}name(e){return e&&e.c1Bytes?"windows-1252":"ISO-8859-1"}};ae.ISO_8859_1=Hs;var Ys=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]}ngrams(){return[new we("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new we("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new we("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new we("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]}name(e){return e&&e.c1Bytes?"windows-1250":"ISO-8859-2"}};ae.ISO_8859_2=Ys;var Qs=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]}ngrams(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]}name(){return"ISO-8859-5"}language(){return"ru"}};ae.ISO_8859_5=Qs;var Ks=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]}ngrams(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]}name(){return"ISO-8859-6"}language(){return"ar"}};ae.ISO_8859_6=Ks;var Zs=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]}ngrams(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]}name(e){return e&&e.c1Bytes?"windows-1253":"ISO-8859-7"}language(){return"el"}};ae.ISO_8859_7=Zs;var Js=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]}ngrams(){return[new we("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new we("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]}name(e){return e&&e.c1Bytes?"windows-1255":"ISO-8859-8"}language(){return"he"}};ae.ISO_8859_8=Js;var ea=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]}name(e){return e&&e.c1Bytes?"windows-1254":"ISO-8859-9"}language(){return"tr"}};ae.ISO_8859_9=ea;var ta=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}ngrams(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]}name(){return"windows-1251"}language(){return"ru"}};ae.windows_1251=ta;var ra=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]}ngrams(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]}name(){return"windows-1256"}language(){return"ar"}};ae.windows_1256=ra;var na=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}ngrams(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]}name(){return"KOI8-R"}language(){return"ru"}};ae.KOI8_R=na});var vu=F(ct=>{"use strict";var tm=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ct,"__esModule",{value:!0});ct.ISO_2022_CN=ct.ISO_2022_KR=ct.ISO_2022_JP=void 0;var rm=tm(Jt()),Zr=class{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,r,i,o=0,s=0,a=0,c,u=e.inputBytes,d=e.inputLen;e:for(t=0;t<d;t++){if(u[t]==27){t:for(i=0;i<this.escapeSequences.length;i++){let m=this.escapeSequences[i];if(d-t<m.length)continue t;for(r=1;r<m.length;r++)if(m[r]!=u[t+r])continue t;o++,t+=m.length-1;continue e}s++}(u[t]==14||u[t]==15)&&a++}return o==0?null:(c=(100*o-100*s)/(o+s),o+a<5&&(c-=(5-(o+a))*10),c<=0?null:(0,rm.default)(e,this,c))}},ia=class extends Zr{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}};ct.ISO_2022_JP=ia;var oa=class extends Zr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}};ct.ISO_2022_KR=oa;var sa=class extends Zr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}};ct.ISO_2022_CN=sa});var bu=F(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.isByteArray=void 0;var nm=n=>n==null||typeof n!="object"?!1:isFinite(n.length)&&n.length>=0;oi.isByteArray=nm});var Cu=F(re=>{"use strict";var im=re&&re.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),om=re&&re.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),ai=re&&re.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},n(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=n(e),i=0;i<r.length;i++)r[i]!=="default"&&im(t,e,r[i]);return om(t,e),t}}(),ca=re&&re.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(re,"__esModule",{value:!0});re.detectFileSync=re.detectFile=re.analyse=re.detect=void 0;var Eu=ca(fu()),sm=ca(hu()),am=ca(xu()),si=ai(du()),Jr=ai(gu()),ut=ai(wu()),aa=ai(vu()),cm=bu(),um=[new am.default,new si.UTF_16BE,new si.UTF_16LE,new si.UTF_32BE,new si.UTF_32LE,new Jr.sjis,new Jr.big5,new Jr.euc_jp,new Jr.euc_kr,new Jr.gb_18030,new aa.ISO_2022_JP,new aa.ISO_2022_KR,new aa.ISO_2022_CN,new ut.ISO_8859_1,new ut.ISO_8859_2,new ut.ISO_8859_5,new ut.ISO_8859_6,new ut.ISO_8859_7,new ut.ISO_8859_8,new ut.ISO_8859_9,new ut.windows_1251,new ut.windows_1256,new ut.KOI8_R,new sm.default],lm=n=>{let e=(0,re.analyse)(n);return e.length>0?e[0].name:null};re.detect=lm;var fm=n=>{if(!(0,cm.isByteArray)(n))throw new Error("Input must be a byte array, e.g. Buffer or Uint8Array");let e=[];for(let o=0;o<256;o++)e[o]=0;for(let o=n.length-1;o>=0;o--)e[n[o]&255]++;let t=!1;for(let o=128;o<=159;o+=1)if(e[o]!==0){t=!0;break}let r={byteStats:e,c1Bytes:t,rawInput:n,rawLen:n.length,inputBytes:n,inputLen:n.length};return um.map(o=>o.match(r)).filter(o=>!!o).sort((o,s)=>s.confidence-o.confidence)};re.analyse=fm;var pm=(n,e={})=>new Promise((t,r)=>{let i,o=(0,Eu.default)(),s=(c,u)=>{i&&o.closeSync(i),c?r(c):u?t((0,re.detect)(u)):r(new Error("No error and no buffer received"))},a=(e==null?void 0:e.sampleSize)||0;if(a>0){i=o.openSync(n,"r");let c=Buffer.allocUnsafe(a);o.read(i,c,0,a,e.offset,(u,d)=>{u?s(u,null):(d<a&&(c=c.subarray(0,d)),s(null,c))});return}o.readFile(n,s)});re.detectFile=pm;var hm=(n,e={})=>{let t=(0,Eu.default)();if(e&&e.sampleSize){let r=t.openSync(n,"r"),i=Buffer.allocUnsafe(e.sampleSize),o=t.readSync(r,i,0,e.sampleSize,e.offset);return o<e.sampleSize&&(i=i.subarray(0,o)),t.closeSync(r),(0,re.detect)(i)}return(0,re.detect)(t.readFileSync(n))};re.detectFileSync=hm;re.default={analyse:re.analyse,detect:re.detect,detectFileSync:re.detectFileSync,detectFile:re.detectFile}});var li=F(ua=>{(function(){ua.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(ua)});var lt=F((Ru,Ft)=>{(function(){var n,e,t,r,i,o,s,a=[].slice,c={}.hasOwnProperty;n=function(){var u,d,m,g,l,y;if(y=arguments[0],l=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,m=l.length;u<m;u++)if(g=l[u],g!=null)for(d in g)c.call(g,d)&&(y[d]=g[d]);return y},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},o=function(u){var d;return!!u&&((d=typeof u)=="function"||d==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var d;if(t(u))return!u.length;for(d in u)if(c.call(u,d))return!1;return!0},s=function(u){var d,m;return o(u)&&(m=Object.getPrototypeOf(u))&&(d=m.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Ft.exports.assign=n,Ft.exports.isFunction=i,Ft.exports.isObject=o,Ft.exports.isArray=t,Ft.exports.isEmpty=r,Ft.exports.isPlainObject=s,Ft.exports.getValue=e}).call(Ru)});var la=F((Tu,Pu)=>{(function(){var n;Pu.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Tu)});var _u=F((Nu,Ou)=>{(function(){var n;Ou.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Nu)});var Mu=F((Au,Lu)=>{(function(){var n;Lu.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Au)});var ku=F((Fu,Uu)=>{(function(){var n,e,t;e=_u(),t=Mu(),Uu.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,o){return!0},r.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},r}()}).call(Fu)});var fe=F(($u,Bu)=>{(function(){Bu.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call($u)});var fa=F((qu,ju)=>{(function(){var n,e,t;n=fe(),t=qe(),ju.exports=e=function(){function r(i,o,s){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(qu)});var fi=F((Gu,Xu)=>{(function(){var n;Xu.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Gu)});var pi=F((Wu,Vu)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(m,g){for(var l in g)d.call(g,l)&&(m[l]=g[l]);function y(){this.constructor=m}return y.prototype=g.prototype,m.prototype=new y,m.__super__=g.prototype,m},d={}.hasOwnProperty;c=lt(),a=c.isObject,s=c.isFunction,o=c.getValue,i=qe(),n=fe(),e=fa(),r=fi(),Vu.exports=t=function(m){u(g,m);function g(l,y,b){var R,N,D,v;if(g.__super__.constructor.call(this,l),y==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(y),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,b!=null&&this.attribute(b),l.type===n.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(v=l.children,N=0,D=v.length;N<D;N++)if(R=v[N],R.type===n.DocType){R.name=this.name;break}}}return Object.defineProperty(g.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(g.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(g.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),g.prototype.clone=function(){var l,y,b,R;b=Object.create(this),b.isRoot&&(b.documentObject=null),b.attribs={},R=this.attribs;for(y in R)d.call(R,y)&&(l=R[y],b.attribs[y]=l.clone());return b.children=[],this.children.forEach(function(N){var D;return D=N.clone(),D.parent=b,b.children.push(D)}),b},g.prototype.attribute=function(l,y){var b,R;if(l!=null&&(l=o(l)),a(l))for(b in l)d.call(l,b)&&(R=l[b],this.attribute(b,R));else s(y)&&(y=y.apply()),this.options.keepNullAttributes&&y==null?this.attribs[l]=new e(this,l,""):y!=null&&(this.attribs[l]=new e(this,l,y));return this},g.prototype.removeAttribute=function(l){var y,b,R;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=o(l),Array.isArray(l))for(b=0,R=l.length;b<R;b++)y=l[b],delete this.attribs[y];else delete this.attribs[l];return this},g.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},g.prototype.att=function(l,y){return this.attribute(l,y)},g.prototype.a=function(l,y){return this.attribute(l,y)},g.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},g.prototype.setAttribute=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},g.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNS=function(l,y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNodeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},g.prototype.hasAttributeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttribute=function(l,y){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:y},g.prototype.setIdAttributeNS=function(l,y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttributeNode=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(l){var y,b,R;if(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(y=b=0,R=this.attribs.length-1;0<=R?b<=R:b>=R;y=0<=R?++b:--b)if(!this.attribs[y].isEqualNode(l.attribs[y]))return!1;return!0},g}(i)}).call(Wu)});var en=F((zu,Hu)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=qe(),Hu.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(zu)});var hi=F((Yu,Qu)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),t=en(),Qu.exports=e=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},s}(t)}).call(Yu)});var xi=F((Ku,Zu)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=en(),Zu.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},s}(e)}).call(Ku)});var di=F((Ju,el)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=lt().isObject,t=qe(),n=fe(),el.exports=e=function(s){i(a,s);function a(c,u,d,m){var g;a.__super__.constructor.call(this,c),r(u)&&(g=u,u=g.version,d=g.encoding,m=g.standalone),u||(u="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(u),d!=null&&(this.encoding=this.stringify.xmlEncoding(d)),m!=null&&(this.standalone=this.stringify.xmlStandalone(m))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(Ju)});var mi=F((tl,rl)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=qe(),n=fe(),rl.exports=e=function(o){r(s,o);function s(a,c,u,d,m,g){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!d)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!m)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(m.indexOf("#")!==0&&(m="#"+m),!m.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(g&&!m.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(d),g&&(this.defaultValue=this.stringify.dtdAttDefault(g)),this.defaultValueType=m}return s.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},s}(t)}).call(tl)});var gi=F((nl,il)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=lt().isObject,t=qe(),n=fe(),il.exports=e=function(s){i(a,s);function a(c,u,d,m){if(a.__super__.constructor.call(this,c),d==null)throw new Error("Missing DTD entity name. "+this.debugInfo(d));if(m==null)throw new Error("Missing DTD entity value. "+this.debugInfo(d));if(this.pe=!!u,this.name=this.stringify.name(d),this.type=n.EntityDeclaration,!r(m))this.value=this.stringify.dtdEntityValue(m),this.internal=!0;else{if(!m.pubID&&!m.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(d));if(m.pubID&&!m.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(d));if(this.internal=!1,m.pubID!=null&&(this.pubID=this.stringify.dtdPubID(m.pubID)),m.sysID!=null&&(this.sysID=this.stringify.dtdSysID(m.sysID)),m.nData!=null&&(this.nData=this.stringify.dtdNData(m.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(d))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(nl)});var yi=F((ol,sl)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=qe(),n=fe(),sl.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return s.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},s}(t)}).call(ol)});var wi=F((al,cl)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=qe(),n=fe(),cl.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=n.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},s}(t)}).call(al)});var vi=F((ul,ll)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(m,g){for(var l in g)d.call(g,l)&&(m[l]=g[l]);function y(){this.constructor=m}return y.prototype=g.prototype,m.prototype=new y,m.__super__=g.prototype,m},d={}.hasOwnProperty;c=lt().isObject,a=qe(),n=fe(),e=mi(),r=gi(),t=yi(),i=wi(),s=fi(),ll.exports=o=function(m){u(g,m);function g(l,y,b){var R,N,D,v,p,h;if(g.__super__.constructor.call(this,l),this.type=n.DocType,l.children){for(v=l.children,N=0,D=v.length;N<D;N++)if(R=v[N],R.type===n.Element){this.name=R.name;break}}this.documentObject=l,c(y)&&(p=y,y=p.pubID,b=p.sysID),b==null&&(h=[y,b],b=h[0],y=h[1]),y!=null&&(this.pubID=this.stringify.dtdPubID(y)),b!=null&&(this.sysID=this.stringify.dtdSysID(b))}return Object.defineProperty(g.prototype,"entities",{get:function(){var l,y,b,R,N;for(R={},N=this.children,y=0,b=N.length;y<b;y++)l=N[y],l.type===n.EntityDeclaration&&!l.pe&&(R[l.name]=l);return new s(R)}}),Object.defineProperty(g.prototype,"notations",{get:function(){var l,y,b,R,N;for(R={},N=this.children,y=0,b=N.length;y<b;y++)l=N[y],l.type===n.NotationDeclaration&&(R[l.name]=l);return new s(R)}}),Object.defineProperty(g.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(g.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(g.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.element=function(l,y){var b;return b=new t(this,l,y),this.children.push(b),this},g.prototype.attList=function(l,y,b,R,N){var D;return D=new e(this,l,y,b,R,N),this.children.push(D),this},g.prototype.entity=function(l,y){var b;return b=new r(this,!1,l,y),this.children.push(b),this},g.prototype.pEntity=function(l,y){var b;return b=new r(this,!0,l,y),this.children.push(b),this},g.prototype.notation=function(l,y){var b;return b=new i(this,l,y),this.children.push(b),this},g.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},g.prototype.ele=function(l,y){return this.element(l,y)},g.prototype.att=function(l,y,b,R,N){return this.attList(l,y,b,R,N)},g.prototype.ent=function(l,y){return this.entity(l,y)},g.prototype.pent=function(l,y){return this.pEntity(l,y)},g.prototype.not=function(l,y){return this.notation(l,y)},g.prototype.up=function(){return this.root()||this.documentObject},g.prototype.isEqualNode=function(l){return!(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},g}(a)}).call(ul)});var bi=F((fl,pl)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=qe(),pl.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},s}(e)}).call(fl)});var Ei=F((hl,xl)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=en(),xl.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(c)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},s.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(hl)});var Ci=F((dl,ml)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=en(),ml.exports=t=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},s.prototype.isEqualNode=function(a){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},s}(e)}).call(dl)});var pa=F((gl,yl)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=qe(),n=fe(),yl.exports=e=function(o){r(s,o);function s(a){s.__super__.constructor.call(this,a),this.type=n.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return""},s}(t)}).call(gl)});var bl=F((wl,vl)=>{(function(){var n;vl.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(wl)});var Il=F((El,Cl)=>{(function(){Cl.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(El)});var qe=F((Sl,Dl)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,g,l,y,b,R,N,D,v={}.hasOwnProperty;D=lt(),N=D.isObject,R=D.isFunction,b=D.isEmpty,y=D.getValue,a=null,t=null,r=null,i=null,o=null,g=null,l=null,m=null,s=null,e=null,d=null,c=null,n=null,Dl.exports=u=function(){function p(h){this.parent=h,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=pi(),t=hi(),r=xi(),i=di(),o=vi(),g=bi(),l=Ei(),m=Ci(),s=pa(),e=fe(),d=bl(),c=fi(),n=Il())}return Object.defineProperty(p.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(p.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(p.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(p.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new d(this.children)),this.childNodeList}}),Object.defineProperty(p.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(p.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(p.prototype,"previousSibling",{get:function(){var h;return h=this.parent.children.indexOf(this),this.parent.children[h-1]||null}}),Object.defineProperty(p.prototype,"nextSibling",{get:function(){var h;return h=this.parent.children.indexOf(this),this.parent.children[h+1]||null}}),Object.defineProperty(p.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(p.prototype,"textContent",{get:function(){var h,E,_,x,S;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(S="",x=this.children,E=0,_=x.length;E<_;E++)h=x[E],h.textContent&&(S+=h.textContent);return S}else return null},set:function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),p.prototype.setParent=function(h){var E,_,x,S,C;for(this.parent=h,h&&(this.options=h.options,this.stringify=h.stringify),S=this.children,C=[],_=0,x=S.length;_<x;_++)E=S[_],C.push(E.setParent(this));return C},p.prototype.element=function(h,E,_){var x,S,C,T,P,O,M,k,A,G,B;if(O=null,E===null&&_==null&&(A=[{},null],E=A[0],_=A[1]),E==null&&(E={}),E=y(E),N(E)||(G=[E,_],_=G[0],E=G[1]),h!=null&&(h=y(h)),Array.isArray(h))for(C=0,M=h.length;C<M;C++)S=h[C],O=this.element(S);else if(R(h))O=this.element(h.apply());else if(N(h)){for(P in h)if(v.call(h,P))if(B=h[P],R(B)&&(B=B.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&P.indexOf(this.stringify.convertAttKey)===0)O=this.attribute(P.substr(this.stringify.convertAttKey.length),B);else if(!this.options.separateArrayItems&&Array.isArray(B)&&b(B))O=this.dummy();else if(N(B)&&b(B))O=this.element(P);else if(!this.options.keepNullNodes&&B==null)O=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(B))for(T=0,k=B.length;T<k;T++)S=B[T],x={},x[P]=S,O=this.element(x);else N(B)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&P.indexOf(this.stringify.convertTextKey)===0?O=this.element(B):(O=this.element(P),O.element(B)):O=this.element(P,B)}else!this.options.keepNullNodes&&_===null?O=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&h.indexOf(this.stringify.convertTextKey)===0?O=this.text(_):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&h.indexOf(this.stringify.convertCDataKey)===0?O=this.cdata(_):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&h.indexOf(this.stringify.convertCommentKey)===0?O=this.comment(_):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&h.indexOf(this.stringify.convertRawKey)===0?O=this.raw(_):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&h.indexOf(this.stringify.convertPIKey)===0?O=this.instruction(h.substr(this.stringify.convertPIKey.length),_):O=this.node(h,E,_);if(O==null)throw new Error("Could not create any elements with: "+h+". "+this.debugInfo());return O},p.prototype.insertBefore=function(h,E,_){var x,S,C,T,P;if(h!=null&&h.type)return C=h,T=E,C.setParent(this),T?(S=children.indexOf(T),P=children.splice(S),children.push(C),Array.prototype.push.apply(children,P)):children.push(C),C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return S=this.parent.children.indexOf(this),P=this.parent.children.splice(S),x=this.parent.element(h,E,_),Array.prototype.push.apply(this.parent.children,P),x},p.prototype.insertAfter=function(h,E,_){var x,S,C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return S=this.parent.children.indexOf(this),C=this.parent.children.splice(S+1),x=this.parent.element(h,E,_),Array.prototype.push.apply(this.parent.children,C),x},p.prototype.remove=function(){var h,E;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return h=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[h,h-h+1].concat(E=[])),this.parent},p.prototype.node=function(h,E,_){var x,S;return h!=null&&(h=y(h)),E||(E={}),E=y(E),N(E)||(S=[E,_],_=S[0],E=S[1]),x=new a(this,h,E),_!=null&&x.text(_),this.children.push(x),x},p.prototype.text=function(h){var E;return N(h)&&this.element(h),E=new l(this,h),this.children.push(E),this},p.prototype.cdata=function(h){var E;return E=new t(this,h),this.children.push(E),this},p.prototype.comment=function(h){var E;return E=new r(this,h),this.children.push(E),this},p.prototype.commentBefore=function(h){var E,_,x;return _=this.parent.children.indexOf(this),x=this.parent.children.splice(_),E=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,x),this},p.prototype.commentAfter=function(h){var E,_,x;return _=this.parent.children.indexOf(this),x=this.parent.children.splice(_+1),E=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,x),this},p.prototype.raw=function(h){var E;return E=new g(this,h),this.children.push(E),this},p.prototype.dummy=function(){var h;return h=new s(this),h},p.prototype.instruction=function(h,E){var _,x,S,C,T;if(h!=null&&(h=y(h)),E!=null&&(E=y(E)),Array.isArray(h))for(C=0,T=h.length;C<T;C++)_=h[C],this.instruction(_);else if(N(h))for(_ in h)v.call(h,_)&&(x=h[_],this.instruction(_,x));else R(E)&&(E=E.apply()),S=new m(this,h,E),this.children.push(S);return this},p.prototype.instructionBefore=function(h,E){var _,x,S;return x=this.parent.children.indexOf(this),S=this.parent.children.splice(x),_=this.parent.instruction(h,E),Array.prototype.push.apply(this.parent.children,S),this},p.prototype.instructionAfter=function(h,E){var _,x,S;return x=this.parent.children.indexOf(this),S=this.parent.children.splice(x+1),_=this.parent.instruction(h,E),Array.prototype.push.apply(this.parent.children,S),this},p.prototype.declaration=function(h,E,_){var x,S;return x=this.document(),S=new i(x,h,E,_),x.children.length===0?x.children.unshift(S):x.children[0].type===e.Declaration?x.children[0]=S:x.children.unshift(S),x.root()||x},p.prototype.dtd=function(h,E){var _,x,S,C,T,P,O,M,k,A;for(x=this.document(),S=new o(x,h,E),k=x.children,C=T=0,O=k.length;T<O;C=++T)if(_=k[C],_.type===e.DocType)return x.children[C]=S,S;for(A=x.children,C=P=0,M=A.length;P<M;C=++P)if(_=A[C],_.isRoot)return x.children.splice(C,0,S),S;return x.children.push(S),S},p.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},p.prototype.root=function(){var h;for(h=this;h;){if(h.type===e.Document)return h.rootObject;if(h.isRoot)return h;h=h.parent}},p.prototype.document=function(){var h;for(h=this;h;){if(h.type===e.Document)return h;h=h.parent}},p.prototype.end=function(h){return this.document().end(h)},p.prototype.prev=function(){var h;if(h=this.parent.children.indexOf(this),h<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[h-1]},p.prototype.next=function(){var h;if(h=this.parent.children.indexOf(this),h===-1||h===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[h+1]},p.prototype.importDocument=function(h){var E;return E=h.root().clone(),E.parent=this,E.isRoot=!1,this.children.push(E),this},p.prototype.debugInfo=function(h){var E,_;return h=h||this.name,h==null&&!((E=this.parent)!=null&&E.name)?"":h==null?"parent: <"+this.parent.name+">":(_=this.parent)!=null&&_.name?"node: <"+h+">, parent: <"+this.parent.name+">":"node: <"+h+">"},p.prototype.ele=function(h,E,_){return this.element(h,E,_)},p.prototype.nod=function(h,E,_){return this.node(h,E,_)},p.prototype.txt=function(h){return this.text(h)},p.prototype.dat=function(h){return this.cdata(h)},p.prototype.com=function(h){return this.comment(h)},p.prototype.ins=function(h,E){return this.instruction(h,E)},p.prototype.doc=function(){return this.document()},p.prototype.dec=function(h,E,_){return this.declaration(h,E,_)},p.prototype.e=function(h,E,_){return this.element(h,E,_)},p.prototype.n=function(h,E,_){return this.node(h,E,_)},p.prototype.t=function(h){return this.text(h)},p.prototype.d=function(h){return this.cdata(h)},p.prototype.c=function(h){return this.comment(h)},p.prototype.r=function(h){return this.raw(h)},p.prototype.i=function(h,E){return this.instruction(h,E)},p.prototype.u=function(){return this.up()},p.prototype.importXMLBuilder=function(h){return this.importDocument(h)},p.prototype.replaceChild=function(h,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeChild=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.appendChild=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasChildNodes=function(){return this.children.length!==0},p.prototype.cloneNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isSupported=function(h,E){return!0},p.prototype.hasAttributes=function(){return this.attribs.length!==0},p.prototype.compareDocumentPosition=function(h){var E,_;return E=this,E===h?0:this.document()!==h.document()?(_=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?_|=n.Preceding:_|=n.Following,_):E.isAncestor(h)?n.Contains|n.Preceding:E.isDescendant(h)?n.Contains|n.Following:E.isPreceding(h)?n.Preceding:n.Following},p.prototype.isSameNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.lookupPrefix=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isDefaultNamespace=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.lookupNamespaceURI=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(h){var E,_,x;if(h.nodeType!==this.nodeType||h.children.length!==this.children.length)return!1;for(E=_=0,x=this.children.length-1;0<=x?_<=x:_>=x;E=0<=x?++_:--_)if(!this.children[E].isEqualNode(h.children[E]))return!1;return!0},p.prototype.getFeature=function(h,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setUserData=function(h,E,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getUserData=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.contains=function(h){return h?h===this||this.isDescendant(h):!1},p.prototype.isDescendant=function(h){var E,_,x,S,C;for(C=this.children,x=0,S=C.length;x<S;x++)if(E=C[x],h===E||(_=E.isDescendant(h),_))return!0;return!1},p.prototype.isAncestor=function(h){return h.isDescendant(this)},p.prototype.isPreceding=function(h){var E,_;return E=this.treePosition(h),_=this.treePosition(this),E===-1||_===-1?!1:E<_},p.prototype.isFollowing=function(h){var E,_;return E=this.treePosition(h),_=this.treePosition(this),E===-1||_===-1?!1:E>_},p.prototype.treePosition=function(h){var E,_;return _=0,E=!1,this.foreachTreeNode(this.document(),function(x){if(_++,!E&&x===h)return E=!0}),E?_:-1},p.prototype.foreachTreeNode=function(h,E){var _,x,S,C,T;for(h||(h=this.document()),C=h.children,x=0,S=C.length;x<S;x++){if(_=C[x],T=E(_))return T;if(T=this.foreachTreeNode(_,E),T)return T}},p}()}).call(Sl)});var ha=F((Rl,Tl)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;Tl.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(o in s)t.call(s,o)&&(a=s[o],this[o]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var o,s;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},r.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(Rl)});var tn=F((Pl,Nl)=>{(function(){Nl.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Pl)});var xa=F((Ol,_l)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,g,l,y,b,R,N={}.hasOwnProperty;R=lt().assign,n=fe(),c=di(),u=vi(),t=hi(),r=xi(),m=pi(),l=bi(),y=Ei(),g=Ci(),d=pa(),i=mi(),o=yi(),s=gi(),a=wi(),e=tn(),_l.exports=b=function(){function D(v){var p,h,E;v||(v={}),this.options=v,h=v.writer||{};for(p in h)N.call(h,p)&&(E=h[p],this["_"+p]=this[p],this[p]=E)}return D.prototype.filterOptions=function(v){var p,h,E,_,x,S,C,T;return v||(v={}),v=R({},this.options,v),p={writer:this},p.pretty=v.pretty||!1,p.allowEmpty=v.allowEmpty||!1,p.indent=(h=v.indent)!=null?h:"  ",p.newline=(E=v.newline)!=null?E:`
`,p.offset=(_=v.offset)!=null?_:0,p.dontPrettyTextNodes=(x=(S=v.dontPrettyTextNodes)!=null?S:v.dontprettytextnodes)!=null?x:0,p.spaceBeforeSlash=(C=(T=v.spaceBeforeSlash)!=null?T:v.spacebeforeslash)!=null?C:"",p.spaceBeforeSlash===!0&&(p.spaceBeforeSlash=" "),p.suppressPrettyCount=0,p.user={},p.state=e.None,p},D.prototype.indent=function(v,p,h){var E;return!p.pretty||p.suppressPrettyCount?"":p.pretty&&(E=(h||0)+p.offset+1,E>0)?new Array(E).join(p.indent):""},D.prototype.endline=function(v,p,h){return!p.pretty||p.suppressPrettyCount?"":p.newline},D.prototype.attribute=function(v,p,h){var E;return this.openAttribute(v,p,h),E=" "+v.name+'="'+v.value+'"',this.closeAttribute(v,p,h),E},D.prototype.cdata=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<![CDATA[",p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+="]]>"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.comment=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<!-- ",p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+=" -->"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.declaration=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<?xml",p.state=e.InsideTag,E+=' version="'+v.version+'"',v.encoding!=null&&(E+=' encoding="'+v.encoding+'"'),v.standalone!=null&&(E+=' standalone="'+v.standalone+'"'),p.state=e.CloseTag,E+=p.spaceBeforeSlash+"?>",E+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.docType=function(v,p,h){var E,_,x,S,C;if(h||(h=0),this.openNode(v,p,h),p.state=e.OpenTag,S=this.indent(v,p,h),S+="<!DOCTYPE "+v.root().name,v.pubID&&v.sysID?S+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(S+=' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(S+=" [",S+=this.endline(v,p,h),p.state=e.InsideTag,C=v.children,_=0,x=C.length;_<x;_++)E=C[_],S+=this.writeChildNode(E,p,h+1);p.state=e.CloseTag,S+="]"}return p.state=e.CloseTag,S+=p.spaceBeforeSlash+">",S+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),S},D.prototype.element=function(v,p,h){var E,_,x,S,C,T,P,O,M,k,A,G,B,Q;h||(h=0),k=!1,A="",this.openNode(v,p,h),p.state=e.OpenTag,A+=this.indent(v,p,h)+"<"+v.name,G=v.attribs;for(M in G)N.call(G,M)&&(E=G[M],A+=this.attribute(E,p,h));if(x=v.children.length,S=x===0?null:v.children[0],x===0||v.children.every(function(Z){return(Z.type===n.Text||Z.type===n.Raw)&&Z.value===""}))p.allowEmpty?(A+=">",p.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,p,h)):(p.state=e.CloseTag,A+=p.spaceBeforeSlash+"/>"+this.endline(v,p,h));else if(p.pretty&&x===1&&(S.type===n.Text||S.type===n.Raw)&&S.value!=null)A+=">",p.state=e.InsideTag,p.suppressPrettyCount++,k=!0,A+=this.writeChildNode(S,p,h+1),p.suppressPrettyCount--,k=!1,p.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,p,h);else{if(p.dontPrettyTextNodes){for(B=v.children,C=0,P=B.length;C<P;C++)if(_=B[C],(_.type===n.Text||_.type===n.Raw)&&_.value!=null){p.suppressPrettyCount++,k=!0;break}}for(A+=">"+this.endline(v,p,h),p.state=e.InsideTag,Q=v.children,T=0,O=Q.length;T<O;T++)_=Q[T],A+=this.writeChildNode(_,p,h+1);p.state=e.CloseTag,A+=this.indent(v,p,h)+"</"+v.name+">",k&&p.suppressPrettyCount--,A+=this.endline(v,p,h),p.state=e.None}return this.closeNode(v,p,h),A},D.prototype.writeChildNode=function(v,p,h){switch(v.type){case n.CData:return this.cdata(v,p,h);case n.Comment:return this.comment(v,p,h);case n.Element:return this.element(v,p,h);case n.Raw:return this.raw(v,p,h);case n.Text:return this.text(v,p,h);case n.ProcessingInstruction:return this.processingInstruction(v,p,h);case n.Dummy:return"";case n.Declaration:return this.declaration(v,p,h);case n.DocType:return this.docType(v,p,h);case n.AttributeDeclaration:return this.dtdAttList(v,p,h);case n.ElementDeclaration:return this.dtdElement(v,p,h);case n.EntityDeclaration:return this.dtdEntity(v,p,h);case n.NotationDeclaration:return this.dtdNotation(v,p,h);default:throw new Error("Unknown XML node type: "+v.constructor.name)}},D.prototype.processingInstruction=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<?",p.state=e.InsideTag,E+=v.target,v.value&&(E+=" "+v.value),p.state=e.CloseTag,E+=p.spaceBeforeSlash+"?>",E+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.raw=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h),p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.text=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h),p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.dtdAttList=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<!ATTLIST",p.state=e.InsideTag,E+=" "+v.elementName+" "+v.attributeName+" "+v.attributeType,v.defaultValueType!=="#DEFAULT"&&(E+=" "+v.defaultValueType),v.defaultValue&&(E+=' "'+v.defaultValue+'"'),p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.dtdElement=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<!ELEMENT",p.state=e.InsideTag,E+=" "+v.name+" "+v.value,p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.dtdEntity=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<!ENTITY",p.state=e.InsideTag,v.pe&&(E+=" %"),E+=" "+v.name,v.value?E+=' "'+v.value+'"':(v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),v.nData&&(E+=" NDATA "+v.nData)),p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.dtdNotation=function(v,p,h){var E;return this.openNode(v,p,h),p.state=e.OpenTag,E=this.indent(v,p,h)+"<!NOTATION",p.state=e.InsideTag,E+=" "+v.name,v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.pubID?E+=' PUBLIC "'+v.pubID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),E},D.prototype.openNode=function(v,p,h){},D.prototype.closeNode=function(v,p,h){},D.prototype.openAttribute=function(v,p,h){},D.prototype.closeAttribute=function(v,p,h){},D}()}).call(Ol)});var Ii=F((Al,Ll)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=xa(),Ll.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,a){var c,u,d,m,g;for(a=this.filterOptions(a),m="",g=s.children,u=0,d=g.length;u<d;u++)c=g[u],m+=this.writeChildNode(c,a,0);return a.pretty&&m.slice(-a.newline.length)===a.newline&&(m=m.slice(0,-a.newline.length)),m},o}(e)}).call(Al)});var da=F((Ml,Fl)=>{(function(){var n,e,t,r,i,o,s,a,c=function(d,m){for(var g in m)u.call(m,g)&&(d[g]=m[g]);function l(){this.constructor=d}return l.prototype=m.prototype,d.prototype=new l,d.__super__=m.prototype,d},u={}.hasOwnProperty;a=lt().isPlainObject,t=la(),e=ku(),i=qe(),n=fe(),s=ha(),o=Ii(),Fl.exports=r=function(d){c(m,d);function m(g){m.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,g||(g={}),g.writer||(g.writer=new o),this.options=g,this.stringify=new s(g)}return Object.defineProperty(m.prototype,"implementation",{value:new t}),Object.defineProperty(m.prototype,"doctype",{get:function(){var g,l,y,b;for(b=this.children,l=0,y=b.length;l<y;l++)if(g=b[l],g.type===n.DocType)return g;return null}}),Object.defineProperty(m.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(m.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(m.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(m.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(m.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(m.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(m.prototype,"origin",{get:function(){return null}}),Object.defineProperty(m.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(m.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(m.prototype,"contentType",{get:function(){return null}}),m.prototype.end=function(g){var l;return l={},g?a(g)&&(l=g,g=this.options.writer):g=this.options.writer,g.document(this,g.filterOptions(l))},m.prototype.toString=function(g){return this.options.writer.document(this,this.options.writer.filterOptions(g))},m.prototype.createElement=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTextNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createComment=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createCDATASection=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createProcessingInstruction=function(g,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttribute=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEntityReference=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.importNode=function(g,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createElementNS=function(g,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttributeNS=function(g,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(g,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementById=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.adoptNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.renameNode=function(g,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByClassName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEvent=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createNodeIterator=function(g,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTreeWalker=function(g,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m}(i)}).call(Ml)});var $l=F((Ul,kl)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,g,l,y,b,R,N,D,v,p,h,E,_,x={}.hasOwnProperty;_=lt(),h=_.isObject,p=_.isFunction,E=_.isPlainObject,v=_.getValue,n=fe(),m=da(),l=pi(),r=hi(),i=xi(),b=bi(),D=Ei(),y=Ci(),u=di(),d=vi(),o=mi(),a=gi(),s=yi(),c=wi(),t=fa(),N=ha(),R=Ii(),e=tn(),kl.exports=g=function(){function S(C,T,P){var O;this.name="?xml",this.type=n.Document,C||(C={}),O={},C.writer?E(C.writer)&&(O=C.writer,C.writer=new R):C.writer=new R,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(O),this.stringify=new N(C),this.onDataCallback=T||function(){},this.onEndCallback=P||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return S.prototype.createChildNode=function(C){var T,P,O,M,k,A,G,B;switch(C.type){case n.CData:this.cdata(C.value);break;case n.Comment:this.comment(C.value);break;case n.Element:O={},G=C.attribs;for(P in G)x.call(G,P)&&(T=G[P],O[P]=T.value);this.node(C.name,O);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(C.value);break;case n.Text:this.text(C.value);break;case n.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(B=C.children,k=0,A=B.length;k<A;k++)M=B[k],this.createChildNode(M),M.type===n.Element&&this.up();return this},S.prototype.dummy=function(){return this},S.prototype.node=function(C,T,P){var O;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=v(C),T==null&&(T={}),T=v(T),h(T)||(O=[T,P],P=O[0],T=O[1]),this.currentNode=new l(this,C,T),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,P!=null&&this.text(P),this},S.prototype.element=function(C,T,P){var O,M,k,A,G,B;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||h(C)||p(C))for(A=this.options.noValidation,this.options.noValidation=!0,B=new m(this.options).element("TEMP_ROOT"),B.element(C),this.options.noValidation=A,G=B.children,M=0,k=G.length;M<k;M++)O=G[M],this.createChildNode(O),O.type===n.Element&&this.up();else this.node(C,T,P);return this},S.prototype.attribute=function(C,T){var P,O;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=v(C)),h(C))for(P in C)x.call(C,P)&&(O=C[P],this.attribute(P,O));else p(T)&&(T=T.apply()),this.options.keepNullAttributes&&T==null?this.currentNode.attribs[C]=new t(this,C,""):T!=null&&(this.currentNode.attribs[C]=new t(this,C,T));return this},S.prototype.text=function(C){var T;return this.openCurrent(),T=new D(this,C),this.onData(this.writer.text(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.cdata=function(C){var T;return this.openCurrent(),T=new r(this,C),this.onData(this.writer.cdata(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.comment=function(C){var T;return this.openCurrent(),T=new i(this,C),this.onData(this.writer.comment(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.raw=function(C){var T;return this.openCurrent(),T=new b(this,C),this.onData(this.writer.raw(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.instruction=function(C,T){var P,O,M,k,A;if(this.openCurrent(),C!=null&&(C=v(C)),T!=null&&(T=v(T)),Array.isArray(C))for(P=0,k=C.length;P<k;P++)O=C[P],this.instruction(O);else if(h(C))for(O in C)x.call(C,O)&&(M=C[O],this.instruction(O,M));else p(T)&&(T=T.apply()),A=new y(this,C,T),this.onData(this.writer.processingInstruction(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},S.prototype.declaration=function(C,T,P){var O;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return O=new u(this,C,T,P),this.onData(this.writer.declaration(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.doctype=function(C,T,P){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,T,P),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},S.prototype.dtdElement=function(C,T){var P;return this.openCurrent(),P=new s(this,C,T),this.onData(this.writer.dtdElement(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.attList=function(C,T,P,O,M){var k;return this.openCurrent(),k=new o(this,C,T,P,O,M),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.entity=function(C,T){var P;return this.openCurrent(),P=new a(this,!1,C,T),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.pEntity=function(C,T){var P;return this.openCurrent(),P=new a(this,!0,C,T),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.notation=function(C,T){var P;return this.openCurrent(),P=new c(this,C,T),this.onData(this.writer.dtdNotation(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},S.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},S.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},S.prototype.openNode=function(C){var T,P,O,M;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===n.Element&&(this.root=C),P="",C.type===n.Element){this.writerOptions.state=e.OpenTag,P=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,M=C.attribs;for(O in M)x.call(M,O)&&(T=M[O],P+=this.writer.attribute(T,this.writerOptions,this.currentLevel));P+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,P=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?P+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(P+=' SYSTEM "'+C.sysID+'"'),C.children?(P+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,P+=">"),P+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(P,this.currentLevel),C.isOpen=!0}},S.prototype.closeNode=function(C){var T;if(!C.isClosed)return T="",this.writerOptions.state=e.CloseTag,C.type===n.Element?T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(T,this.currentLevel),C.isClosed=!0},S.prototype.onData=function(C,T){return this.documentStarted=!0,this.onDataCallback(C,T+1)},S.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},S.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},S.prototype.ele=function(){return this.element.apply(this,arguments)},S.prototype.nod=function(C,T,P){return this.node(C,T,P)},S.prototype.txt=function(C){return this.text(C)},S.prototype.dat=function(C){return this.cdata(C)},S.prototype.com=function(C){return this.comment(C)},S.prototype.ins=function(C,T){return this.instruction(C,T)},S.prototype.dec=function(C,T,P){return this.declaration(C,T,P)},S.prototype.dtd=function(C,T,P){return this.doctype(C,T,P)},S.prototype.e=function(C,T,P){return this.element(C,T,P)},S.prototype.n=function(C,T,P){return this.node(C,T,P)},S.prototype.t=function(C){return this.text(C)},S.prototype.d=function(C){return this.cdata(C)},S.prototype.c=function(C){return this.comment(C)},S.prototype.r=function(C){return this.raw(C)},S.prototype.i=function(C,T){return this.instruction(C,T)},S.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},S.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},S.prototype.ent=function(C,T){return this.entity(C,T)},S.prototype.pent=function(C,T){return this.pEntity(C,T)},S.prototype.not=function(C,T){return this.notation(C,T)},S}()}).call(Ul)});var jl=F((Bl,ql)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;n=fe(),r=xa(),e=tn(),ql.exports=t=function(s){i(a,s);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,d){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,d)},a.prototype.document=function(c,u){var d,m,g,l,y,b,R,N,D;for(R=c.children,m=g=0,y=R.length;g<y;m=++g)d=R[m],d.isLastRootNode=m===c.children.length-1;for(u=this.filterOptions(u),N=c.children,D=[],l=0,b=N.length;l<b;l++)d=N[l],D.push(this.writeChildNode(d,u,0));return D},a.prototype.attribute=function(c,u,d){return this.stream.write(a.__super__.attribute.call(this,c,u,d))},a.prototype.cdata=function(c,u,d){return this.stream.write(a.__super__.cdata.call(this,c,u,d))},a.prototype.comment=function(c,u,d){return this.stream.write(a.__super__.comment.call(this,c,u,d))},a.prototype.declaration=function(c,u,d){return this.stream.write(a.__super__.declaration.call(this,c,u,d))},a.prototype.docType=function(c,u,d){var m,g,l,y;if(d||(d=0),this.openNode(c,u,d),u.state=e.OpenTag,this.stream.write(this.indent(c,u,d)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,d)),u.state=e.InsideTag,y=c.children,g=0,l=y.length;g<l;g++)m=y[g],this.writeChildNode(m,u,d+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,d)),u.state=e.None,this.closeNode(c,u,d)},a.prototype.element=function(c,u,d){var m,g,l,y,b,R,N,D,v,p;d||(d=0),this.openNode(c,u,d),u.state=e.OpenTag,this.stream.write(this.indent(c,u,d)+"<"+c.name),v=c.attribs;for(N in v)o.call(v,N)&&(m=v[N],this.attribute(m,u,d));if(l=c.children.length,y=l===0?null:c.children[0],l===0||c.children.every(function(h){return(h.type===n.Text||h.type===n.Raw)&&h.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(y.type===n.Text||y.type===n.Raw)&&y.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,D=!0,this.writeChildNode(y,u,d+1),u.suppressPrettyCount--,D=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,d)),u.state=e.InsideTag,p=c.children,b=0,R=p.length;b<R;b++)g=p[b],this.writeChildNode(g,u,d+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,d)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,d)),u.state=e.None,this.closeNode(c,u,d)},a.prototype.processingInstruction=function(c,u,d){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,d))},a.prototype.raw=function(c,u,d){return this.stream.write(a.__super__.raw.call(this,c,u,d))},a.prototype.text=function(c,u,d){return this.stream.write(a.__super__.text.call(this,c,u,d))},a.prototype.dtdAttList=function(c,u,d){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,d))},a.prototype.dtdElement=function(c,u,d){return this.stream.write(a.__super__.dtdElement.call(this,c,u,d))},a.prototype.dtdEntity=function(c,u,d){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,d))},a.prototype.dtdNotation=function(c,u,d){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,d))},a}(r)}).call(Bl)});var Xl=F((Gl,Ut)=>{(function(){var n,e,t,r,i,o,s,a,c,u;u=lt(),a=u.assign,c=u.isFunction,t=la(),r=da(),i=$l(),s=Ii(),o=jl(),n=fe(),e=tn(),Ut.exports.create=function(d,m,g,l){var y,b;if(d==null)throw new Error("Root element needs a name.");return l=a({},m,g,l),y=new r(l),b=y.element(d),l.headless||(y.declaration(l),(l.pubID!=null||l.sysID!=null)&&y.dtd(l)),b},Ut.exports.begin=function(d,m,g){var l;return c(d)&&(l=[d,m],m=l[0],g=l[1],d={}),m?new i(d,m,g):new r(d)},Ut.exports.stringWriter=function(d){return new s(d)},Ut.exports.streamWriter=function(d,m){return new o(d,m)},Ut.exports.implementation=new t,Ut.exports.nodeType=n,Ut.exports.writerState=e}).call(Gl)});var Wl=F(ma=>{(function(){"use strict";var n,e,t,r,i,o={}.hasOwnProperty;n=Xl(),e=li().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},i=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},ma.Builder=function(){function s(a){var c,u,d;this.options={},u=e["0.2"];for(c in u)o.call(u,c)&&(d=u[c],this.options[c]=d);for(c in a)o.call(a,c)&&(d=a[c],this.options[c]=d)}return s.prototype.buildObject=function(a){var c,u,d,m,g;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(g=Object.keys(a)[0],a=a[g]):g=this.options.rootName,d=function(l){return function(y,b){var R,N,D,v,p,h;if(typeof b!="object")l.options.cdata&&r(b)?y.raw(i(b)):y.txt(b);else if(Array.isArray(b)){for(v in b)if(o.call(b,v)){N=b[v];for(p in N)D=N[p],y=d(y.ele(p),D).up()}}else for(p in b)if(o.call(b,p))if(N=b[p],p===c){if(typeof N=="object")for(R in N)h=N[R],y=y.att(R,h)}else if(p===u)l.options.cdata&&r(N)?y=y.raw(i(N)):y=y.txt(N);else if(Array.isArray(N))for(v in N)o.call(N,v)&&(D=N[v],typeof D=="string"?l.options.cdata&&r(D)?y=y.ele(p).raw(i(D)).up():y=y.ele(p,D).up():y=d(y.ele(p),D).up());else typeof N=="object"?y=d(y.ele(p),N).up():typeof N=="string"&&l.options.cdata&&r(N)?y=y.ele(p).raw(i(N)).up():(N==null&&(N=""),y=y.ele(p,N.toString()).up());return y}}(this),m=n.create(g,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(m,a).end(this.options.renderOpts)},s}()}).call(ma)});var Vl=F(Si=>{(function(n){n.parser=function(w,f){return new t(w,f)},n.SAXParser=t,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(w,f){if(!(this instanceof t))return new t(w,f);var L=this;i(L),L.q=L.c="",L.bufferCheckPosition=n.MAX_BUFFER_LENGTH,L.opt=f||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!w,L.noscript=!!(w||L.opt.noscript),L.state=x.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(y)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!w),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),C(L,"onready")}Object.create||(Object.create=function(w){function f(){}f.prototype=w;var L=new f;return L}),Object.keys||(Object.keys=function(w){var f=[];for(var L in w)w.hasOwnProperty(L)&&f.push(L);return f});function r(w){for(var f=Math.max(n.MAX_BUFFER_LENGTH,10),L=0,I=0,Y=e.length;I<Y;I++){var ne=w[e[I]].length;if(ne>f)switch(e[I]){case"textNode":P(w);break;case"cdata":T(w,"oncdata",w.cdata),w.cdata="";break;case"script":T(w,"onscript",w.script),w.script="";break;default:M(w,"Max buffer length exceeded: "+e[I])}L=Math.max(L,ne)}var xe=n.MAX_BUFFER_LENGTH-L;w.bufferCheckPosition=xe+w.position}function i(w){for(var f=0,L=e.length;f<L;f++)w[e[f]]=""}function o(w){P(w),w.cdata!==""&&(T(w,"oncdata",w.cdata),w.cdata=""),w.script!==""&&(T(w,"onscript",w.script),w.script="")}t.prototype={end:function(){k(this)},write:gt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var a=n.EVENTS.filter(function(w){return w!=="error"&&w!=="end"});function c(w,f){return new u(w,f)}function u(w,f){if(!(this instanceof u))return new u(w,f);s.apply(this),this._parser=new t(w,f),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(I){L.emit("error",I),L._parser.error=null},this._decoder=null,a.forEach(function(I){Object.defineProperty(L,"on"+I,{get:function(){return L._parser["on"+I]},set:function(Y){if(!Y)return L.removeAllListeners(I),L._parser["on"+I]=Y,Y;L.on(I,Y)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(w){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(w)){if(!this._decoder){var f=require("string_decoder").StringDecoder;this._decoder=new f("utf8")}w=this._decoder.write(w)}return this._parser.write(w.toString()),this.emit("data",w),!0},u.prototype.end=function(w){return w&&w.length&&this.write(w),this._parser.end(),!0},u.prototype.on=function(w,f){var L=this;return!L._parser["on"+w]&&a.indexOf(w)!==-1&&(L._parser["on"+w]=function(){var I=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,w),L.emit.apply(L,I)}),s.prototype.on.call(L,w,f)};var d="[CDATA[",m="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",y={xml:g,xmlns:l},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(w){return w===" "||w===`
`||w==="\r"||w==="	"}function p(w){return w==='"'||w==="'"}function h(w){return w===">"||v(w)}function E(w,f){return w.test(f)}function _(w,f){return!E(w,f)}var x=0;n.STATE={BEGIN:x++,BEGIN_WHITESPACE:x++,TEXT:x++,TEXT_ENTITY:x++,OPEN_WAKA:x++,SGML_DECL:x++,SGML_DECL_QUOTED:x++,DOCTYPE:x++,DOCTYPE_QUOTED:x++,DOCTYPE_DTD:x++,DOCTYPE_DTD_QUOTED:x++,COMMENT_STARTING:x++,COMMENT:x++,COMMENT_ENDING:x++,COMMENT_ENDED:x++,CDATA:x++,CDATA_ENDING:x++,CDATA_ENDING_2:x++,PROC_INST:x++,PROC_INST_BODY:x++,PROC_INST_ENDING:x++,OPEN_TAG:x++,OPEN_TAG_SLASH:x++,ATTRIB:x++,ATTRIB_NAME:x++,ATTRIB_NAME_SAW_WHITE:x++,ATTRIB_VALUE:x++,ATTRIB_VALUE_QUOTED:x++,ATTRIB_VALUE_CLOSED:x++,ATTRIB_VALUE_UNQUOTED:x++,ATTRIB_VALUE_ENTITY_Q:x++,ATTRIB_VALUE_ENTITY_U:x++,CLOSE_TAG:x++,CLOSE_TAG_SAW_WHITE:x++,SCRIPT:x++,SCRIPT_ENDING:x++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(w){var f=n.ENTITIES[w],L=typeof f=="number"?String.fromCharCode(f):f;n.ENTITIES[w]=L});for(var S in n.STATE)n.STATE[n.STATE[S]]=S;x=n.STATE;function C(w,f,L){w[f]&&w[f](L)}function T(w,f,L){w.textNode&&P(w),C(w,f,L)}function P(w){w.textNode=O(w.opt,w.textNode),w.textNode&&C(w,"ontext",w.textNode),w.textNode=""}function O(w,f){return w.trim&&(f=f.trim()),w.normalize&&(f=f.replace(/\s+/g," ")),f}function M(w,f){return P(w),w.trackPosition&&(f+=`
Line: `+w.line+`
Column: `+w.column+`
Char: `+w.c),f=new Error(f),w.error=f,C(w,"onerror",f),w}function k(w){return w.sawRoot&&!w.closedRoot&&A(w,"Unclosed root tag"),w.state!==x.BEGIN&&w.state!==x.BEGIN_WHITESPACE&&w.state!==x.TEXT&&M(w,"Unexpected end"),P(w),w.c="",w.closed=!0,C(w,"onend"),t.call(w,w.strict,w.opt),w}function A(w,f){if(typeof w!="object"||!(w instanceof t))throw new Error("bad call to strictFail");w.strict&&M(w,f)}function G(w){w.strict||(w.tagName=w.tagName[w.looseCase]());var f=w.tags[w.tags.length-1]||w,L=w.tag={name:w.tagName,attributes:{}};w.opt.xmlns&&(L.ns=f.ns),w.attribList.length=0,T(w,"onopentagstart",L)}function B(w,f){var L=w.indexOf(":"),I=L<0?["",w]:w.split(":"),Y=I[0],ne=I[1];return f&&w==="xmlns"&&(Y="xmlns",ne=""),{prefix:Y,local:ne}}function Q(w){if(w.strict||(w.attribName=w.attribName[w.looseCase]()),w.attribList.indexOf(w.attribName)!==-1||w.tag.attributes.hasOwnProperty(w.attribName)){w.attribName=w.attribValue="";return}if(w.opt.xmlns){var f=B(w.attribName,!0),L=f.prefix,I=f.local;if(L==="xmlns")if(I==="xml"&&w.attribValue!==g)A(w,"xml: prefix must be bound to "+g+`
Actual: `+w.attribValue);else if(I==="xmlns"&&w.attribValue!==l)A(w,"xmlns: prefix must be bound to "+l+`
Actual: `+w.attribValue);else{var Y=w.tag,ne=w.tags[w.tags.length-1]||w;Y.ns===ne.ns&&(Y.ns=Object.create(ne.ns)),Y.ns[I]=w.attribValue}w.attribList.push([w.attribName,w.attribValue])}else w.tag.attributes[w.attribName]=w.attribValue,T(w,"onattribute",{name:w.attribName,value:w.attribValue});w.attribName=w.attribValue=""}function Z(w,f){if(w.opt.xmlns){var L=w.tag,I=B(w.tagName);L.prefix=I.prefix,L.local=I.local,L.uri=L.ns[I.prefix]||"",L.prefix&&!L.uri&&(A(w,"Unbound namespace prefix: "+JSON.stringify(w.tagName)),L.uri=I.prefix);var Y=w.tags[w.tags.length-1]||w;L.ns&&Y.ns!==L.ns&&Object.keys(L.ns).forEach(function(Za){T(w,"onopennamespace",{prefix:Za,uri:L.ns[Za]})});for(var ne=0,xe=w.attribList.length;ne<xe;ne++){var Ae=w.attribList[ne],Le=Ae[0],ar=Ae[1],ve=B(Le,!0),yt=ve.prefix,Op=ve.local,Ka=yt===""?"":L.ns[yt]||"",Ko={name:Le,value:ar,prefix:yt,local:Op,uri:Ka};yt&&yt!=="xmlns"&&!Ka&&(A(w,"Unbound namespace prefix: "+JSON.stringify(yt)),Ko.uri=yt),w.tag.attributes[Le]=Ko,T(w,"onattribute",Ko)}w.attribList.length=0}w.tag.isSelfClosing=!!f,w.sawRoot=!0,w.tags.push(w.tag),T(w,"onopentag",w.tag),f||(!w.noscript&&w.tagName.toLowerCase()==="script"?w.state=x.SCRIPT:w.state=x.TEXT,w.tag=null,w.tagName=""),w.attribName=w.attribValue="",w.attribList.length=0}function ue(w){if(!w.tagName){A(w,"Weird empty close tag."),w.textNode+="</>",w.state=x.TEXT;return}if(w.script){if(w.tagName!=="script"){w.script+="</"+w.tagName+">",w.tagName="",w.state=x.SCRIPT;return}T(w,"onscript",w.script),w.script=""}var f=w.tags.length,L=w.tagName;w.strict||(L=L[w.looseCase]());for(var I=L;f--;){var Y=w.tags[f];if(Y.name!==I)A(w,"Unexpected close tag");else break}if(f<0){A(w,"Unmatched closing tag: "+w.tagName),w.textNode+="</"+w.tagName+">",w.state=x.TEXT;return}w.tagName=L;for(var ne=w.tags.length;ne-- >f;){var xe=w.tag=w.tags.pop();w.tagName=w.tag.name,T(w,"onclosetag",w.tagName);var Ae={};for(var Le in xe.ns)Ae[Le]=xe.ns[Le];var ar=w.tags[w.tags.length-1]||w;w.opt.xmlns&&xe.ns!==ar.ns&&Object.keys(xe.ns).forEach(function(ve){var yt=xe.ns[ve];T(w,"onclosenamespace",{prefix:ve,uri:yt})})}f===0&&(w.closedRoot=!0),w.tagName=w.attribValue=w.attribName="",w.attribList.length=0,w.state=x.TEXT}function de(w){var f=w.entity,L=f.toLowerCase(),I,Y="";return w.ENTITIES[f]?w.ENTITIES[f]:w.ENTITIES[L]?w.ENTITIES[L]:(f=L,f.charAt(0)==="#"&&(f.charAt(1)==="x"?(f=f.slice(2),I=parseInt(f,16),Y=I.toString(16)):(f=f.slice(1),I=parseInt(f,10),Y=I.toString(10))),f=f.replace(/^0+/,""),isNaN(I)||Y.toLowerCase()!==f||I<0||I>1114111?(A(w,"Invalid character entity"),"&"+w.entity+";"):String.fromCodePoint(I))}function Pe(w,f){f==="<"?(w.state=x.OPEN_WAKA,w.startTagPosition=w.position):v(f)||(A(w,"Non-whitespace before first tag."),w.textNode=f,w.state=x.TEXT)}function nt(w,f){var L="";return f<w.length&&(L=w.charAt(f)),L}function gt(w){var f=this;if(this.error)throw this.error;if(f.closed)return M(f,"Cannot write after close. Assign an onready handler.");if(w===null)return k(f);typeof w=="object"&&(w=w.toString());for(var L=0,I="";I=nt(w,L++),f.c=I,!!I;)switch(f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++),f.state){case x.BEGIN:if(f.state=x.BEGIN_WHITESPACE,I==="\uFEFF")continue;Pe(f,I);continue;case x.BEGIN_WHITESPACE:Pe(f,I);continue;case x.TEXT:if(f.sawRoot&&!f.closedRoot){for(var ne=L-1;I&&I!=="<"&&I!=="&";)I=nt(w,L++),I&&f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++);f.textNode+=w.substring(ne,L-1)}I==="<"&&!(f.sawRoot&&f.closedRoot&&!f.strict)?(f.state=x.OPEN_WAKA,f.startTagPosition=f.position):(!v(I)&&(!f.sawRoot||f.closedRoot)&&A(f,"Text data outside of root node."),I==="&"?f.state=x.TEXT_ENTITY:f.textNode+=I);continue;case x.SCRIPT:I==="<"?f.state=x.SCRIPT_ENDING:f.script+=I;continue;case x.SCRIPT_ENDING:I==="/"?f.state=x.CLOSE_TAG:(f.script+="<"+I,f.state=x.SCRIPT);continue;case x.OPEN_WAKA:if(I==="!")f.state=x.SGML_DECL,f.sgmlDecl="";else if(!v(I))if(E(b,I))f.state=x.OPEN_TAG,f.tagName=I;else if(I==="/")f.state=x.CLOSE_TAG,f.tagName="";else if(I==="?")f.state=x.PROC_INST,f.procInstName=f.procInstBody="";else{if(A(f,"Unencoded <"),f.startTagPosition+1<f.position){var Y=f.position-f.startTagPosition;I=new Array(Y).join(" ")+I}f.textNode+="<"+I,f.state=x.TEXT}continue;case x.SGML_DECL:if(f.sgmlDecl+I==="--"){f.state=x.COMMENT,f.comment="",f.sgmlDecl="";continue}f.doctype&&f.doctype!==!0&&f.sgmlDecl?(f.state=x.DOCTYPE_DTD,f.doctype+="<!"+f.sgmlDecl+I,f.sgmlDecl=""):(f.sgmlDecl+I).toUpperCase()===d?(T(f,"onopencdata"),f.state=x.CDATA,f.sgmlDecl="",f.cdata=""):(f.sgmlDecl+I).toUpperCase()===m?(f.state=x.DOCTYPE,(f.doctype||f.sawRoot)&&A(f,"Inappropriately located doctype declaration"),f.doctype="",f.sgmlDecl=""):I===">"?(T(f,"onsgmldeclaration",f.sgmlDecl),f.sgmlDecl="",f.state=x.TEXT):(p(I)&&(f.state=x.SGML_DECL_QUOTED),f.sgmlDecl+=I);continue;case x.SGML_DECL_QUOTED:I===f.q&&(f.state=x.SGML_DECL,f.q=""),f.sgmlDecl+=I;continue;case x.DOCTYPE:I===">"?(f.state=x.TEXT,T(f,"ondoctype",f.doctype),f.doctype=!0):(f.doctype+=I,I==="["?f.state=x.DOCTYPE_DTD:p(I)&&(f.state=x.DOCTYPE_QUOTED,f.q=I));continue;case x.DOCTYPE_QUOTED:f.doctype+=I,I===f.q&&(f.q="",f.state=x.DOCTYPE);continue;case x.DOCTYPE_DTD:I==="]"?(f.doctype+=I,f.state=x.DOCTYPE):I==="<"?(f.state=x.OPEN_WAKA,f.startTagPosition=f.position):p(I)?(f.doctype+=I,f.state=x.DOCTYPE_DTD_QUOTED,f.q=I):f.doctype+=I;continue;case x.DOCTYPE_DTD_QUOTED:f.doctype+=I,I===f.q&&(f.state=x.DOCTYPE_DTD,f.q="");continue;case x.COMMENT:I==="-"?f.state=x.COMMENT_ENDING:f.comment+=I;continue;case x.COMMENT_ENDING:I==="-"?(f.state=x.COMMENT_ENDED,f.comment=O(f.opt,f.comment),f.comment&&T(f,"oncomment",f.comment),f.comment=""):(f.comment+="-"+I,f.state=x.COMMENT);continue;case x.COMMENT_ENDED:I!==">"?(A(f,"Malformed comment"),f.comment+="--"+I,f.state=x.COMMENT):f.doctype&&f.doctype!==!0?f.state=x.DOCTYPE_DTD:f.state=x.TEXT;continue;case x.CDATA:for(var ne=L-1;I&&I!=="]";)I=nt(w,L++),I&&f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++);f.cdata+=w.substring(ne,L-1),I==="]"&&(f.state=x.CDATA_ENDING);continue;case x.CDATA_ENDING:I==="]"?f.state=x.CDATA_ENDING_2:(f.cdata+="]"+I,f.state=x.CDATA);continue;case x.CDATA_ENDING_2:I===">"?(f.cdata&&T(f,"oncdata",f.cdata),T(f,"onclosecdata"),f.cdata="",f.state=x.TEXT):I==="]"?f.cdata+="]":(f.cdata+="]]"+I,f.state=x.CDATA);continue;case x.PROC_INST:I==="?"?f.state=x.PROC_INST_ENDING:v(I)?f.state=x.PROC_INST_BODY:f.procInstName+=I;continue;case x.PROC_INST_BODY:if(!f.procInstBody&&v(I))continue;I==="?"?f.state=x.PROC_INST_ENDING:f.procInstBody+=I;continue;case x.PROC_INST_ENDING:I===">"?(T(f,"onprocessinginstruction",{name:f.procInstName,body:f.procInstBody}),f.procInstName=f.procInstBody="",f.state=x.TEXT):(f.procInstBody+="?"+I,f.state=x.PROC_INST_BODY);continue;case x.OPEN_TAG:E(R,I)?f.tagName+=I:(G(f),I===">"?Z(f):I==="/"?f.state=x.OPEN_TAG_SLASH:(v(I)||A(f,"Invalid character in tag name"),f.state=x.ATTRIB));continue;case x.OPEN_TAG_SLASH:I===">"?(Z(f,!0),ue(f)):(A(f,"Forward-slash in opening tag not followed by >"),f.state=x.ATTRIB);continue;case x.ATTRIB:if(v(I))continue;I===">"?Z(f):I==="/"?f.state=x.OPEN_TAG_SLASH:E(b,I)?(f.attribName=I,f.attribValue="",f.state=x.ATTRIB_NAME):A(f,"Invalid attribute name");continue;case x.ATTRIB_NAME:I==="="?f.state=x.ATTRIB_VALUE:I===">"?(A(f,"Attribute without value"),f.attribValue=f.attribName,Q(f),Z(f)):v(I)?f.state=x.ATTRIB_NAME_SAW_WHITE:E(R,I)?f.attribName+=I:A(f,"Invalid attribute name");continue;case x.ATTRIB_NAME_SAW_WHITE:if(I==="=")f.state=x.ATTRIB_VALUE;else{if(v(I))continue;A(f,"Attribute without value"),f.tag.attributes[f.attribName]="",f.attribValue="",T(f,"onattribute",{name:f.attribName,value:""}),f.attribName="",I===">"?Z(f):E(b,I)?(f.attribName=I,f.state=x.ATTRIB_NAME):(A(f,"Invalid attribute name"),f.state=x.ATTRIB)}continue;case x.ATTRIB_VALUE:if(v(I))continue;p(I)?(f.q=I,f.state=x.ATTRIB_VALUE_QUOTED):(f.opt.unquotedAttributeValues||M(f,"Unquoted attribute value"),f.state=x.ATTRIB_VALUE_UNQUOTED,f.attribValue=I);continue;case x.ATTRIB_VALUE_QUOTED:if(I!==f.q){I==="&"?f.state=x.ATTRIB_VALUE_ENTITY_Q:f.attribValue+=I;continue}Q(f),f.q="",f.state=x.ATTRIB_VALUE_CLOSED;continue;case x.ATTRIB_VALUE_CLOSED:v(I)?f.state=x.ATTRIB:I===">"?Z(f):I==="/"?f.state=x.OPEN_TAG_SLASH:E(b,I)?(A(f,"No whitespace between attributes"),f.attribName=I,f.attribValue="",f.state=x.ATTRIB_NAME):A(f,"Invalid attribute name");continue;case x.ATTRIB_VALUE_UNQUOTED:if(!h(I)){I==="&"?f.state=x.ATTRIB_VALUE_ENTITY_U:f.attribValue+=I;continue}Q(f),I===">"?Z(f):f.state=x.ATTRIB;continue;case x.CLOSE_TAG:if(f.tagName)I===">"?ue(f):E(R,I)?f.tagName+=I:f.script?(f.script+="</"+f.tagName,f.tagName="",f.state=x.SCRIPT):(v(I)||A(f,"Invalid tagname in closing tag"),f.state=x.CLOSE_TAG_SAW_WHITE);else{if(v(I))continue;_(b,I)?f.script?(f.script+="</"+I,f.state=x.SCRIPT):A(f,"Invalid tagname in closing tag."):f.tagName=I}continue;case x.CLOSE_TAG_SAW_WHITE:if(v(I))continue;I===">"?ue(f):A(f,"Invalid characters in closing tag");continue;case x.TEXT_ENTITY:case x.ATTRIB_VALUE_ENTITY_Q:case x.ATTRIB_VALUE_ENTITY_U:var xe,Ae;switch(f.state){case x.TEXT_ENTITY:xe=x.TEXT,Ae="textNode";break;case x.ATTRIB_VALUE_ENTITY_Q:xe=x.ATTRIB_VALUE_QUOTED,Ae="attribValue";break;case x.ATTRIB_VALUE_ENTITY_U:xe=x.ATTRIB_VALUE_UNQUOTED,Ae="attribValue";break}if(I===";"){var Le=de(f);f.opt.unparsedEntities&&!Object.values(n.XML_ENTITIES).includes(Le)?(f.entity="",f.state=xe,f.write(Le)):(f[Ae]+=Le,f.entity="",f.state=xe)}else E(f.entity.length?D:N,I)?f.entity+=I:(A(f,"Invalid character in entity name"),f[Ae]+="&"+f.entity+I,f.entity="",f.state=xe);continue;default:throw new Error(f,"Unknown state: "+f.state)}return f.position>=f.bufferCheckPosition&&r(f),f}String.fromCodePoint||function(){var w=String.fromCharCode,f=Math.floor,L=function(){var I=16384,Y=[],ne,xe,Ae=-1,Le=arguments.length;if(!Le)return"";for(var ar="";++Ae<Le;){var ve=Number(arguments[Ae]);if(!isFinite(ve)||ve<0||ve>1114111||f(ve)!==ve)throw RangeError("Invalid code point: "+ve);ve<=65535?Y.push(ve):(ve-=65536,ne=(ve>>10)+55296,xe=ve%1024+56320,Y.push(ne,xe)),(Ae+1===Le||Y.length>I)&&(ar+=w.apply(null,Y),Y.length=0)}return ar};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(typeof Si>"u"?Si.sax={}:Si)});var zl=F(ga=>{(function(){"use strict";ga.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(ga)});var ya=F(tr=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),tr.normalize=function(e){return e.toLowerCase()},tr.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},tr.stripPrefix=function(e){return e.replace(n,"")},tr.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},tr.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(tr)});var Hl=F(St=>{(function(){"use strict";var n,e,t,r,i,o,s,a,c,u=function(g,l){return function(){return g.apply(l,arguments)}},d=function(g,l){for(var y in l)m.call(l,y)&&(g[y]=l[y]);function b(){this.constructor=g}return b.prototype=l.prototype,g.prototype=new b,g.__super__=l.prototype,g},m={}.hasOwnProperty;a=Vl(),r=require("events"),n=zl(),s=ya(),c=require("timers").setImmediate,e=li().defaults,i=function(g){return typeof g=="object"&&g!=null&&Object.keys(g).length===0},o=function(g,l,y){var b,R,N;for(b=0,R=g.length;b<R;b++)N=g[b],l=N(l,y);return l},t=function(g,l,y){var b;return b=Object.create(null),b.value=y,b.writable=!0,b.enumerable=!0,b.configurable=!0,Object.defineProperty(g,l,b)},St.Parser=function(g){d(l,g);function l(y){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var b,R,N;if(!(this instanceof St.Parser))return new St.Parser(y);this.options={},R=e["0.2"];for(b in R)m.call(R,b)&&(N=R[b],this.options[b]=N);for(b in y)m.call(y,b)&&(N=y[b],this.options[b]=N);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return l.prototype.processAsync=function(){var y,b;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),c(this.processAsync))}catch(R){if(b=R,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(b)}},l.prototype.assignOrPush=function(y,b,R){return b in y?(y[b]instanceof Array||t(y,b,[y[b]]),y[b].push(R)):this.options.explicitArray?t(y,b,[R]):t(y,b,R)},l.prototype.reset=function(){var y,b,R,N;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(D){return function(v){if(D.saxParser.resume(),!D.saxParser.errThrown)return D.saxParser.errThrown=!0,D.emit("error",v)}}(this),this.saxParser.onend=function(D){return function(){if(!D.saxParser.ended)return D.saxParser.ended=!0,D.emit("end",D.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,N=[],y=this.options.attrkey,b=this.options.charkey,this.saxParser.onopentag=function(D){return function(v){var p,h,E,_,x;if(E={},E[b]="",!D.options.ignoreAttrs){x=v.attributes;for(p in x)m.call(x,p)&&(!(y in E)&&!D.options.mergeAttrs&&(E[y]={}),h=D.options.attrValueProcessors?o(D.options.attrValueProcessors,v.attributes[p],p):v.attributes[p],_=D.options.attrNameProcessors?o(D.options.attrNameProcessors,p):p,D.options.mergeAttrs?D.assignOrPush(E,_,h):t(E[y],_,h))}return E["#name"]=D.options.tagNameProcessors?o(D.options.tagNameProcessors,v.name):v.name,D.options.xmlns&&(E[D.options.xmlnskey]={uri:v.uri,local:v.local}),N.push(E)}}(this),this.saxParser.onclosetag=function(D){return function(){var v,p,h,E,_,x,S,C,T,P;if(x=N.pop(),_=x["#name"],(!D.options.explicitChildren||!D.options.preserveChildrenOrder)&&delete x["#name"],x.cdata===!0&&(v=x.cdata,delete x.cdata),T=N[N.length-1],x[b].match(/^\s*$/)&&!v?(p=x[b],delete x[b]):(D.options.trim&&(x[b]=x[b].trim()),D.options.normalize&&(x[b]=x[b].replace(/\s{2,}/g," ").trim()),x[b]=D.options.valueProcessors?o(D.options.valueProcessors,x[b],_):x[b],Object.keys(x).length===1&&b in x&&!D.EXPLICIT_CHARKEY&&(x=x[b])),i(x)&&(typeof D.options.emptyTag=="function"?x=D.options.emptyTag():x=D.options.emptyTag!==""?D.options.emptyTag:p),D.options.validator!=null&&(P="/"+function(){var O,M,k;for(k=[],O=0,M=N.length;O<M;O++)E=N[O],k.push(E["#name"]);return k}().concat(_).join("/"),function(){var O;try{return x=D.options.validator(P,T&&T[_],x)}catch(M){return O=M,D.emit("error",O)}}()),D.options.explicitChildren&&!D.options.mergeAttrs&&typeof x=="object"){if(!D.options.preserveChildrenOrder)E={},D.options.attrkey in x&&(E[D.options.attrkey]=x[D.options.attrkey],delete x[D.options.attrkey]),!D.options.charsAsChildren&&D.options.charkey in x&&(E[D.options.charkey]=x[D.options.charkey],delete x[D.options.charkey]),Object.getOwnPropertyNames(x).length>0&&(E[D.options.childkey]=x),x=E;else if(T){T[D.options.childkey]=T[D.options.childkey]||[],S={};for(h in x)m.call(x,h)&&t(S,h,x[h]);T[D.options.childkey].push(S),delete x["#name"],Object.keys(x).length===1&&b in x&&!D.EXPLICIT_CHARKEY&&(x=x[b])}}return N.length>0?D.assignOrPush(T,_,x):(D.options.explicitRoot&&(C=x,x={},t(x,_,C)),D.resultObject=x,D.saxParser.ended=!0,D.emit("end",D.resultObject))}}(this),R=function(D){return function(v){var p,h;if(h=N[N.length-1],h)return h[b]+=v,D.options.explicitChildren&&D.options.preserveChildrenOrder&&D.options.charsAsChildren&&(D.options.includeWhiteChars||v.replace(/\\n/g,"").trim()!=="")&&(h[D.options.childkey]=h[D.options.childkey]||[],p={"#name":"__text__"},p[b]=v,D.options.normalize&&(p[b]=p[b].replace(/\s{2,}/g," ").trim()),h[D.options.childkey].push(p)),h}}(this),this.saxParser.ontext=R,this.saxParser.oncdata=function(D){return function(v){var p;if(p=R(v),p)return p.cdata=!0}}(this)},l.prototype.parseString=function(y,b){var R;b!=null&&typeof b=="function"&&(this.on("end",function(N){return this.reset(),b(null,N)}),this.on("error",function(N){return this.reset(),b(N)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=n.stripBOM(y),this.options.async?(this.remaining=y,c(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(N){if(R=N,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw R}else return this.emit("error",R),this.saxParser.errThrown=!0}},l.prototype.parseStringPromise=function(y){return new Promise(function(b){return function(R,N){return b.parseString(y,function(D,v){return D?N(D):R(v)})}}(this))},l}(r),St.parseString=function(g,l,y){var b,R,N;return y!=null?(typeof y=="function"&&(b=y),typeof l=="object"&&(R=l)):(typeof l=="function"&&(b=l),R={}),N=new St.Parser(R),N.parseString(g,b)},St.parseStringPromise=function(g,l){var y,b;return typeof l=="object"&&(y=l),b=new St.Parser(y),b.parseStringPromise(g)}}).call(St)});var vr=F(Dt=>{(function(){"use strict";var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;e=li(),n=Wl(),t=Hl(),r=ya(),Dt.defaults=e.defaults,Dt.processors=r,Dt.ValidationError=function(s){i(a,s);function a(c){this.message=c}return a}(Error),Dt.Builder=n.Builder,Dt.Parser=t.Parser,Dt.parseString=t.parseString,Dt.parseStringPromise=t.parseStringPromise}).call(Dt)});var df=F((p6,Pt)=>{var te=require("fs"),Ri=require("os"),be=require("path"),Kl=require("crypto"),pt={fs:te.constants,os:Ri.constants},Zl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",rf=/XXXXXX/,mm=3,nf=(pt.O_CREAT||pt.fs.O_CREAT)|(pt.O_EXCL||pt.fs.O_EXCL)|(pt.O_RDWR||pt.fs.O_RDWR),gm=Ri.platform()==="win32",ym=pt.EBADF||pt.os.errno.EBADF,wm=pt.ENOENT||pt.os.errno.ENOENT,of=448,sf=384,vm="exit",br=[],af=te.rmdirSync.bind(te),cf=!1;function bm(n,e){return te.rm(n,{recursive:!0},e)}function uf(n){return te.rmSync(n,{recursive:!0})}function ba(n,e){let t=Er(n,e),r=t[0],i=t[1];Om(r,function(o,s){if(o)return i(o);let a=s.tries;(function c(){try{let u=ff(s);te.stat(u,function(d){if(!d)return a-- >0?c():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()})}function Ea(n){let e=Er(n),t=e[0],r=_m(t),i=r.tries;do{let o=ff(r);try{te.statSync(o)}catch{return o}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function Em(n,e){let t=Er(n,e),r=t[0],i=t[1];ba(r,function(s,a){if(s)return i(s);te.open(a,nf,r.mode||sf,function(u,d){if(u)return i(u);if(r.discardDescriptor)return te.close(d,function(g){return i(g,a,void 0,wa(a,-1,r,!1))});{let m=r.discardDescriptor||r.detachDescriptor;i(null,a,d,wa(a,m?-1:d,r,!1))}})})}function Cm(n){let e=Er(n),t=e[0],r=t.discardDescriptor||t.detachDescriptor,i=Ea(t),o=te.openSync(i,nf,t.mode||sf);return t.discardDescriptor&&(te.closeSync(o),o=void 0),{name:i,fd:o,removeCallback:wa(i,r?-1:o,t,!0)}}function Im(n,e){let t=Er(n,e),r=t[0],i=t[1];ba(r,function(s,a){if(s)return i(s);te.mkdir(a,r.mode||of,function(u){if(u)return i(u);i(null,a,lf(a,r,!1))})})}function Sm(n){let e=Er(n),t=e[0],r=Ea(t);return te.mkdirSync(r,t.mode||of),{name:r,removeCallback:lf(r,t,!0)}}function Dm(n,e){let t=function(r){if(r&&!va(r))return e(r);e()};0<=n[0]?te.close(n[0],function(){te.unlink(n[1],t)}):te.unlink(n[1],t)}function Rm(n){let e=null;try{0<=n[0]&&te.closeSync(n[0])}catch(t){if(!Am(t)&&!va(t))throw t}finally{try{te.unlinkSync(n[1])}catch(t){va(t)||(e=t)}}if(e!==null)throw e}function wa(n,e,t,r){let i=Di(Rm,[e,n],r),o=Di(Dm,[e,n],r,i);return t.keep||br.unshift(i),r?i:o}function lf(n,e,t){let r=e.unsafeCleanup?bm:te.rmdir.bind(te),i=e.unsafeCleanup?uf:af,o=Di(i,n,t),s=Di(r,n,t,o);return e.keep||br.unshift(o),t?o:s}function Di(n,e,t,r){let i=!1;return function o(s){if(!i){let a=r||o,c=br.indexOf(a);return c>=0&&br.splice(c,1),i=!0,t||n===af||n===uf?n(e):n(e,s||function(){})}}}function Tm(){if(cf)for(;br.length;)try{br[0]()}catch{}}function Jl(n){let e=[],t=null;try{t=Kl.randomBytes(n)}catch{t=Kl.pseudoRandomBytes(n)}for(let r=0;r<n;r++)e.push(Zl[t[r]%Zl.length]);return e.join("")}function je(n){return typeof n>"u"}function Er(n,e){if(typeof n=="function")return[{},n];if(je(n))return[{},e];let t={};for(let r of Object.getOwnPropertyNames(n))t[r]=n[r];return[t,e]}function Pm(n,e,t){let r=be.isAbsolute(n)?n:be.join(e,n);te.stat(r,function(i){i?te.realpath(be.dirname(r),function(o,s){if(o)return t(o);t(null,be.join(s,be.basename(r)))}):te.realpath(r,t)})}function Nm(n,e){let t=be.isAbsolute(n)?n:be.join(e,n);try{return te.statSync(t),te.realpathSync(t)}catch{let i=te.realpathSync(be.dirname(t));return be.join(i,be.basename(t))}}function ff(n){let e=n.tmpdir;if(!je(n.name))return be.join(e,n.dir,n.name);if(!je(n.template))return be.join(e,n.dir,n.template).replace(rf,Jl(6));let t=[n.prefix?n.prefix:"tmp","-",process.pid,"-",Jl(12),n.postfix?"-"+n.postfix:""].join("");return be.join(e,n.dir,t)}function pf(n){if(!je(n.name)){let e=n.name;if(be.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let t=be.basename(e);if(t===".."||t==="."||t!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!je(n.template)&&!n.template.match(rf))throw new Error(`Invalid template, found "${n.template}".`);if(!je(n.tries)&&isNaN(n.tries)||n.tries<0)throw new Error(`Invalid tries, found "${n.tries}".`);n.tries=je(n.name)?n.tries||mm:1,n.keep=!!n.keep,n.detachDescriptor=!!n.detachDescriptor,n.discardDescriptor=!!n.discardDescriptor,n.unsafeCleanup=!!n.unsafeCleanup,n.prefix=je(n.prefix)?"":n.prefix,n.postfix=je(n.postfix)?"":n.postfix}function ef(n,e,t,r){if(je(e))return r(null);Pm(e,t,function(i,o){if(i)return r(i);let s=be.relative(t,o);if(!o.startsWith(t))return r(new Error(`${n} option must be relative to "${t}", found "${s}".`));r(null,s)})}function tf(n,e,t){if(je(e))return;let r=Nm(e,t),i=be.relative(t,r);if(!r.startsWith(t))throw new Error(`${n} option must be relative to "${t}", found "${i}".`);return i}function Om(n,e){Mm(n,function(t,r){if(t)return e(t);n.tmpdir=r;try{pf(n,r)}catch(i){return e(i)}ef("dir",n.dir,r,function(i,o){if(i)return e(i);n.dir=je(o)?"":o,ef("template",n.template,r,function(s,a){if(s)return e(s);n.template=a,e(null,n)})})})}function _m(n){let e=n.tmpdir=xf(n);pf(n,e);let t=tf("dir",n.dir,e);return n.dir=je(t)?"":t,n.template=tf("template",n.template,e),n}function Am(n){return hf(n,-ym,"EBADF")}function va(n){return hf(n,-wm,"ENOENT")}function hf(n,e,t){return gm?n.code===t:n.code===t&&n.errno===e}function Lm(){cf=!0}function Mm(n,e){return te.realpath(n&&n.tmpdir||Ri.tmpdir(),e)}function xf(n){return te.realpathSync(n&&n.tmpdir||Ri.tmpdir())}process.addListener(vm,Tm);Object.defineProperty(Pt.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return xf()}});Pt.exports.dir=Im;Pt.exports.dirSync=Sm;Pt.exports.file=Em;Pt.exports.fileSync=Cm;Pt.exports.tmpName=ba;Pt.exports.tmpNameSync=Ea;Pt.exports.setGracefulCleanup=Lm});var xp=F((Xa,Wa)=>{(function(n,e){typeof Xa=="object"&&typeof Wa<"u"?Wa.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})(Xa,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",c="week",u="month",d="quarter",m="year",g="date",l="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var O=["th","st","nd","rd"],M=P%100;return"["+P+(O[(M-20)%10]||O[M]||O[0])+"]"}},N=function(P,O,M){var k=String(P);return!k||k.length>=O?P:""+Array(O+1-k.length).join(M)+P},D={s:N,z:function(P){var O=-P.utcOffset(),M=Math.abs(O),k=Math.floor(M/60),A=M%60;return(O<=0?"+":"-")+N(k,2,"0")+":"+N(A,2,"0")},m:function P(O,M){if(O.date()<M.date())return-P(M,O);var k=12*(M.year()-O.year())+(M.month()-O.month()),A=O.clone().add(k,u),G=M-A<0,B=O.clone().add(k+(G?-1:1),u);return+(-(k+(M-A)/(G?A-B:B-A))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:u,y:m,w:c,d:a,D:g,h:s,m:o,s:i,ms:r,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},v="en",p={};p[v]=R;var h="$isDayjsObject",E=function(P){return P instanceof C||!(!P||!P[h])},_=function P(O,M,k){var A;if(!O)return v;if(typeof O=="string"){var G=O.toLowerCase();p[G]&&(A=G),M&&(p[G]=M,A=G);var B=O.split("-");if(!A&&B.length>1)return P(B[0])}else{var Q=O.name;p[Q]=O,A=Q}return!k&&A&&(v=A),A||!k&&v},x=function(P,O){if(E(P))return P.clone();var M=typeof O=="object"?O:{};return M.date=P,M.args=arguments,new C(M)},S=D;S.l=_,S.i=E,S.w=function(P,O){return x(P,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var C=function(){function P(M){this.$L=_(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[h]=!0}var O=P.prototype;return O.parse=function(M){this.$d=function(k){var A=k.date,G=k.utc;if(A===null)return new Date(NaN);if(S.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var B=A.match(y);if(B){var Q=B[2]-1||0,Z=(B[7]||"0").substring(0,3);return G?new Date(Date.UTC(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)):new Date(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)}}return new Date(A)}(M),this.init()},O.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},O.$utils=function(){return S},O.isValid=function(){return this.$d.toString()!==l},O.isSame=function(M,k){var A=x(M);return this.startOf(k)<=A&&A<=this.endOf(k)},O.isAfter=function(M,k){return x(M)<this.startOf(k)},O.isBefore=function(M,k){return this.endOf(k)<x(M)},O.$g=function(M,k,A){return S.u(M)?this[k]:this.set(A,M)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(M,k){var A=this,G=!!S.u(k)||k,B=S.p(M),Q=function(f,L){var I=S.w(A.$u?Date.UTC(A.$y,L,f):new Date(A.$y,L,f),A);return G?I:I.endOf(a)},Z=function(f,L){return S.w(A.toDate()[f].apply(A.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(L)),A)},ue=this.$W,de=this.$M,Pe=this.$D,nt="set"+(this.$u?"UTC":"");switch(B){case m:return G?Q(1,0):Q(31,11);case u:return G?Q(1,de):Q(0,de+1);case c:var gt=this.$locale().weekStart||0,w=(ue<gt?ue+7:ue)-gt;return Q(G?Pe-w:Pe+(6-w),de);case a:case g:return Z(nt+"Hours",0);case s:return Z(nt+"Minutes",1);case o:return Z(nt+"Seconds",2);case i:return Z(nt+"Milliseconds",3);default:return this.clone()}},O.endOf=function(M){return this.startOf(M,!1)},O.$set=function(M,k){var A,G=S.p(M),B="set"+(this.$u?"UTC":""),Q=(A={},A[a]=B+"Date",A[g]=B+"Date",A[u]=B+"Month",A[m]=B+"FullYear",A[s]=B+"Hours",A[o]=B+"Minutes",A[i]=B+"Seconds",A[r]=B+"Milliseconds",A)[G],Z=G===a?this.$D+(k-this.$W):k;if(G===u||G===m){var ue=this.clone().set(g,1);ue.$d[Q](Z),ue.init(),this.$d=ue.set(g,Math.min(this.$D,ue.daysInMonth())).$d}else Q&&this.$d[Q](Z);return this.init(),this},O.set=function(M,k){return this.clone().$set(M,k)},O.get=function(M){return this[S.p(M)]()},O.add=function(M,k){var A,G=this;M=Number(M);var B=S.p(k),Q=function(de){var Pe=x(G);return S.w(Pe.date(Pe.date()+Math.round(de*M)),G)};if(B===u)return this.set(u,this.$M+M);if(B===m)return this.set(m,this.$y+M);if(B===a)return Q(1);if(B===c)return Q(7);var Z=(A={},A[o]=e,A[s]=t,A[i]=n,A)[B]||1,ue=this.$d.getTime()+M*Z;return S.w(ue,this)},O.subtract=function(M,k){return this.add(-1*M,k)},O.format=function(M){var k=this,A=this.$locale();if(!this.isValid())return A.invalidDate||l;var G=M||"YYYY-MM-DDTHH:mm:ssZ",B=S.z(this),Q=this.$H,Z=this.$m,ue=this.$M,de=A.weekdays,Pe=A.months,nt=A.meridiem,gt=function(L,I,Y,ne){return L&&(L[I]||L(k,G))||Y[I].slice(0,ne)},w=function(L){return S.s(Q%12||12,L,"0")},f=nt||function(L,I,Y){var ne=L<12?"AM":"PM";return Y?ne.toLowerCase():ne};return G.replace(b,function(L,I){return I||function(Y){switch(Y){case"YY":return String(k.$y).slice(-2);case"YYYY":return S.s(k.$y,4,"0");case"M":return ue+1;case"MM":return S.s(ue+1,2,"0");case"MMM":return gt(A.monthsShort,ue,Pe,3);case"MMMM":return gt(Pe,ue);case"D":return k.$D;case"DD":return S.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return gt(A.weekdaysMin,k.$W,de,2);case"ddd":return gt(A.weekdaysShort,k.$W,de,3);case"dddd":return de[k.$W];case"H":return String(Q);case"HH":return S.s(Q,2,"0");case"h":return w(1);case"hh":return w(2);case"a":return f(Q,Z,!0);case"A":return f(Q,Z,!1);case"m":return String(Z);case"mm":return S.s(Z,2,"0");case"s":return String(k.$s);case"ss":return S.s(k.$s,2,"0");case"SSS":return S.s(k.$ms,3,"0");case"Z":return B}return null}(L)||B.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(M,k,A){var G,B=this,Q=S.p(k),Z=x(M),ue=(Z.utcOffset()-this.utcOffset())*e,de=this-Z,Pe=function(){return S.m(B,Z)};switch(Q){case m:G=Pe()/12;break;case u:G=Pe();break;case d:G=Pe()/3;break;case c:G=(de-ue)/6048e5;break;case a:G=(de-ue)/864e5;break;case s:G=de/t;break;case o:G=de/e;break;case i:G=de/n;break;default:G=de}return A?G:S.a(G)},O.daysInMonth=function(){return this.endOf(u).$D},O.$locale=function(){return p[this.$L]},O.locale=function(M,k){if(!M)return this.$L;var A=this.clone(),G=_(M,k,!0);return G&&(A.$L=G),A},O.clone=function(){return S.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},P}(),T=C.prototype;return x.prototype=T,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",u],["$y",m],["$D",g]].forEach(function(P){T[P[1]]=function(O){return this.$g(O,P[0],P[1])}}),x.extend=function(P,O){return P.$i||(P(O,C,x),P.$i=!0),x},x.locale=_,x.isDayjs=E,x.unix=function(P){return x(1e3*P)},x.en=p[v],x.Ls=p,x.p={},x})});var dp=F((Va,za)=>{(function(n,e){typeof Va=="object"&&typeof za<"u"?za.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_relativeTime=e()})(Va,function(){"use strict";return function(n,e,t){n=n||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(a,c,u,d){return r.fromToBase(a,c,u,d)}t.en.relativeTime=i,r.fromToBase=function(a,c,u,d,m){for(var g,l,y,b=u.$locale().relativeTime||i,R=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],N=R.length,D=0;D<N;D+=1){var v=R[D];v.d&&(g=d?t(a).diff(u,v.d,!0):u.diff(a,v.d,!0));var p=(n.rounding||Math.round)(Math.abs(g));if(y=g>0,p<=v.r||!v.r){p<=1&&D>0&&(v=R[D-1]);var h=b[v.l];m&&(p=m(""+p)),l=typeof h=="string"?h.replace("%d",p):h(p,c,v.l,y);break}}if(c)return l;var E=y?b.future:b.past;return typeof E=="function"?E(l):E.replace("%s",l)},r.to=function(a,c){return o(a,c,this,!0)},r.from=function(a,c){return o(a,c,this)};var s=function(a){return a.$u?t.utc():t()};r.toNow=function(a){return this.to(s(this),a)},r.fromNow=function(a){return this.from(s(this),a)}}})});var t2={};ec(t2,{activate:()=>Jg,deactivate:()=>e2});module.exports=Fp(t2);var Np=X(require("path")),We=require("vscode");var yc=require("vscode");var Ct=X(require("path")),z=require("vscode");var Br=(i=>(i.empty="only the target itself",i.files="the target and any immediate file children thereof",i.immediates="the target and any immediate children thereof",i.infinity="the target and all of its descendants\u2014full recursion",i))(Br||{});var J={};ec(J,{default:()=>tc.default});Zo(J,require("fs"));var tc=X(require("fs"),1);function le(n){return new Promise((e,t)=>{(0,J.access)(n,r=>e(!r))})}var rc=require("util"),Ve=(0,rc.promisify)(J.lstat);var nc=require("util"),Jo=(0,nc.promisify)(J.readFile);var ic=require("util"),Ht=(0,ic.promisify)(J.readdir);var oc=require("util"),es=(0,oc.promisify)(J.rmdir);var sc=require("util"),wt=(0,sc.promisify)(J.stat);var ac=require("util"),Yt=(0,ac.promisify)(J.unlink);var cc=require("util"),ts=(0,cc.promisify)(J.writeFile);var ur=X(require("path")),rs=require("vscode"),cr=class{constructor(e,t=!1){this.expression=e;this.recursive=t}get label(){let e=this.recursive?" (Recursive)":"";return`${this.expression}${e}`}get description(){let e=this.recursive?" (Recursive)":"";return`Add '${this.expression}' to 'svn:ignore'${e}`}};async function uc(n,e){if(e.length===0)return!1;let t=new RegExp("\\.[^\\.]+(\\.map)?$","i");if(e.length===1){let y=e[0],b=y.fsPath.match(t),R=b&&b[0]?b[0]:"",N=ur.basename(y.fsPath),D=ur.dirname(y.fsPath),v=[];v.push(new cr(N)),R&&v.push(new cr("*"+R)),v.push(new cr(N,!0)),R&&v.push(new cr("*"+R,!0));let p=await rs.window.showQuickPick(v);return p?n.addToIgnore([p.expression],D,p.recursive):!1}let r=e.length,i="(Recursive)",o=`Ignore ${r} by filename`,s=`Ignore ${r} by extension`,a=`Ignore ${r} by filename ${i}`,c=`Ignore ${r} by extension ${i}`,u=[o,s,a,c],d=await rs.window.showQuickPick(u);if(!d)return!1;let m=d.startsWith(o),g=d.endsWith(i),l={};for(let y of e){let b=ur.dirname(y.fsPath),R=ur.basename(y.fsPath),N=y.fsPath.match(t),D=N&&N[0]?N[0]:"";typeof l[b]>"u"&&(l[b]=[]),m?l[b].push(R):D&&l[b].push("*"+D)}for(let y in l)if(l.hasOwnProperty(y)){let b=[...new Set(l[y])];await n.addToIgnore(b,y,g)}return!0}var Mn=require("vscode");function lc(n,e,t){let r=[],i=0;for(let o of t){let s=o.originalEndLineNumber===0,a=o.modifiedEndLineNumber===0;if(r.push(n.getText(new Mn.Range(i,0,s?o.originalStartLineNumber:o.originalStartLineNumber-1,0))),!a){let c=o.modifiedStartLineNumber-1,u=0;s&&o.originalStartLineNumber===n.lineCount&&(c=n.lineCount-1,u=n.lineAt(c).range.end.character),r.push(e.getText(new Mn.Range(c,u,o.modifiedEndLineNumber,0)))}i=s?o.originalStartLineNumber:o.originalEndLineNumber}return r.push(n.getText(new Mn.Range(i,0,n.lineCount,0))),r.join("")}var fs=X(require("path")),_t=require("vscode");var Me=X(require("path")),fc=require("vscode");function ns(n){return n.then(()=>{})}function Ie(n){return n.forEach(e=>e.dispose()),[]}function it(n){return{dispose:n}}function Up(n){return it(()=>Ie(n))}function ot(...n){return(e,t=null,r)=>{let i=Up(n.map(o=>o(s=>e.call(t,s))));return r&&r.push(i),i}}function me(n,e){return(t,r=null,i)=>n(o=>e(o)&&t.call(r,o),null,i)}function kp(n){return(e,t=null,r)=>{let i=n(o=>(i.dispose(),e.call(t,o)),null,r);return i}}function Qt(n){return new Promise(e=>kp(n)(e))}var $p=new RegExp(Me.sep==="/"?"\\\\":"/","g"),Bp=new RegExp("^\\\\(\\w:)","g");function tt(n){return n=n.replace($p,Me.sep),n=n.replace(Bp,"$1"),Me.sep==="\\"&&(n=n.charAt(0).toLowerCase()+n.slice(1)),n}function st(n){return n=tt(n),Me.sep==="\\"&&(n=n.toLowerCase()),n}function Se(n,e){return n.trim()===""||e.trim()===""?!1:(n=n.replace(/[\\\/]/g,Me.sep),e=e.replace(/[\\\/]/g,Me.sep),Me.sep==="\\"&&(n=n.replace(/^\\/,"").toLowerCase(),e=e.replace(/^\\/,"").toLowerCase()),n===e?!0:(n.charAt(n.length-1)!==Me.sep&&(n+=Me.sep),e.startsWith(n)))}function is(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>t===0?e.toLowerCase():e.toUpperCase()).replace(/[\s\-]+/g,"")}function os(n){return new Promise(e=>setTimeout(e,n))}function Fn(n){switch(n){case"CurrentBranch":case"Log":case"Show":case"Info":case"Changes":return!0;default:return!1}}async function ss(n){await le(n)&&(await Ve(n)).isDirectory()&&(await Promise.all((await Ht(n)).map(async e=>{let t=Me.join(n,e);(await Ve(t)).isDirectory()?await ss(t):await Yt(t)})),await es(n))}function ze(n){if(n===void 0)throw new Error("undefined unwrap");return n}function Un(n){return/@/.test(n)&&(n+="@"),n}function vt(){return process.env.SVN_ASP_DOT_NET_HACK?"_svn":".svn"}async function as(n,e=!0){let t=vt(),r=await le(`${n}/${t}`);if(r||!e)return r;let i=Me.dirname(n);return i===n||i==="."?!1:as(i,!0)}function Ot(n,e){fc.commands.executeCommand("setContext",n,e)}function qp(n){return/^[a-zA-Z]:\\/.test(n)}function pc(n,e){return qp(n)&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e}var hc=it(()=>null);function qr(n){return(e,t,r)=>{let i=null,o=null;if(typeof r.value=="function"?(i="value",o=r.value):typeof r.get=="function"&&(i="get",o=r.get),!o||!i)throw new Error("not supported");r[i]=n(o,t)}}function jp(n,e){let t=`$memoize$${e}`;return function(...r){return this.hasOwnProperty(t)||Object.defineProperty(this,t,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[t]}}var ge=qr(jp);function Gp(n,e){let t=`$throttle$current$${e}`,r=`$throttle$next$${e}`,i=function(...o){if(this[r])return this[r];if(this[t])return this[r]=ns(this[t]).then(()=>(this[r]=void 0,i.apply(this,o))),this[r];this[t]=n.apply(this,o);let s=()=>this[t]=void 0;return ns(this[t]).then(s,s),this[t]};return i}var lr=qr(Gp);function Xp(n,e){let t=`__$sequence$${e}`;return function(...r){let i=this[t]||Promise.resolve(null),o=async()=>n.apply(this,r);return this[t]=i.then(o,o),this[t]}}var xc=qr(Xp);function De(n){return qr((e,t)=>{let r=`$debounce$${t}`;return function(...i){clearTimeout(this[r]),this[r]=setTimeout(()=>e.apply(this,i),n)}})}var cs={};function dc(n){return qr((e,t)=>function(...r){let i=cs[n]||Promise.resolve(null),o=async()=>e.apply(this,r);return cs[n]=i.then(o,o),cs[n]})}var fr=require("vscode"),us="svn",ls=class{constructor(){this._onDidChange=new fr.EventEmitter;this.configuration=fr.workspace.getConfiguration(us),fr.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}get onDidChange(){return this._onDidChange.event}onConfigurationChanged(e){e.affectsConfiguration(us)&&(this.configuration=fr.workspace.getConfiguration(us),this._onDidChange.fire(e))}get(e,t){return this.configuration.get(e,t)}update(e,t,r){return this.configuration.update(e,t,r)}inspect(e){return this.configuration.inspect(e)}},$=new ls;var Wp=fs.join(__dirname,"..","icons");function ye(n,e){return _t.Uri.file(fs.join(Wp,e,`${n}.svg`))}var bt=class bt{constructor(e,t,r,i,o=!1){this._resourceUri=e;this._type=t;this._renameResourceUri=r;this._props=i;this._remote=o}get resourceUri(){return this._resourceUri}get type(){return this._type}get renameResourceUri(){return this._renameResourceUri}get props(){return this._props}get remote(){return this._remote}get decorations(){let e={iconPath:this.getIconPath("light")},t={iconPath:this.getIconPath("dark")},r=this.tooltip,i=this.strikeThrough,o=this.faded;return{strikeThrough:i,faded:o,tooltip:r,light:e,dark:t}}get command(){let e=$.get("diff.withHead",!0),t=$.get("sourceControl.changesLeftClick","open diff");return!this.remote&&t==="open"?{command:"svn.openFile",title:"Open file",arguments:[this]}:this.remote||e?{command:"svn.openResourceHead",title:"Open Diff With Head",arguments:[this]}:{command:"svn.openResourceBase",title:"Open Diff With Base",arguments:[this]}}getIconPath(e){if(this.type==="added"&&this.renameResourceUri)return bt.icons[e].Renamed;let t=this.type.charAt(0).toUpperCase()+this.type.slice(1);if(typeof bt.icons[e][t]<"u")return bt.icons[e][t]}get tooltip(){return this.type==="added"&&this.renameResourceUri?"Renamed from "+this.renameResourceUri.fsPath:this.type==="normal"&&this.props&&this.props!=="none"?"Property "+this.props.charAt(0).toUpperCase()+this.props.slice(1):this.type.charAt(0).toUpperCase()+this.type.slice(1)}get strikeThrough(){return this.type==="deleted"}get faded(){return!1}get letter(){switch(this.type){case"added":return this.renameResourceUri?"R":"A";case"conflicted":return"C";case"deleted":return"D";case"external":return"E";case"ignored":return"I";case"modified":return"M";case"replaced":return"R";case"unversioned":return"U";case"missing":return"!";default:return}}get color(){switch(this.type){case"modified":case"replaced":return new _t.ThemeColor("gitDecoration.modifiedResourceForeground");case"deleted":case"missing":return new _t.ThemeColor("gitDecoration.deletedResourceForeground");case"added":case"unversioned":return new _t.ThemeColor("gitDecoration.untrackedResourceForeground");case"external":case"ignored":return new _t.ThemeColor("gitDecoration.ignoredResourceForeground");case"conflicted":return new _t.ThemeColor("gitDecoration.conflictingResourceForeground");default:return}}get priority(){switch(this.type){case"modified":return 2;case"ignored":return 3;case"deleted":case"added":case"replaced":case"missing":return 4;default:return 1}}};bt.icons={light:{Added:ye("status-added","light"),Conflicted:ye("status-conflicted","light"),Deleted:ye("status-deleted","light"),Ignored:ye("status-ignored","light"),Missing:ye("status-missing","light"),Modified:ye("status-modified","light"),Renamed:ye("status-renamed","light"),Replaced:ye("status-replaced","light"),Unversioned:ye("status-unversioned","light")},dark:{Added:ye("status-added","dark"),Conflicted:ye("status-conflicted","dark"),Deleted:ye("status-deleted","dark"),Ignored:ye("status-ignored","dark"),Missing:ye("status-missing","dark"),Modified:ye("status-modified","dark"),Renamed:ye("status-renamed","dark"),Replaced:ye("status-replaced","dark"),Unversioned:ye("status-unversioned","dark")}},H([ge],bt.prototype,"resourceUri",1),H([ge],bt.prototype,"type",1),H([ge],bt.prototype,"command",1);var ee=bt;var gc=X(require("path")),kn=require("vscode");var ps=X(require("path")),mc=require("vscode");function At(n){return JSON.parse(n.query)}function He(n,e,t={},r=!1){let i={action:e,fsPath:n.fsPath,extra:t};return n.with({scheme:"svn",path:r?n.path+vt():n.path,query:JSON.stringify(i)})}function Et(n,e){let t=ps.join(__dirname,"..","icons");return mc.Uri.file(ps.join(t,e,`${n}.svg`))}var $e=class{constructor(e,t,r){this.uri=e;this.type=t;this.repository=r}get props(){}get label(){return gc.relative(this.repository.workspaceRoot,this.uri.fsPath)}get contextValue(){return`incomingChange:${this.type}`}getTreeItem(){let e=new kn.TreeItem(this.label,kn.TreeItemCollapsibleState.None);return e.iconPath={dark:Et(`status-${this.type}`,"dark"),light:Et(`status-${this.type}`,"light")},e.contextValue=this.contextValue,e.command=this.getCommand(),e}getChildren(){return Promise.resolve([])}getCommand(){switch(this.type){case"modified":return{command:"svn.openChangeHead",title:"Open Changes with HEAD",arguments:[new ee(this.uri,this.type,void 0,"none",!0)]};case"deleted":return{command:"svn.openFile",title:"Open File",arguments:[this.uri]};case"added":return{command:"svn.openHEADFile",title:"Open File (HEAD)",arguments:[new ee(this.uri,this.type,void 0,"none",!0)]};default:console.error(`No command returned for type ${this.type}`);return}}};var U=class{constructor(e,t={}){if(t.repository){let r=this.createRepositoryCommand(this.execute);this._disposable=z.commands.registerCommand(e,r);return}if(!t.repository){this._disposable=z.commands.registerCommand(e,(...r)=>this.execute(...r));return}}dispose(){var e;(e=this._disposable)==null||e.dispose()}createRepositoryCommand(e){return async(...r)=>{let i=await z.commands.executeCommand("svn.getSourceControlManager",""),o=i.getRepository(r[0]),s;return o?s=Promise.resolve(o):i.repositories.length===1?s=Promise.resolve(i.repositories[0]):s=i.pickRepository(),s.then(c=>c?Promise.resolve(e.apply(this,[c,...r])):Promise.resolve()).catch(c=>{console.error(c)})}}async getResourceStates(e){if(e.length===0||!(e[0].resourceUri instanceof z.Uri)){let t=await this.getSCMResource();if(!t)return[];e=[t]}return e.filter(t=>t instanceof ee)}async runByRepository(e,t){let r=e instanceof z.Uri?[e]:e,i=e instanceof z.Uri,o=await z.commands.executeCommand("svn.getSourceControlManager",""),s=[];for(let c of r){let u=o.getRepository(c);if(!u){console.warn("Could not find Svn repository for ",c);continue}let d=s.filter(m=>m.repository===u)[0];d?d.resources.push(c):s.push({repository:u,resources:[c]})}let a=s.map(({repository:c,resources:u})=>i?t(c,u[0]):t(c,u));return Promise.all(a)}async getSCMResource(e){if(e=e||z.window.activeTextEditor&&z.window.activeTextEditor.document.uri,!!e){if(e.scheme==="svn"){let{fsPath:t}=At(e);e=z.Uri.file(t)}if(e.scheme==="file"){let r=(await z.commands.executeCommand("svn.getSourceControlManager","")).getRepository(e);return r?r.getResourceFromFile(e):void 0}}}async _openResource(e,t,r,i,o){let s=await this.getLeftResource(e,t),a=this.getRightResource(e,t),c=this.getTitle(e,t);if(e.remote&&s&&([s,a]=[a,s]),!a){console.error("oh no");return}if(await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())return;let u={preserveFocus:i,preview:r,viewColumn:z.ViewColumn.Active},d=z.window.activeTextEditor;return o&&d&&d.document.uri.toString()===a.toString()&&(u.selection=d.selection),s?z.commands.executeCommand("vscode.diff",s,a,c,u):z.commands.executeCommand("vscode.open",a,u)}async getLeftResource(e,t=""){if(e.remote)return e.type!=="deleted"?He(e.resourceUri,"SHOW",{ref:t}):void 0;if(e.type==="added"&&e.renameResourceUri)return He(e.renameResourceUri,"SHOW",{ref:t});if(e.type==="conflicted"&&await le(e.resourceUri.fsPath)){let r=await Jo(e.resourceUri.fsPath,{encoding:"utf8"});if(/^<{7}[^]+^={7}[^]+^>{7}/m.test(r))return}switch(e.type){case"conflicted":case"modified":case"replaced":return He(e.resourceUri,"SHOW",{ref:t})}}getRightResource(e,t=""){if(e.remote)return e.type!=="added"?e.resourceUri:void 0;switch(e.type){case"added":case"conflicted":case"ignored":case"modified":case"unversioned":case"replaced":return e.resourceUri;case"deleted":case"missing":return He(e.resourceUri,"SHOW",{ref:t})}}getTitle(e,t){if(e.type==="added"&&e.renameResourceUri){let i=Ct.basename(e.renameResourceUri.fsPath),o=Ct.relative(Ct.dirname(e.renameResourceUri.fsPath),e.resourceUri.fsPath);return t?`${i} -> ${o} (${t})`:`${i} -> ${o}`}let r=Ct.basename(e.resourceUri.fsPath);return t?`${r} (${t})`:""}async openChange(e,t,r){let i=e instanceof ee,o=e instanceof z.Uri||!e,s;if(e instanceof z.Uri){let c=await this.getSCMResource(e);c!==void 0&&(s=[c])}else if(e instanceof $e)s=[new ee(e.uri,e.type,void 0,e.props,!0)];else{let c;e instanceof ee?c=e:c=await this.getSCMResource(),c&&(s=[...r,c])}if(!s)return;let a=s.length===1?void 0:!1;for(let c of s)await this._openResource(c,t,a,i,o)}async showDiffPath(e,t){try{let r=Ct.join(e.root,vt(),"tmp","svn.patch");if(await le(r))try{await Yt(r)}catch{}let i=z.Uri.file(r).with({scheme:"untitled"}),o=await z.workspace.openTextDocument(i);await(await z.window.showTextDocument(o)).edit(a=>{a.delete(new z.Range(new z.Position(0,0),new z.Position(Number.MAX_SAFE_INTEGER,0))),a.insert(new z.Position(0,0),t)})}catch(r){console.error(r),z.window.showErrorMessage("Unable to patch")}}async _revertChanges(e,t){let r=e.document,i=r.uri;if(i.scheme!=="file")return;let o=He(i,"SHOW",{ref:"BASE"}),s=await z.workspace.openTextDocument(o),a=lc(s,r,t),c=new z.WorkspaceEdit;c.replace(i,new z.Range(new z.Position(0,0),r.lineAt(r.lineCount-1).range.end),a),z.workspace.applyEdit(c),await r.save()}async addToIgnore(e){await this.runByRepository(e,async(t,r)=>{if(t)try{await uc(t,r)&&z.window.showInformationMessage("File(s) is now being ignored")}catch(i){console.log(i),z.window.showErrorMessage("Unable to set property ignore")}})}};var $n=class extends U{constructor(){super("svn.add")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);try{await i.addFiles(s)}catch(a){console.log(a),yc.window.showErrorMessage("Unable to add file")}})}};var Bn=class extends U{constructor(){super("svn.addToIgnoreExplorer")}async execute(e,t){if(!(!t||t.length===0))return this.addToIgnore(t)}};var qn=class extends U{constructor(){super("svn.addToIgnoreSCM")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);return this.addToIgnore(r)}};var Be=require("vscode");var Mt=require("vscode");var Lt=class{constructor(e){this.group=e}get label(){return this.group.id.replace(/^changelist-/,"")}get id(){return this.group.id}get description(){return this.group.label}get resourceGroup(){return this.group}};var jr=class{constructor(e){this._id=e}get label(){return this._id}get description(){return"Ignored on commit"}};var pr=class{get label(){return"$(plus) New changelist"}get description(){return"Create a new change list"}};var hr=class{get label(){return"$(dash) Remove changelist"}get description(){return"Remove changelist of file(s)"}};var jn=class{constructor(e,t,r=!1){this._repository=e;this._state=t;this.picked=r}get label(){return this._repository.repository.removeAbsolutePath(this._state.resourceUri.fsPath)}get description(){return this._state.resourceUri.fsPath}get state(){return this._state}};function Vp(n,e=!1){let t=[];t.push(new pr),n.changelists.forEach((i,o)=>{i.resourceStates.length&&t.push(new Lt(i))});let r=$.get("sourceControl.ignoreOnCommit");for(let i of r)t.some(o=>o.label===i)||t.push(new jr(i));return e&&t.push(new hr),t}function zp(n){let e=[];n.changes.resourceStates.length&&e.push(new Lt(n.changes));let t=$.get("sourceControl.ignoreOnCommit");return n.changelists.forEach((r,i)=>{r.resourceStates.length&&!t.includes(i)&&e.push(new Lt(r))}),e}async function wc(n,e=!1){let t=Vp(n,e),r=await Mt.window.showQuickPick(t,{placeHolder:"Select an existing changelist or create a new"});if(!r)return;let i;if(r instanceof hr)return!1;if(r instanceof pr){let o=await Mt.window.showInputBox({placeHolder:"Changelist name",prompt:"Please enter a changelist name"});if(!o)return;i=o}else i=r.label;return i}async function Hp(n){let e=zp(n);if(e.length===0){Mt.window.showInformationMessage("There are no changes to commit.");return}let t;return e.length===1&&n.changes.resourceStates.length?t=e[0]:t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist to commit"}),t}async function vc(n){let e=await Hp(n);if(e){if(e.id==="changes"&&e.resourceGroup.resourceStates.length>1){let t=$.get("commit.changes.selectedAll",!0),r=e.resourceGroup.resourceStates.map(o=>new jn(n,o,t)),i=await Mt.window.showQuickPick(r,{placeHolder:"Select files to commit",canPickMany:!0});return i!==void 0&&i.length>0?i.map(o=>o.state):void 0}return e.resourceGroup.resourceStates}}function Yp(n){let e=[];return n.changelists.forEach((t,r)=>{t.resourceStates.length&&e.push(new Lt(t))}),e}async function bc(n){let e=Yp(n);if(!e.length){Mt.window.showErrorMessage("No changelists to pick from");return}let t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist"});if(t)return t.label}var Gn=class extends U{constructor(){super("svn.changelist")}async execute(...e){let t;if(e[0]instanceof ee)t=e.map(m=>m.resourceUri);else if(e[0]instanceof Be.Uri)t=e[1];else if(Be.window.activeTextEditor)t=[Be.window.activeTextEditor.document.uri];else{console.error("Unhandled type for changelist command");return}let r=await Be.commands.executeCommand("svn.getSourceControlManager",""),i=t.map(async m=>r.getRepositoryFromUri(m)),o=await Promise.all(i);if(o=o.filter(m=>m),o.length===0){Be.window.showErrorMessage("Files are not under version control and cannot be added to a change list");return}if(Array.from(new Set(o)).length!==1){Be.window.showErrorMessage("Unable to add files from different repositories to change list");return}if(o.length!==t.length){Be.window.showErrorMessage("Some Files are not under version control and cannot be added to a change list");return}let a=o[0];if(!a)return;let c=t.map(m=>m.fsPath),u=!1;a.changelists.forEach((m,g)=>{if(m.resourceStates.some(l=>c.some(y=>st(y)===st(l.resourceUri.path))))return u=!0,!1});let d=await wc(a,u);if(!(!d&&d!==!1))if(d===!1)try{await a.removeChangelist(c)}catch(m){console.log(m),Be.window.showErrorMessage(`Unable to remove file "${c.join(",")}" from changelist`)}else try{await a.addChangelist(c,d),Be.window.showInformationMessage(`Added files "${c.join(",")}" to changelist "${d}"`)}catch(m){console.log(m),Be.window.showErrorMessage(`Unable to add file "${c.join(",")}" to changelist "${d}"`)}}};var _a=X(require("os")),Ai=X(require("path")),ce=require("vscode");var mr=require("vscode");var Kt=class{constructor(e,t){this.dir=e;this.parent=t}get label(){return this.branch?`$(git-branch) ${this.dir.name}`:`$(file-directory) ${this.dir.name}`}get description(){return`r${this.dir.commit.revision} | ${this.dir.commit.author} | ${new Date(this.dir.commit.date).toLocaleString()}`}get path(){return this.parent?`${this.parent}/${this.dir.name}`:this.dir.name}get branch(){return It(this.path)}};H([ge],Kt.prototype,"branch",1);var xr=class{constructor(e){this._parent=e}get label(){return"$(plus) Create new branch"}get description(){return`Create new branch in "${this._parent}"`}};var dr=class{constructor(e){this.path=e}get label(){return`$(arrow-left) back to /${this.path}`}get description(){return"Back to parent"}};function It(n){let e=["layout.trunkRegex","layout.branchesRegex","layout.tagsRegex"];for(let t of e){let r=$.get(t);if(!r)continue;let i=$.get(`${t}Name`,1)+2,o=new RegExp(`(^|/)(${r})$`),s=n.match(o);if(s&&s[2]&&s[i])return{name:s[i],path:s[2]}}}async function gr(n,e=!1,t){let r=n.repository.list(t);mr.window.withProgress({location:mr.ProgressLocation.Window,title:"Checking remote branches"},()=>r);let o=(await r).filter(c=>c.kind==="dir"),s=[];if(t){let c=t.split("/");c.pop();let u=c.join("/");s.push(new dr(u))}e&&t&&It(`${t}/test`)&&s.push(new xr(t)),s.push(...o.map(c=>new Kt(c,t)));let a=await mr.window.showQuickPick(s);if(a){if(a instanceof dr)return gr(n,e,a.path);if(a instanceof Kt)return a.branch?a.branch:gr(n,e,a.path);if(a instanceof xr){let c=await mr.window.showInputBox({prompt:"Please provide a branch name",ignoreFocusOut:!0});if(!c)return;let u=c.replace(/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$|\.$/g,"-"),d=It(`${t}/${u}`);return d&&(d.isNew=!0),d}}}function Ec(n){let e="layout.trunkRegex",t=$.get(e),r=new RegExp(`(^|/)(${t})$`),i=n.match(r),o=$.get(`${e}Name`,1)+2;return!!(i&&i[2]&&i[o])}var Oa=X(require("child_process")),Wf=require("events"),pn=X(require("process")),Vf=X(wr());var Su=X(Cu());function xm(n){if(!n||n.length<2)return null;let e=n.readUInt8(0),t=n.readUInt8(1);if(e===254&&t===255)return"utf16be";if(e===255&&t===254)return"utf16le";if(n.length<3)return null;let r=n.readUInt8(2);return e===239&&t===187&&r===191?"utf8":null}var dm=["ascii","utf-8","utf-16","utf-32"],Iu={ibm866:"cp866",big5:"cp950"};function ci(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function ui(n){let e=xm(n);if(e)return e;let t=(0,Su.analyse)(n);if(!t||t.length===0)return null;let r=$.get("experimental.encoding_priority",[]);if(r.length>0)for(let c of r){let u=t.find(d=>ci(c)===ci(d.name));if(u&&u.confidence>60){let d=ci(u.name);return Iu[d]||d}}let i=t[0];if(i.confidence<80)return null;let o=i.name;if(0<=dm.indexOf(o.toLowerCase()))return null;let s=ci(o);return Iu[s]||s}var Yl=X(vr());var ft={mergeAttrs:!0,explicitRoot:!1,explicitArray:!1,attrNameProcessors:[is],tagNameProcessors:[is],doctype:!1};async function rn(n){return new Promise((e,t)=>{Yl.parseString(n,ft,(r,i)=>{(r||typeof i.entry>"u")&&t(),e(i.entry)})})}function Rt(n){if(!n)return n;let e=n;return e=e.replace(/[A-Z]:\\(?:[^\\/:*?"<>|\r\n]+\\)*[^\\/:*?"<>|\r\n]*/gi,"[PATH]"),e=e.replace(/\/(?:[a-zA-Z0-9._\-~]+\/)*[a-zA-Z0-9._\-~]*/g,"[PATH]"),e=e.replace(/https?:\/\/(?:(?:[a-zA-Z0-9\-._~:/?#\[\]@!$&'()*+,;=])+)/gi,"[DOMAIN]"),e=e.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,"[IP]"),e=e.replace(/\b(?:[0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}\b/g,"[IP]"),e=e.replace(/(?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s,;]+/gi,"$&=[REDACTED]"),e=e.replace(/[?&](?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s&;]+/gi,t=>{let[r]=t.split("=");return r+"=[REDACTED]"}),e=e.replace(/Bearer\s+[A-Za-z0-9._\-~+/=]+/g,"Bearer [REDACTED]"),e=e.replace(/Basic\s+[A-Za-z0-9+/=]+/g,"Basic [REDACTED]"),e=e.replace(/"([A-Za-z0-9+/=_\-]{32,})"/g,'"[REDACTED]"'),e=e.replace(/'([A-Za-z0-9+/=_\-]{32,})'/g,"'[REDACTED]'"),e=e.replace(/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/gi,"[UUID]"),e=e.replace(/AKIA[0-9A-Z]{16}/g,"[AWS_KEY]"),e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,"[EMAIL]"),e}function Ql(n){if(!n)return{};let e={};return n.message&&(e.message=Rt(n.message)),n.name&&(e.name=n.name),n.code&&(e.code=n.code),n.exitCode&&(e.exitCode=n.exitCode),n.svnErrorCode&&(e.svnErrorCode=n.svnErrorCode),n.svnCommand&&(e.svnCommand=Rt(n.svnCommand)),n.stdout&&(e.stdout=Rt(n.stdout)),n.stderr&&(e.stderr=Rt(n.stderr)),n.stderrFormated&&(e.stderrFormated=Rt(n.stderrFormated)),n.stack&&(e.stack=Rt(n.stack)),e}var Tt=class{constructor(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=void 0,this.message=e.message||"SVN error",this.stdout=e.stdout,this.stderr=e.stderr,this.stderrFormated=e.stderrFormated,this.exitCode=e.exitCode,this.svnErrorCode=e.svnErrorCode,this.svnCommand=e.svnCommand}toString(){let e=Ql(this),t=Rt(this.message)+" "+JSON.stringify(e,null,2);return this.error&&(t+=Rt(this.error.stack||"")),t}};var Nt=X(require("path")),Ni=X(df()),Ue=require("vscode");var mf=X(vr());async function Ca(n){return new Promise((e,t)=>{mf.parseString(n,ft,(r,i)=>{r&&t(),i.list&&i.list.entry?(Array.isArray(i.list.entry)||(i.list.entry=[i.list.entry]),e(i.list.entry)):e([])})})}var gf=X(vr());async function Ti(n){return new Promise((e,t)=>{gf.parseString(n,ft,(r,i)=>{r&&t();let o=[];Array.isArray(i.logentry)?o=i.logentry:typeof i.logentry=="object"&&(o=[i.logentry]);for(let s of o)s.paths===void 0?s.paths=[]:Array.isArray(s.paths.path)?s.paths=s.paths.path:s.paths=[s.paths.path];e(o)})})}var yf=X(vr());function Ia(n,e){if(Array.isArray(n)){let i=[];return n.forEach(o=>{let s=Ia(o,e);s&&i.push(...s)}),i}let t={locked:!!n.wcStatus.wcLocked&&n.wcStatus.wcLocked==="true"||!!(n.reposStatus&&n.reposStatus.lock),switched:!!n.wcStatus.switched&&n.wcStatus.switched==="true"},r={changelist:e,path:n.path,status:n.wcStatus.item,props:n.wcStatus.props,wcStatus:t,reposStatus:n.reposStatus};return n.wcStatus.movedTo&&r.status==="deleted"?[]:(n.wcStatus.movedFrom&&r.status==="added"&&(r.rename=n.wcStatus.movedFrom),n.wcStatus.commit&&(r.commit={revision:n.wcStatus.commit.revision,author:n.wcStatus.commit.author,date:n.wcStatus.commit.date}),[r])}function Fm(n){let e=[];return n.target&&n.target.entry&&e.push(...Ia(n.target.entry)),n.changelist&&(Array.isArray(n.changelist)||(n.changelist=[n.changelist]),n.changelist.forEach(t=>{e.push(...Ia(t.entry,t.name))})),e}async function wf(n){return new Promise((e,t)=>{yf.parseString(n,ft,(r,i)=>{r&&t();let o=Fm(i);e(o)})})}var Sa=(n,e,t)=>{let r=n instanceof RegExp?vf(n,t):n,i=e instanceof RegExp?vf(e,t):e,o=r!==null&&i!=null&&Um(r,i,t);return o&&{start:o[0],end:o[1],pre:t.slice(0,o[0]),body:t.slice(o[0]+r.length,o[1]),post:t.slice(o[1]+i.length)}},vf=(n,e)=>{let t=e.match(n);return t?t[0]:null},Um=(n,e,t)=>{let r,i,o,s,a,c=t.indexOf(n),u=t.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],o=t.length;d>=0&&!a;){if(d===c)r.push(d),c=t.indexOf(n,d+1);else if(r.length===1){let m=r.pop();m!==void 0&&(a=[m,u])}else i=r.pop(),i!==void 0&&i<o&&(o=i,s=u),u=t.indexOf(e,d+1);d=c<u&&c>=0?c:u}r.length&&s!==void 0&&(a=[o,s])}return a};var bf="\0SLASH"+Math.random()+"\0",Ef="\0OPEN"+Math.random()+"\0",Ra="\0CLOSE"+Math.random()+"\0",Cf="\0COMMA"+Math.random()+"\0",If="\0PERIOD"+Math.random()+"\0",km=new RegExp(bf,"g"),$m=new RegExp(Ef,"g"),Bm=new RegExp(Ra,"g"),qm=new RegExp(Cf,"g"),jm=new RegExp(If,"g"),Gm=/\\\\/g,Xm=/\\{/g,Wm=/\\}/g,Vm=/\\,/g,zm=/\\./g;function Da(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function Hm(n){return n.replace(Gm,bf).replace(Xm,Ef).replace(Wm,Ra).replace(Vm,Cf).replace(zm,If)}function Ym(n){return n.replace(km,"\\").replace($m,"{").replace(Bm,"}").replace(qm,",").replace(jm,".")}function Sf(n){if(!n)return[""];let e=[],t=Sa("{","}",n);if(!t)return n.split(",");let{pre:r,body:i,post:o}=t,s=r.split(",");s[s.length-1]+="{"+i+"}";let a=Sf(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function Df(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),nn(Hm(n),!0).map(Ym)):[]}function Qm(n){return"{"+n+"}"}function Km(n){return/^-?0\d/.test(n)}function Zm(n,e){return n<=e}function Jm(n,e){return n>=e}function nn(n,e){let t=[],r=Sa("{","}",n);if(!r)return[n];let i=r.pre,o=r.post.length?nn(r.post,!1):[""];if(/\$$/.test(r.pre))for(let s=0;s<o.length;s++){let a=i+"{"+r.body+"}"+o[s];t.push(a)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=s||a,u=r.body.indexOf(",")>=0;if(!c&&!u)return r.post.match(/,(?!,).*\}/)?(n=r.pre+"{"+r.body+Ra+r.post,nn(n)):[n];let d;if(c)d=r.body.split(/\.\./);else if(d=Sf(r.body),d.length===1&&d[0]!==void 0&&(d=nn(d[0],!1).map(Qm),d.length===1))return o.map(g=>r.pre+d[0]+g);let m;if(c&&d[0]!==void 0&&d[1]!==void 0){let g=Da(d[0]),l=Da(d[1]),y=Math.max(d[0].length,d[1].length),b=d.length===3&&d[2]!==void 0?Math.abs(Da(d[2])):1,R=Zm;l<g&&(b*=-1,R=Jm);let D=d.some(Km);m=[];for(let v=g;R(v,l);v+=b){let p;if(a)p=String.fromCharCode(v),p==="\\"&&(p="");else if(p=String(v),D){let h=y-p.length;if(h>0){let E=new Array(h+1).join("0");v<0?p="-"+E+p.slice(1):p=E+p}}m.push(p)}}else{m=[];for(let g=0;g<d.length;g++)m.push.apply(m,nn(d[g],!1))}for(let g=0;g<m.length;g++)for(let l=0;l<o.length;l++){let y=i+m[g]+o[l];(!e||c||y)&&t.push(y)}}return t}var on=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var eg={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},sn=n=>n.replace(/[[\]\\-]/g,"\\$&"),tg=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Rf=n=>n.join(""),Tf=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=t+1,s=!1,a=!1,c=!1,u=!1,d=t,m="";e:for(;o<n.length;){let b=n.charAt(o);if((b==="!"||b==="^")&&o===t+1){u=!0,o++;continue}if(b==="]"&&s&&!c){d=o+1;break}if(s=!0,b==="\\"&&!c){c=!0,o++;continue}if(b==="["&&!c){for(let[R,[N,D,v]]of Object.entries(eg))if(n.startsWith(R,o)){if(m)return["$.",!1,n.length-t,!0];o+=R.length,v?i.push(N):r.push(N),a=a||D;continue e}}if(c=!1,m){b>m?r.push(sn(m)+"-"+sn(b)):b===m&&r.push(sn(b)),m="",o++;continue}if(n.startsWith("-]",o+1)){r.push(sn(b+"-")),o+=2;continue}if(n.startsWith("-",o+1)){m=b,o+=2;continue}r.push(sn(b)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let b=r[0].length===2?r[0].slice(-1):r[0];return[tg(b),!1,d-t,!1]}let g="["+(u?"^":"")+Rf(r)+"]",l="["+(u?"":"^")+Rf(i)+"]";return[r.length&&i.length?"("+g+"|"+l+")":r.length?g:l,a,d-t,!0]};var kt=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!0}={})=>t?e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");var rg=new Set(["!","?","+","*","@"]),Pf=n=>rg.has(n),ng="(?!(?:^|/)\\.\\.?(?:$|/))",Pi="(?!\\.)",ig=new Set(["[","."]),og=new Set(["..","."]),sg=new Set("().*{}+?[]^$\\!"),ag=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ta="[^/]",Nf=Ta+"*?",Of=Ta+"+?",Cr=class n{type;#r;#n;#o=!1;#e=[];#t;#s;#c;#a=!1;#i;#u;#f=!1;constructor(e,t,r={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#r=this.#t?this.#t.#r:this,this.#i=this.#r===this?r:this.#r.#i,this.#c=this.#r===this?[]:this.#r.#c,e==="!"&&!this.#r.#a&&this.#c.push(this),this.#s=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#s+1;!r.type&&i<r.#e.length;i++)for(let o of e.#e){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){var t;let e=this.type===null?this.#e.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#e.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#a&&((t=this.#t)==null?void 0:t.type)==="!")&&e.push({}),e}isStart(){var t;if(this.#r===this)return!0;if(!((t=this.#t)!=null&&t.isStart()))return!1;if(this.#s===0)return!0;let e=this.#t;for(let r=0;r<this.#s;r++){let i=e.#e[r];if(!(i instanceof n&&i.type==="!"))return!1}return!0}isEnd(){var t,r,i;if(this.#r===this||((t=this.#t)==null?void 0:t.type)==="!")return!0;if(!((r=this.#t)!=null&&r.isEnd()))return!1;if(!this.type)return(i=this.#t)==null?void 0:i.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let r of this.#e)t.copyIn(r);return t}static#l(e,t,r,i){let o=!1,s=!1,a=-1,c=!1;if(t.type===null){let l=r,y="";for(;l<e.length;){let b=e.charAt(l++);if(o||b==="\\"){o=!o,y+=b;continue}if(s){l===a+1?(b==="^"||b==="!")&&(c=!0):b==="]"&&!(l===a+2&&c)&&(s=!1),y+=b;continue}else if(b==="["){s=!0,a=l,c=!1,y+=b;continue}if(!i.noext&&Pf(b)&&e.charAt(l)==="("){t.push(y),y="";let R=new n(b,t);l=n.#l(e,R,l,i),t.push(R);continue}y+=b}return t.push(y),l}let u=r+1,d=new n(null,t),m=[],g="";for(;u<e.length;){let l=e.charAt(u++);if(o||l==="\\"){o=!o,g+=l;continue}if(s){u===a+1?(l==="^"||l==="!")&&(c=!0):l==="]"&&!(u===a+2&&c)&&(s=!1),g+=l;continue}else if(l==="["){s=!0,a=u,c=!1,g+=l;continue}if(Pf(l)&&e.charAt(u)==="("){d.push(g),g="";let y=new n(l,d);d.push(y),u=n.#l(e,y,u,i);continue}if(l==="|"){d.push(g),g="",m.push(d),d=new n(null,t);continue}if(l===")")return g===""&&t.#e.length===0&&(t.#f=!0),d.push(g),g="",t.push(...m,d),u;g+=l}return t.type=null,t.#n=void 0,t.#e=[e.substring(r-1)],u}static fromGlob(e,t={}){let r=new n(null,void 0,t);return n.#l(e,r,0,t),r}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[t,r,i,o]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#i.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){var c;let t=e??!!this.#i.dot;if(this.#r===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd()&&!this.#e.some(y=>typeof y!="string"),d=this.#e.map(y=>{let[b,R,N,D]=typeof y=="string"?n.#x(y,this.#n,u):y.toRegExpSource(e);return this.#n=this.#n||N,this.#o=this.#o||D,b}).join(""),m="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&og.has(this.#e[0]))){let b=ig,R=t&&b.has(d.charAt(0))||d.startsWith("\\.")&&b.has(d.charAt(2))||d.startsWith("\\.\\.")&&b.has(d.charAt(4)),N=!t&&!e&&b.has(d.charAt(0));m=R?ng:N?Pi:""}let g="";return this.isEnd()&&this.#r.#a&&((c=this.#t)==null?void 0:c.type)==="!"&&(g="(?:$|\\/)"),[m+d+g,kt(d),this.#n=!!this.#n,this.#o]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#p(t);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#e=[u],this.type=null,this.#n=void 0,[u,kt(this.toString()),!1,!1]}let s=!r||e||t||!Pi?"":this.#p(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#f)a=(this.isStart()&&!t?Pi:"")+Of;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?Pi:"")+Nf+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+u}return[a,kt(o),this.#n=!!this.#n,this.#o]}#p(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[r,i,o,s]=t.toRegExpSource(e);return this.#o=this.#o||s,r}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#x(e,t,r=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(sg.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,m,g]=Tf(e,a);if(m){o+=u,s=s||d,a+=m-1,t=t||g;continue}}if(c==="*"){o+=r&&e==="*"?Of:Nf,t=!0;continue}if(c==="?"){o+=Ta,t=!0;continue}o+=ag(c)}return[o,kt(e),!!t,s]}};var Pa=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!1}={})=>t?e?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Ee=(n,e,t={})=>(on(e),!t.nocomment&&e.charAt(0)==="#"?!1:new $t(e,t).match(n)),cg=/^\*+([^+@!?\*\[\(]*)$/,ug=n=>e=>!e.startsWith(".")&&e.endsWith(n),lg=n=>e=>e.endsWith(n),fg=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),pg=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),hg=/^\*+\.\*+$/,xg=n=>!n.startsWith(".")&&n.includes("."),dg=n=>n!=="."&&n!==".."&&n.includes("."),mg=/^\.\*+$/,gg=n=>n!=="."&&n!==".."&&n.startsWith("."),yg=/^\*+$/,wg=n=>n.length!==0&&!n.startsWith("."),vg=n=>n.length!==0&&n!=="."&&n!=="..",bg=/^\?+([^+@!?\*\[\(]*)?$/,Eg=([n,e=""])=>{let t=Lf([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},Cg=([n,e=""])=>{let t=Mf([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},Ig=([n,e=""])=>{let t=Mf([n]);return e?r=>t(r)&&r.endsWith(e):t},Sg=([n,e=""])=>{let t=Lf([n]);return e?r=>t(r)&&r.endsWith(e):t},Lf=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},Mf=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},Ff=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",_f={win32:{sep:"\\"},posix:{sep:"/"}},Dg=Ff==="win32"?_f.win32.sep:_f.posix.sep;Ee.sep=Dg;var et=Symbol("globstar **");Ee.GLOBSTAR=et;var Rg="[^/]",Tg=Rg+"*?",Pg="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ng="(?:(?!(?:\\/|^)\\.).)*?",Og=(n,e={})=>t=>Ee(t,n,e);Ee.filter=Og;var Je=(n,e={})=>Object.assign({},n,e),_g=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Ee;let e=Ee;return Object.assign((r,i,o={})=>e(r,i,Je(n,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Je(n,o))}static defaults(i){return e.defaults(Je(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Je(n,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Je(n,o))}},unescape:(r,i={})=>e.unescape(r,Je(n,i)),escape:(r,i={})=>e.escape(r,Je(n,i)),filter:(r,i={})=>e.filter(r,Je(n,i)),defaults:r=>e.defaults(Je(n,r)),makeRe:(r,i={})=>e.makeRe(r,Je(n,i)),braceExpand:(r,i={})=>e.braceExpand(r,Je(n,i)),match:(r,i,o={})=>e.match(r,i,Je(n,o)),sep:e.sep,GLOBSTAR:et})};Ee.defaults=_g;var Uf=(n,e={})=>(on(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Df(n));Ee.braceExpand=Uf;var Ag=(n,e={})=>new $t(n,e).makeRe();Ee.makeRe=Ag;var Lg=(n,e,t={})=>{let r=new $t(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};Ee.match=Lg;var Af=/[?*]|[+@!]\(.*?\)|\[|\]/,Mg=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$t=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){on(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Ff,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!Af.test(o[2]))&&!Af.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let s=i;for(;r[s+1]==="**";)s++;s>i&&r.splice(i+1,s-i);let a=r[i+1],c=r[i+2],u=r[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;t=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<r.length-1;s++){let a=r[s];s===1&&a===""&&r[0]===""||(a==="."||a==="")&&(t=!0,r.splice(s,1),s--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let s=r[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){t=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<t.length;)if(e[i]===t[o])s.push(a==="b"?t[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&t[o]===e[i+1])s.push(e[i]),i++;else if(r&&t[o]==="**"&&e[i]===t[o+1])s.push(t[o]),o++;else if(e[i]==="*"&&t[o]&&(this.options.dot||!t[o].startsWith("."))&&t[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(t[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(t[o]),i++,o++}else return!1;return e.length===t.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let i=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),R=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),N=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),D=!N&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),v=R?3:b?0:void 0,p=D?3:N?0:void 0;if(typeof v=="number"&&typeof p=="number"){let[h,E]=[e[v],t[p]];h.toLowerCase()===E.toLowerCase()&&(t[p]=h,p>v?t=t.slice(p):v>p&&(e=e.slice(v)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,c=e.length,u=t.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var d=t[a],m=e[s];if(this.debug(t,d,m),d===!1)return!1;if(d===et){this.debug("GLOBSTAR",[t,d,m]);var g=s,l=a+1;if(l===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<c;){var y=e[g];if(this.debug(`
globstar while`,e,g,t,l,y),this.matchOne(e.slice(g),t.slice(l),r))return this.debug("globstar found match!",g,c,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,g,t,l);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,g,t,l),g===c))}let b;if(typeof d=="string"?(b=m===d,this.debug("string match",d,m,b)):(b=d.test(m),this.debug("pattern match",d,m,b)),!b)return!1}if(s===c&&a===u)return!0;if(s===c)return r;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Uf(this.pattern,this.options)}parse(e){on(e);let t=this.options;if(e==="**")return et;if(e==="")return"";let r,i=null;(r=e.match(yg))?i=t.dot?vg:wg:(r=e.match(cg))?i=(t.nocase?t.dot?pg:fg:t.dot?lg:ug)(r[1]):(r=e.match(bg))?i=(t.nocase?t.dot?Cg:Eg:t.dot?Ig:Sg)(r):(r=e.match(hg))?i=t.dot?dg:xg:(r=e.match(mg))&&(i=gg);let o=Cr.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?Tg:t.dot?Pg:Ng,i=new Set(t.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(m=>{if(m instanceof RegExp)for(let g of m.flags.split(""))i.add(g);return typeof m=="string"?Mg(m):m===et?et:m._src});u.forEach((m,g)=>{let l=u[g+1],y=u[g-1];m!==et||y===et||(y===void 0?l!==void 0&&l!==et?u[g+1]="(?:\\/|"+r+"\\/)?"+l:u[g]=r:l===void 0?u[g-1]=y+"(?:\\/|\\/"+r+")?":l!==et&&(u[g-1]=y+"(?:\\/|\\/"+r+"\\/)"+l,u[g+1]=et))});let d=u.filter(m=>m!==et);if(this.partial&&d.length>=1){let m=[];for(let g=1;g<=d.length;g++)m.push(d.slice(0,g).join("/"));return"(?:"+m.join("|")+")"}return d.join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.partial&&(o="^(?:\\/|"+s+o.slice(1,-1)+a+")$"),this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(r.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ee.defaults(e).Minimatch}};Ee.AST=Cr;Ee.Minimatch=$t;Ee.escape=Pa;Ee.unescape=kt;function rr(n,e,t={}){let r=!1;return e.forEach(i=>{let o=i[0]==="!";r===o&&(r=Ee(n,i,t))}),r}function kf(n){return new $t(n)}var $f=X(vr());async function Bf(n){return new Promise((e,t)=>{$f.parseString(n,ft,(r,i)=>{(r||!i.paths||!i.paths.path)&&t(),Array.isArray(i.paths.path)||(i.paths.path=[i.paths.path]),e(i.paths.path)})})}function qf(n){return!n||typeof n!="string"?!1:/^[a-zA-Z0-9_-]+$/.test(n)}var Fg=["postpone","base","mine-conflict","theirs-conflict","mine-full","theirs-full","edit","launch","working"];function jf(n){return!n||typeof n!="string"?!1:Fg.includes(n)}function an(n){return!n||typeof n!="string"?!1:!/[|;$()[\]{}`\\]/.test(n)}var Ug=["HEAD","PREV","BASE","COMMITTED"];function Ir(n){return!n||typeof n!="string"?!1:Ug.includes(n)?!0:/^\+?(0|[1-9]\d*)$/.test(n)}function cn(n){return!n||typeof n!="string"?!1:!n.includes("..")&&!n.startsWith("/")&&!n.startsWith("\\")}function Gf(n){if(!n||typeof n!="string")return!1;try{let e=new URL(n);if(!["http:","https:","svn:","svn+ssh:"].includes(e.protocol))return!1;let r=e.hostname.toLowerCase();if(r==="localhost"||r==="127.0.0.1"||r==="::1")return!1;let i=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,o=r.match(i);if(o){let[,s,a,c,u]=o.map(Number);if(s>255||a>255||c>255||u>255||s===10||s===172&&a>=16&&a<=31||s===192&&a===168||s===169&&a===254||s===127)return!1}return!0}catch{return!1}}var un=class{constructor(e,t,r,i){this.svn=e;this.root=t;this.workspaceRoot=r;this._infoCache={};return i===1?(async()=>this)():(async()=>(await this.updateInfo(),this))()}async updateInfo(){let e=await this.exec(["info","--xml",Un(this.workspaceRoot?this.workspaceRoot:this.root)]);this._info=await rn(e.stdout)}async exec(e,t={}){return t.username=this.username,t.password=this.password,this.svn.exec(this.workspaceRoot,e,t)}async execBuffer(e,t={}){return t.username=this.username,t.password=this.password,this.svn.execBuffer(this.workspaceRoot,e,t)}removeAbsolutePath(e){return e=tt(e),e=Nt.relative(this.workspaceRoot,e),e===""&&(e="."),Un(e)}validateFilePaths(e){for(let t of e){let r=this.removeAbsolutePath(t);if(!cn(r))throw new Error(`Invalid file path detected: ${r}`)}}validateSinglePath(e){let t=this.removeAbsolutePath(e);if(!cn(t))throw new Error(`Invalid file path detected: ${t}`)}async getStatus(e){var o;e=Object.assign({},{includeIgnored:!1,includeExternals:!0,checkRemoteChanges:!1},e);let t=["stat","--xml"];e.includeIgnored&&t.push("--no-ignore"),e.includeExternals||t.push("--ignore-externals"),e.checkRemoteChanges&&t.push("--show-updates");let r=await this.exec(t),i=await wf(r.stdout);for(let s of i)if(s.status==="external")try{let a=await this.getInfo(s.path);s.repositoryUuid=(o=a.repository)==null?void 0:o.uuid}catch(a){console.error(a)}return i}get info(){return ze(this._info)}resetInfoCache(e=""){delete this._infoCache[e]}async getInfo(e="",t,r=!1,i=!1){if(!r&&this._infoCache[e])return this._infoCache[e];let o=["info","--xml"];if(t){if(!Ir(t))throw new Error("Invalid revision parameter");o.push("-r",t)}e&&(i||(e=tt(e)),o.push(e));let s=await this.exec(o);return this._infoCache[e]=await rn(s.stdout),setTimeout(()=>{this.resetInfoCache(e)},2*60*1e3),this._infoCache[e]}async getChanges(){var b;let e=["log","-r1:HEAD","--limit=1","--stop-on-copy","--xml","--with-all-revprops","--verbose"],t=await this.exec(e),r=await Ti(t.stdout);if(r.length===0||((b=r[0])==null?void 0:b.paths.length)===0)return[];let i=r[0].paths[0];if(i.copyfromRev===void 0||i.copyfromPath===void 0||i._===void 0||i.copyfromRev.trim().length===0||i.copyfromPath.trim().length===0||i._.trim().length===0)return[];let o=i.copyfromPath,s=i.copyfromRev,a=i._,c=this.info.repository.root+o,u=this.info.repository.root+a;e=["mergeinfo","--show-revs=merged",c,u],t=await this.exec(e);let d=t.stdout.trim().split(`
`),m="";d.length&&(m=d[d.length-1]),m.trim().length===0&&(m=s);let g=await this.getInfo(u,void 0,!0,!0);e=["diff",`${c}@${m}`,u,"--ignore-properties","--xml","--summarize"],t=await this.exec(e);let l;try{l=await Bf(t.stdout)}catch{return[]}let y=[];for(let R of l)y.push({oldPath:Ue.Uri.parse(R._),newPath:Ue.Uri.parse(R._.replace(c,u)),oldRevision:m.replace("r",""),newRevision:g.revision,item:R.item,props:R.props,kind:R.kind,repo:Ue.Uri.parse(this.info.repository.root),localPath:Ue.Uri.parse(R._.replace(c,""))});return y}async show(e,t){let r=["cat"],i,o;e instanceof Ue.Uri?(i=e,o=e.toString(!0)):(i=Ue.Uri.file(e),o=e);let s=i.scheme==="file"&&Se(this.workspaceRoot,i.fsPath),a=o;if(s&&(this.validateSinglePath(a),a=this.removeAbsolutePath(a)),t){if(!Ir(t))throw new Error("Invalid revision parameter");r.push("-r",t),s&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))}r.push(a);let c=Ue.workspace.getConfiguration("files",i),u=c.get("encoding"),d=c.get("autoGuessEncoding",!1),m=Ue.workspace.textDocuments.find(y=>st(y.uri.fsPath)===st(o));if(m){let y=Ue.workspace.getConfiguration(`[${m.languageId}]`,i);if(y["files.encoding"]!==void 0&&(u=y["files.encoding"]),y["files.autoGuessEncoding"]!==void 0&&(d=y["files.autoGuessEncoding"]),d){let b=Buffer.from(m.getText(),"utf-8"),R=ui(b);R&&(u=R)}}else{let y=$.get("default.encoding");y&&(u=y)}return $.get("experimental.detect_encoding",!1)&&(u=null),(await this.exec(r,{encoding:u})).stdout}async showBuffer(e,t){let r=["cat"],i,o;e instanceof Ue.Uri?(i=e,o=e.toString(!0)):(i=Ue.Uri.file(e),o=e);let s=i.scheme==="file"&&Se(this.workspaceRoot,i.fsPath),a=o;if(s&&(this.validateSinglePath(a),a=this.removeAbsolutePath(a)),t){if(!Ir(t))throw new Error("Invalid revision parameter");r.push("-r",t),s&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))}return r.push(a),(await this.execBuffer(r)).stdout}async commitFiles(e,t){this.validateFilePaths(t),t=t.map(a=>this.removeAbsolutePath(a));let r=["commit",...t];await le(Nt.join(this.workspaceRoot,e))&&r.push("--force-log");let i;if(/\n|[^\x00-\x7F\x80-\xFF]/.test(e)){if(Ni.setGracefulCleanup(),i=Ni.fileSync({prefix:"svn-commit-message-",mode:384}),(await Ve(i.name)).isSymbolicLink())throw i.removeCallback(),new Error("Security: Temp file is a symlink");await ts(i.name,e,{encoding:"utf-8",mode:384}),r.push("-F",i.name),r.push("--encoding","UTF-8")}else r.push("-m",e);r.push("--depth","empty");let o=await this.exec(r);i&&i.removeCallback();let s=o.stdout.match(/Committed revision (.*)\./i);if(s&&s[0]){let a=(o.stdout.match(/(Sending|Adding|Deleting)\s+/g)??[]).length;return`${`${a} ${a===1?"file":"files"} commited`}: revision ${s[1]}.`}return o.stdout}async addFilesByIgnore(e,t){this.validateFilePaths(e);let r=async i=>(await wt(i)).isDirectory()?(await Promise.all((await Ht(i)).map(o=>{let s=Nt.resolve(i+Nt.sep+o),a=this.removeAbsolutePath(s);return rr(Nt.sep+a,t,{dot:!0,matchBase:!0})?[]:r(s)}))).reduce((o,s)=>o.concat(s),[i]):[i];return e=(await Promise.all(e.map(i=>r(i)))).flat(),e=e.map(i=>this.removeAbsolutePath(i)),this.exec(["add","--depth=empty",...e])}addFiles(e){this.validateFilePaths(e);let t=$.get("sourceControl.ignore");return t.length>0?this.addFilesByIgnore(e,t):(e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["add",...e]))}addChangelist(e,t){if(!qf(t))throw new Error("Invalid changelist name");return this.validateFilePaths(e),e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["changelist",t,...e])}removeChangelist(e){return this.validateFilePaths(e),e=e.map(t=>this.removeAbsolutePath(t)),this.exec(["changelist","--remove",...e])}async getCurrentBranch(){let e=await this.getInfo(),t=It(e.url);return t?$.get("layout.showFullName")?t.path:t.name:""}async getRepositoryUuid(){return(await this.getInfo()).repository.uuid}async getRepoUrl(){let e=await this.getInfo(),t=It(e.url);if(!t)return e.repository.root;let r=new RegExp(t.path+"$");return e.url.replace(r,"").replace(/\/$/,"")}async getBranches(){let e=$.get("layout.trunk"),t=$.get("layout.branches"),r=$.get("layout.tags"),i=await this.getRepoUrl(),o=[],s=[];e&&s.push(new Promise(async u=>{try{await this.exec(["ls",i+"/"+e,"--depth","empty"]),u([e])}catch{u([])}}));let a=[];t&&a.push(t),r&&a.push(r);for(let u of a)s.push(new Promise(async d=>{let m=i+"/"+u;try{let l=(await this.exec(["ls",m])).stdout.trim().replace(/\/|\\/g,"").split(/[\r\n]+/).filter(y=>!!y).map(y=>u+"/"+y);d(l)}catch{d([])}}));return(await Promise.all(s)).forEach(u=>{o.push(...u)}),o}async newBranch(e,t="Created new branch"){let i=await this.getRepoUrl()+"/"+e,s=(await this.getInfo()).url;return await this.exec(["copy",s,i,"-m",t]),await this.switchBranch(e),!0}async switchBranch(e,t=!1){let i=await this.getRepoUrl()+"/"+e;return await this.exec(["switch",i].concat(t?["--ignore-ancestry"]:[])),this.resetInfoCache(),!0}async merge(e,t=!1,r="postpone"){if(!jf(r))throw new Error("Invalid accept action");let o=await this.getRepoUrl()+"/"+e,s=["merge","--accept",r];return s=s.concat(t?["--reintegrate"]:[]),s=s.concat([o]),await this.exec(s),this.resetInfoCache(),!0}async revert(e,t){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["revert","--depth",t,...e])).stdout}async update(e=!0){let t=["update"];e&&t.push("--ignore-externals");let r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async pullIncomingChange(e){this.validateSinglePath(e);let t=["update",e],r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async patch(e){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["diff","--internal-diff",...e])).stdout}async patchBuffer(e){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.execBuffer(["diff","--internal-diff",...e])).stdout}async patchChangelist(e){return(await this.exec(["diff","--internal-diff","--changelist",e])).stdout}async removeFiles(e,t){this.validateFilePaths(e),e=e.map(o=>this.removeAbsolutePath(o));let r=["remove"];return t&&r.push("--keep-local"),r.push(...e),(await this.exec(r)).stdout}async resolve(e,t){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["resolve","--accept",t,...e])).stdout}async plainLog(){let e=$.get("log.length")??"50";return(await this.exec(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogBuffer(){let e=$.get("log.length")??"50";return(await this.execBuffer(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogByRevision(e){return(await this.exec(["log","-r",e.toString()])).stdout}async plainLogByRevisionBuffer(e){return(await this.execBuffer(["log","-r",e.toString()])).stdout}async plainLogByText(e){if(!an(e))throw new Error("Invalid search pattern");return(await this.exec(["log","--search",e])).stdout}async plainLogByTextBuffer(e){if(!an(e))throw new Error("Invalid search pattern");return(await this.execBuffer(["log","--search",e])).stdout}async log(e,t,r,i){let o=["log","-r",`${e}:${t}`,`--limit=${r}`,"--xml","-v"];i!==void 0&&o.push(Un(i instanceof Ue.Uri?i.toString(!0):i));let s=await this.exec(o);return Ti(s.stdout)}async logByUser(e){let t=await this.exec(["log","--xml","-v","--search",e]);return Ti(t.stdout)}async countNewCommit(e="BASE:HEAD"){let r=(await this.exec(["log","-r",e,"-q","--xml"])).stdout.match(/<logentry/g);return r&&r.length>0?r.length-1:0}async cleanup(){return(await this.exec(["cleanup"])).stdout}async removeUnversioned(){let e=await this.exec(["cleanup","--remove-unversioned"]);return this.svn.logOutput(e.stdout),e.stdout}async finishCheckout(){let e=await this.getInfo();return(await this.exec(["switch",e.url])).stdout}async list(e){let t=await this.getRepoUrl();e&&(t+="/"+e);let r=await this.exec(["list",t,"--xml"]);return Ca(r.stdout)}async ls(e){this.validateSinglePath(e);let t=await this.exec(["list",e,"--xml"]);return Ca(t.stdout)}async getCurrentIgnore(e){this.validateSinglePath(e),e=this.removeAbsolutePath(e);let t="";try{let i=["propget","svn:ignore"];e&&i.push(e),t=(await this.exec(i)).stdout.trim()}catch(i){console.error(i)}return t.split(/[\r\n]+/)}async addToIgnore(e,t,r=!1){this.validateSinglePath(t);let i=await this.getCurrentIgnore(t);t=this.removeAbsolutePath(t),i.push(...e);let s=["propset","svn:ignore",[...new Set(i)].filter(c=>!!c).sort().join(`
`)];return t?s.push(t):s.push("."),r&&s.push("--recursive"),(await this.exec(s)).stdout}async rename(e,t){this.validateSinglePath(e),this.validateSinglePath(t),e=this.removeAbsolutePath(e),t=this.removeAbsolutePath(t);let r=["rename",e,t];return(await this.exec(r)).stdout}};H([xc],un.prototype,"getInfo",1);var ln=require("vscode");function Xf(n,e=!0){let t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[`${ln.env.appRoot}/node_modules.asar/${n}`,`${ln.env.appRoot}/node_modules/${n}`,n];for(let i of r)try{return t(i)}catch{}e&&ln.window.showErrorMessage(`Missing dependency: ${n}`)}var Na=Xf("@vscode/iconv-lite-umd",!1);Na||(Na=Xf("iconv-lite"));var fn=Na;var Ge={AuthorizationFailed:"E170001",RepositoryIsLocked:"E155004",NotASvnRepository:"E155007",NotShareCommonAncestry:"E195012",WorkingCopyIsTooOld:"E155036"};function kg(n){for(let e in Ge)if(Ge.hasOwnProperty(e)){let t=Ge[e];if(new RegExp(`svn: ${t}`).test(n))return t}if(/No more credentials or we tried too many times/.test(n))return Ge.AuthorizationFailed}function zf(n){return e=>{/ENOENT/.test(e.message)&&(e=new Tt({error:e,message:"Failed to execute svn (ENOENT)",svnErrorCode:"NotASvnRepository"})),n(e)}}var Oi=class{constructor(e){this.lastCwd="";this.supportsStdinPassword=!1;this._onOutput=new Wf.EventEmitter;this.svnPath=e.svnPath,this.version=e.version,this.supportsStdinPassword=Vf.satisfies(e.version,">= 1.9")}get onOutput(){return this._onOutput}logOutput(e){this._onOutput.emit("log",e)}async exec(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let b=t.map(R=>/ |^$/.test(R)?`'${R}'`:R);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${b.join(" ")}
`)}r.username&&t.push("--username",r.username);let i;r.password&&(this.supportsStdinPassword?(t.push("--password-from-stdin"),i=r.password):t.push("--password",r.password)),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let o=r.encoding;delete r.encoding,t.includes("--xml")&&(o="utf8");let s={env:pn.env};e&&(s.cwd=e),s.env=Object.assign({},pn.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let a=Oa.spawn(this.svnPath,t,s);i&&a.stdin&&(a.stdin.write(i+`
`),a.stdin.end());let c=[],u=(b,R,N)=>{b.once(R,N),c.push(it(()=>b.removeListener(R,N)))},d=(b,R,N)=>{b.on(R,N),c.push(it(()=>b.removeListener(R,N)))},[m,g,l]=await Promise.all([new Promise((b,R)=>{u(a,"error",R),u(a,"exit",b)}),new Promise(b=>{let R=[];d(a.stdout,"data",N=>R.push(N)),u(a.stdout,"close",()=>b(Buffer.concat(R)))}),new Promise(b=>{let R=[];d(a.stderr,"data",N=>R.push(N)),u(a.stderr,"close",()=>b(Buffer.concat(R).toString()))})]);Ie(c),o||(o=ui(g)),o||(o=$.get("default.encoding")),fn.encodingExists(o)||(o&&console.warn(`SVN: The encoding "${o}" is invalid`),o="utf8");let y=fn.decode(g,o);if(r.log!==!1&&l.length>0){let b=this.lastCwd.split(/[\\\/]+/).pop(),R=l.split(`
`).filter(N=>N).map(N=>`[${b}]$ ${N}`).join(`
`);this.logOutput(R)}return m?Promise.reject(new Tt({message:"Failed to execute svn",stdout:y,stderr:l,stderrFormated:l.replace(/^svn: E\d+: +/gm,""),exitCode:m,svnErrorCode:kg(l),svnCommand:t[0]})):{exitCode:m,stdout:y,stderr:l}}async execBuffer(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let l=t.map(y=>/ |^$/.test(y)?`'${y}'`:y);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${l.join(" ")}
`)}r.username&&t.push("--username",r.username);let i;r.password&&(this.supportsStdinPassword?(t.push("--password-from-stdin"),i=r.password):t.push("--password",r.password)),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let o={env:pn.env};e&&(o.cwd=e),o.env=Object.assign({},pn.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let s=Oa.spawn(this.svnPath,t,o);i&&s.stdin&&(s.stdin.write(i+`
`),s.stdin.end());let a=[],c=(l,y,b)=>{l.once(y,b),a.push(it(()=>l.removeListener(y,b)))},u=(l,y,b)=>{l.on(y,b),a.push(it(()=>l.removeListener(y,b)))},[d,m,g]=await Promise.all([new Promise((l,y)=>{c(s,"error",y),c(s,"exit",l)}),new Promise(l=>{let y=[];u(s.stdout,"data",b=>y.push(b)),c(s.stdout,"close",()=>l(Buffer.concat(y)))}),new Promise(l=>{let y=[];u(s.stderr,"data",b=>y.push(b)),c(s.stderr,"close",()=>l(Buffer.concat(y).toString()))})]);if(Ie(a),r.log!==!1&&g.length>0){let l=this.lastCwd.split(/[\\\/]+/).pop(),y=g.split(`
`).filter(b=>b).map(b=>`[${l}]$ ${b}`).join(`
`);this.logOutput(y)}return{exitCode:d,stdout:m,stderr:g}}async getRepositoryRoot(e){try{let t=await this.exec(e,["info","--xml"]),r=await rn(t.stdout);return r&&r.wcInfo&&r.wcInfo.wcrootAbspath?r.wcInfo.wcrootAbspath:e}catch(t){throw t instanceof Tt?t:(console.error(t),new Error("Unable to find repository root path"))}}async open(e,t){return new un(this,e,t,0)}};var _i=class extends U{constructor(){super("svn.checkout")}async execute(e){if(e||(e=await ce.window.showInputBox({prompt:"Repository URL",ignoreFocusOut:!0})),!e)return;if(!Gf(e)){ce.window.showErrorMessage("Invalid repository URL. Only http, https, svn, and svn+ssh protocols are allowed. URLs pointing to localhost, private IP addresses, or using file:// protocol are blocked for security reasons.");return}let t=$.get("defaultCheckoutDirectory")||_a.homedir();t=t.replace(/^~/,_a.homedir());let r=await ce.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:ce.Uri.file(t),openLabel:"Select Repository Location"});if(!r||r.length===0)return;let o=r[0].fsPath,s,a=It(e);if(a){let v=e.replace(/\//g,"/").replace(a.path,"");s=Ai.basename(v)}if(s=await ce.window.showInputBox({prompt:"Folder name",value:s,ignoreFocusOut:!0}),!s)return;let c=Ai.join(o,s),u=ce.ProgressLocation.Window;ce.ProgressLocation.Notification&&(u=ce.ProgressLocation.Notification);let d={location:u,title:`Checkout svn repository '${e}'...`,cancellable:!0},m=0,g={};for(;;){m++;try{await ce.window.withProgress(d,async()=>{let v=await ce.commands.executeCommand("svn.getSourceControlManager",""),p=["checkout",e,c];await v.svn.exec(o,p,g)});break}catch(v){if(v.svnErrorCode===Ge.AuthorizationFailed&&m<=3){let h=await ce.commands.executeCommand("svn.promptAuth",g.username);if(h){g.username=h.username,g.password=h.password;continue}}throw v}}let l=[],y="Would you like to open the checked out repository?",b="Open Repository";l.push(b);let R="Add to Workspace";ce.workspace.workspaceFolders&&ce.workspace.updateWorkspaceFolders&&(y="Would you like to open the checked out repository, or add it to the current workspace?",l.push(R));let N=await ce.window.showInformationMessage(y,...l);N===b?ce.commands.executeCommand("vscode.openFolder",ce.Uri.file(c)):N===R&&ce.workspace.updateWorkspaceFolders(ce.workspace.workspaceFolders.length,0,{uri:ce.Uri.file(c)})}};var Li=class extends U{constructor(){super("svn.cleanup",{repository:!0})}async execute(e){await e.cleanup()}};var Hf=require("vscode");var Mi=class extends U{constructor(){super("svn.close",{repository:!0})}async execute(e){(await Hf.commands.executeCommand("svn.getSourceControlManager","")).close(e)}};var La=X(require("path")),hn=require("vscode");var Yf=X(require("path")),Xe=require("vscode");var Ce,Aa;Xe.commands.registerCommand("svn.forceCommitMessageTest",n=>{if(Aa)return Aa(n)});function Qf(){Ce&&Ce.dispose()}async function $g(n,e){return new Promise(r=>{Ce&&Ce.dispose(),Aa=u=>{r(u),Ce.dispose()},Ce=Xe.window.createWebviewPanel("svnCommitMessage","Commit Message",{preserveFocus:!1,viewColumn:Xe.ViewColumn.Active},{enableScripts:!0,retainContextWhenHidden:!0});let i=Xe.Uri.file(Yf.join(__dirname,"..","css","commit-message.css")),o=Ce.webview.asWebviewUri(i),s="";if(e&&e.length){let u=e.sort().map(d=>`<li>${d}</li>`);u.length&&(s=`
<div class="file-list">
  <h3 class="title">Files to commit</h3>
  <ul>
    ${u.join(`
`)}
  </ul>
</div>`)}let a=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  Use a content security policy to only allow loading images from https or from our extension directory,
  and only allow scripts that have a specific nonce.
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${Ce.webview.cspSource} https:; script-src ${Ce.webview.cspSource} 'unsafe-inline'; style-src ${Ce.webview.cspSource};">

  <title>Commit Message</title>
  <link rel="stylesheet" href="${o}">
</head>
<body>
  <section class="container">
    ${s}
    <form>
      <fieldset>
        <div class="float-right">
          <a href="#" id="pickCommitMessage">Pick a previous commit message</a>
        </div>
        <label for="message">Commit message</label>
        <textarea id="message" rows="3" placeholder="Message (press Ctrl+Enter to commit)"></textarea>
        <button id="commit" class="button-primary">Commit</button>
        <div class="float-right">
          <button id="cancel" class="button button-outline">Cancel</button>
        </div>
      </fieldset>
    </form>
  </section>
  <script>
    const vscode = acquireVsCodeApi();

    const txtMessage = document.getElementById("message");
    const btnCommit = document.getElementById("commit");
    const btnCancel = document.getElementById("cancel");
    const linkPickCommitMessage = document.getElementById("pickCommitMessage");

    // load current message
    txtMessage.value = ${JSON.stringify(n)};

    btnCommit.addEventListener("click", function() {
      vscode.postMessage({
        command: "commit",
        message: txtMessage.value
      });
    });

    btnCancel.addEventListener("click", function() {
      vscode.postMessage({
        command: "cancel"
      });
    });

    // Allow CTRL + Enter
    txtMessage.addEventListener("keydown", function(e) {
      if (event.ctrlKey && event.keyCode === 13) {
        btnCommit.click();
      }
    });

    // Auto resize the height of message
    txtMessage.addEventListener("input", function(e) {
      txtMessage.style.height = "auto";
      txtMessage.style.height = (txtMessage.scrollHeight) + "px";
    });

    window.addEventListener("load", function() {
      setTimeout(() => {
        txtMessage.focus();
      }, 1000);
    });

    linkPickCommitMessage.addEventListener("click", function() {
      vscode.postMessage({
        command: "pickCommitMessage"
      });
    });

    // Message from VSCode
    window.addEventListener("message", function(event) {
      const message = event.data;
      switch (message.command) {
        case "setMessage":
          txtMessage.value = message.message;
          txtMessage.dispatchEvent(new Event("input"));
          break;
      }
    });
  </script>
</body>
</html>`;Ce.webview.html=a,Ce.onDidDispose(()=>{r(void 0)});let c=async()=>{let u;e&&e[0]&&(u=await(await Xe.commands.executeCommand("svn.getSourceControlManager","")).getRepositoryFromUri(Xe.Uri.file(e[0])));let d=await Xe.commands.executeCommand("svn.pickCommitMessage",u);d!==void 0&&Ce.webview.postMessage({command:"setMessage",message:d})};Ce.webview.onDidReceiveMessage(u=>{switch(u.command){case"commit":r(u.message),Ce.dispose();break;case"pickCommitMessage":c();break;default:r(void 0),Ce.dispose()}}),Ce.reveal(Xe.ViewColumn.Active,!1)})}async function Fi(n,e=!0,t){e&&(n=await $g(n,t));let r=$.get("commit.checkEmptyMessage",!0);return n===""&&r?await Xe.window.showWarningMessage("Do you really want to commit an empty message?",{modal:!0},"Yes")==="Yes"?"":void 0:n}var Ui=class extends U{constructor(){super("svn.commit")}async execute(...e){if(e.length===0||!(e[0].resourceUri instanceof hn.Uri)){let i=await this.getSCMResource();if(!i)return;e=[i]}let t=e.filter(i=>i instanceof ee),r=t.map(i=>i.resourceUri);t.forEach(i=>{i.type==="added"&&i.renameResourceUri&&r.push(i.renameResourceUri)}),await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);for(let a of o){let c=La.dirname(a.fsPath),u=i.getResourceFromFile(c);for(;u;)u.type==="added"&&s.push(c),c=La.dirname(c),u=i.getResourceFromFile(c)}try{let a=await Fi(i.inputBox.value,!0,s);if(a===void 0)return;i.inputBox.value=a;let c=await i.commitFiles(a,s);hn.window.showInformationMessage(c),i.inputBox.value=""}catch(a){console.error(a);let c=a;hn.window.showErrorMessage(c.stderrFormated||String(a))}})}};var Ma=X(require("path")),Fa=require("vscode");var ki=class extends U{constructor(){super("svn.commitWithMessage",{repository:!0})}async execute(e){let t=await vc(e);if(!t||t.length===0)return;let r=t.map(o=>o.resourceUri.fsPath),i=await Fi(e.inputBox.value,!1,r);if(i!==void 0){t.forEach(o=>{if(o instanceof ee){o.type==="added"&&o.renameResourceUri&&r.push(o.renameResourceUri.fsPath);let s=Ma.dirname(o.resourceUri.fsPath),a=e.getResourceFromFile(s);for(;a;)a.type==="added"&&r.push(s),s=Ma.dirname(s),a=e.getResourceFromFile(s)}});try{let o=await e.commitFiles(i,r);Fa.window.showInformationMessage(o),e.inputBox.value=""}catch(o){console.error(o);let s=o;Fa.window.showErrorMessage(s.stderrFormated||String(o))}}}};var Kf=require("vscode");var $i=class extends U{constructor(){super("svn.deleteUnversioned")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(o=>o.resourceUri);if(await Kf.window.showWarningMessage("Would you like to delete selected files?",{modal:!0},"Yes","No")==="Yes")for(let o of r){let s=o.fsPath;try{if(!await le(s))continue;(await Ve(s)).isDirectory()?ss(s):await Yt(s)}catch{}}}};var Zf=require("vscode");var Bi=class extends U{constructor(){super("svn.fileOpen")}async execute(e){await Zf.commands.executeCommand("vscode.open",e)}};var qi=class extends U{constructor(){super("svn.finishCheckout",{repository:!0})}async execute(e){await e.finishCheckout()}};var ji=class extends U{constructor(t){super("svn.getSourceControlManager");this.sourceControlManager=t}async execute(){return this.sourceControlManager}};var Jf=require("path"),Sr=require("vscode");var Gi=class extends U{constructor(){super("svn.log",{repository:!0})}async execute(e){try{let t=He(Sr.Uri.file(e.workspaceRoot),"LOG"),r=t.with({path:Jf.posix.join(t.path,"svn.log")});await Sr.commands.executeCommand("vscode.open",r)}catch(t){console.error(t),Sr.window.showErrorMessage("Unable to log")}}};var Xi=class extends U{constructor(){super("svn.openChangeBase",{})}async execute(e,...t){return this.openChange(e,"BASE",t)}};var Wi=class extends U{constructor(){super("svn.openChangeHead")}async execute(e,...t){return this.openChange(e,"HEAD",t)}};var Vi=class extends U{constructor(){super("svn.openChangePrev",{})}async execute(e,...t){return this.openChange(e,"PREV",t)}};var ht=require("vscode");var zi=class extends U{constructor(){super("svn.openFile")}async execute(e,...t){let r=e instanceof ee,i;if(e instanceof ht.Uri)e.scheme==="svn"?i=[ht.Uri.file(At(e).fsPath)]:e.scheme==="file"&&(i=[e]);else if(e instanceof $e)i=[new ee(e.uri,e.type,void 0,e.props,!0).resourceUri];else{let a=e;a instanceof ee,a&&(i=[...t.map(c=>c.resourceUri),a.resourceUri])}if(!i)return;let o=i.length===1,s=ht.window.activeTextEditor;for(let a of i){if(!a||await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())continue;let c={preserveFocus:r,preview:o,viewColumn:ht.ViewColumn.Active};s&&s.document.uri.toString()===a.toString()&&(c.selection=s.selection);let u=await ht.workspace.openTextDocument(a);await ht.window.showTextDocument(u,c)}}};var Hi=require("path"),Dr=require("vscode");var Yi=class extends U{constructor(){super("svn.openHEADFile")}async execute(e){let t;if(e instanceof ee?t=e:e instanceof Dr.Uri?t=await this.getSCMResource(e):e instanceof $e?t=new ee(e.uri,e.type,void 0,e.props,!0):t=await this.getSCMResource(),!t)return;let r=await this.getLeftResource(t,"HEAD"),i=Hi.posix.basename(t.resourceUri.path);if(!r){Dr.window.showWarningMessage(`"HEAD version of '${i}' is not available."`);return}let o=Hi.posix.dirname(t.resourceUri.path),s=r.with({path:Hi.posix.join(o,`(HEAD) ${i}`)});return Dr.commands.executeCommand("vscode.open",s,{preview:!0})}};var Qi=class extends U{constructor(){super("svn.openResourceBase")}async execute(e){await this._openResource(e,"BASE",void 0,!0,!1)}};var Ki=class extends U{constructor(){super("svn.openResourceHead")}async execute(e){await this._openResource(e,"HEAD",void 0,!0,!1)}};var Zi=class extends U{constructor(){super("svn.patch")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(c=>c.fsPath),a=await i.patch(s);await this.showDiffPath(i,a)})}};var Ji=class extends U{constructor(){super("svn.patchAll",{repository:!0})}async execute(e){let t=await e.patch([]);await this.showDiffPath(e,t)}};var eo=class extends U{constructor(){super("svn.patchChangeList",{repository:!0})}async execute(e){let t=await bc(e);if(!t)return;let r=await e.patchChangelist(t);await this.showDiffPath(e,r)}};var ep=require("vscode");var tp=X(wr()),to=class extends U{constructor(t){super("svn.pickCommitMessage",{repository:!0});this.svnVersion=t}async execute(t){let r=tp.satisfies(this.svnVersion,">= 1.8"),i=[],o=$.get("previousCommitsUser",null);if(o&&r?i=await t.logByUser(o):i=await t.log("HEAD","0",20),!i.length)return;let s=i.map(u=>({label:u.msg,description:`r${u.revision} | ${u.author} | ${new Date(u.date).toLocaleString()}`})),a=await ep.window.showQuickPick(s);if(a===void 0)return;let c=a.label;return t.inputBox.value=c,c}};var Ua=require("vscode");var ro=class extends U{constructor(){super("svn.promptAuth")}async execute(e,t){let r=await Ua.window.showInputBox({placeHolder:"Svn repository username",prompt:"Please enter your username",ignoreFocusOut:!0,value:e});if(r===void 0)return;let i=await Ua.window.showInputBox({placeHolder:"Svn repository password",prompt:"Please enter your password",value:t,ignoreFocusOut:!0,password:!0});return i===void 0?void 0:{username:r,password:i}}};var rp=require("vscode");var no=class extends U{constructor(){super("svn.promptRemove",{repository:!0})}async execute(e,...t){let r=t.map(a=>a.fsPath),i=r.map(a=>e.repository.removeAbsolutePath(a)).sort(),o="Add to ignored list",s=await rp.window.showInformationMessage(`The file(s) "${i.join(", ")}" are removed from disk.
Would you like remove from SVN?`,{modal:!1},"Yes",o,"No");if(s==="Yes")await e.removeFiles(r,!1);else if(s===o){let a=$.get("delete.ignoredRulesForDeletedFiles",[]);a.push(...i),a=[...new Set(a)],$.update("delete.ignoredRulesForDeletedFiles",a)}}};var io=require("vscode");var oo=class extends U{constructor(){super("svn.treeview.pullIncomingChange")}async execute(...e){let t=$.get("showUpdateMessage",!0);if(e[0]instanceof $e){try{let i=e[0],o=await i.repository.pullIncomingChange(i.uri.fsPath);t&&io.window.showInformationMessage(o)}catch(i){console.error(i),io.window.showErrorMessage("Unable to update")}return}let r=e.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;o.map(a=>a.fsPath).forEach(async a=>{let c=await i.pullIncomingChange(a);t&&io.window.showInformationMessage(c)})})}};var so=class extends U{constructor(){super("svn.refresh",{repository:!0})}async execute(e){let t=$.get("refresh.remoteChanges",!1);await e.status(),t&&await e.updateRemoteChangedFiles()}};var ao=class extends U{constructor(){super("svn.refreshRemoteChanges",{repository:!0})}async execute(e){await e.updateRemoteChangedFiles()}};var ka=require("vscode");var co=class extends U{constructor(){super("svn.remove")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r,i=await ka.window.showWarningMessage("Would you like to keep a local copy of the files?",{modal:!0},"Yes","No");if(!i)return;i==="Yes"?r=!0:r=!1;let o=t.map(s=>s.resourceUri);await this.runByRepository(o,async(s,a)=>{if(!s)return;let c=a.map(u=>u.fsPath);try{await s.removeFiles(c,r)}catch(u){console.log(u),ka.window.showErrorMessage("Unable to remove files")}})}};var np=require("vscode"),uo=class extends U{constructor(){super("svn.removeUnversioned",{repository:!0})}async execute(e){await np.window.showWarningMessage("Are you sure? This will remove all unversioned files except for ignored.",{modal:!0},"Yes","No")==="Yes"&&await e.removeUnversioned()}};var Bt=X(require("path")),$a=require("vscode");var lo=class extends U{constructor(){super("svn.renameExplorer",{repository:!0})}async execute(e,t,r){if(!t)return;let i=t.fsPath;return this.rename(e,i)}async rename(e,t,r){if(t=tt(t),!r){let o=tt(e.workspaceRoot),s=Bt.relative(o,t);r=await $a.window.showInputBox({value:Bt.basename(t),prompt:`New name name for ${s}`})}if(!r)return;if(!cn(r)){$a.window.showErrorMessage("Invalid file name: path traversal attempts are not allowed");return}let i=Bt.dirname(t);r=Bt.join(i,r),await e.rename(t,r)}};var ip=require("vscode");var qg=[{label:"base",description:"Choose the file that was the (unmodified) BASE revision before you tried to integrate changes"},{label:"working",description:"Assuming that you've manually handled the conflict resolution, choose the version of the file as it currently stands in your working copy."},{label:"mine-full",description:"Preserve all local modifications and discarding all changes fetched"},{label:"theirs-full",description:"Discard all local modifications and integrating all changes fetched"},{label:"mine-conflict",description:"Resolve conflicted files by preferring local modifications over the changes fetched"},{label:"theirs-conflict",description:"Resolve conflicted files by preferring the changes fetched from the server over local modifications"}],Ba=class{constructor(e){this.option=e}get label(){return this.option.label}get description(){return this.option.description}};function fo(){return qg.map(n=>new Ba(n))}var po=class extends U{constructor(){super("svn.resolve")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=fo(),i=await ip.window.showQuickPick(r,{placeHolder:"Select conflict option"});if(!i)return;let o=t.map(s=>s.resourceUri);await this.runByRepository(o,async(s,a)=>{if(!s)return;let c=a.map(u=>u.fsPath);await s.resolve(c,i.label)})}};var xn=require("vscode");var ho=class extends U{constructor(){super("svn.resolveAll",{repository:!0})}async execute(e){let t=e.conflicts.resourceStates;t.length||xn.window.showInformationMessage("No Conflicts");for(let r of t){let i=`Select conflict option for ${r.resourceUri.path}`,o=fo(),s=await xn.window.showQuickPick(o,{placeHolder:i});if(!s)return;try{let a=await e.resolve([r.resourceUri.path],s.label);xn.window.showInformationMessage(a)}catch(a){let c=a;xn.window.showErrorMessage(c.stderr||String(a))}}}};var op=X(require("path")),sp=require("vscode");var xo=class extends U{constructor(){super("svn.resolved")}async execute(e){if(!e)return;if(!$.get("conflict.autoResolve")){let i=op.basename(e.fsPath);if(await sp.window.showWarningMessage(`Mark the conflict as resolved for "${i}"?`,{modal:!0},"Yes","No")!=="Yes")return}let r=[e];await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);await i.resolve(s,"working")})}};var ap=require("vscode");var qa=require("vscode");async function Rr(){let n="Yes I'm sure";return await qa.window.showWarningMessage("Are you sure? This will wipe all local changes.",{modal:!0},n)===n}async function jg(){let n=[];for(let r in Br)Br.hasOwnProperty(r)&&n.push({label:r,description:Br[r]});let t=await qa.window.showQuickPick(n,{placeHolder:"Select revert depth"});if(t)return t.label}async function Tr(n,e="empty"){let t=n.length===0;for(let r of n)if(r.scheme==="file")try{if((await Ve(r.fsPath)).isDirectory()){t=!0;break}}catch{}return t?jg():e}var mo=class extends U{constructor(){super("svn.revert")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0||!await Rr())return;let r=t.map(o=>o.resourceUri),i=await Tr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath).reverse();try{await o.revert(a,i)}catch(c){console.log(c),ap.window.showErrorMessage("Unable to revert")}})}};var cp=require("vscode");var go=class extends U{constructor(){super("svn.revertAll")}async execute(e){let t=e.resourceStates;if(t.length===0||!await Rr())return;let r=t.map(o=>o.resourceUri),i=await Tr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath).reverse();try{await o.revert(a,i)}catch(c){console.log(c),cp.window.showErrorMessage("Unable to revert")}})}};var up=require("vscode");var yo=class extends U{constructor(){super("svn.revertChange")}async execute(e,t,r){let i=up.window.visibleTextEditors.filter(o=>o.document.uri.toString()===e.toString())[0];i&&await this._revertChanges(i,[...t.slice(0,r),...t.slice(r+1)])}};var lp=require("vscode");var wo=class extends U{constructor(){super("svn.revertExplorer")}async execute(e,t){if(!t)return;let r=t;if(r.length===0||!await Rr())return;let i=await Tr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath);try{await o.revert(a,i)}catch(c){console.log(c),lp.window.showErrorMessage("Unable to revert")}})}};var dn=require("vscode");var vo=class extends U{constructor(){super("svn.switchBranch",{repository:!0})}async execute(e){let t=await gr(e,!0);if(t)try{if(t.isNew){let r=await dn.window.showInputBox({value:`Created new branch ${t.name}`,prompt:`Commit message for create branch ${t.name}`});if(r===void 0)return;await e.newBranch(t.path,r)}else try{await e.switchBranch(t.path)}catch(r){let i=r;if(i.stderrFormated&&i.stderrFormated.includes("ignore-ancestry"))await dn.window.showErrorMessage("Seems like these branches don't have a common ancestor.  Do you want to retry with '--ignore-ancestry' option?","Yes","No")==="Yes"&&await e.switchBranch(t.path,!0);else throw r}}catch(r){console.log(r),t.isNew?dn.window.showErrorMessage("Unable to create new branch"):dn.window.showErrorMessage("Unable to switch branch")}}};var ja=require("vscode");var bo=class extends U{constructor(){super("svn.update",{repository:!0})}async execute(e){try{let t=$.get("update.ignoreExternals",!1),r=$.get("showUpdateMessage",!0),i=await e.updateRevision(t);r&&ja.window.showInformationMessage(i)}catch(t){console.error(t),ja.window.showErrorMessage("Unable to update")}}};var Pr=require("vscode");var Eo=class extends U{constructor(){super("svn.upgrade")}async execute(e){if(!e||$.get("ignoreWorkingCopyIsTooOld",!1))return;e=tt(e);let t="Yes",r="No",i="Don't Show Again",o=await Pr.window.showWarningMessage("You want upgrade the working copy (svn upgrade)?",t,r,i),s=await Pr.commands.executeCommand("svn.getSourceControlManager","");if(o===t)await s.upgradeWorkingCopy(e)?(Pr.window.showInformationMessage(`Working copy "${e}" upgraded`),s.tryOpenRepository(e)):Pr.window.showErrorMessage(`Error on upgrading working copy "${e}". See log for more detail`);else if(o===i)return $.update("ignoreWorkingCopyIsTooOld",!0)}};var fp=require("path");var qt=require("vscode");var Co=class extends U{constructor(){super("svn.searchLogByRevision",{repository:!0})}async execute(e){let t=await qt.window.showInputBox({prompt:"Revision?"});if(!t)return;let r=parseInt(t,10);if(!r||!Ir(t)){qt.window.showErrorMessage("Invalid revision");return}try{let i=He(qt.Uri.file(e.workspaceRoot),"LOG_REVISION",{revision:r}),o=i.with({path:fp.posix.join(i.path,"svn.log")});await qt.commands.executeCommand("vscode.open",o)}catch(i){console.error(i),qt.window.showErrorMessage("Unable to log")}}};var rt=require("vscode");var K=require("vscode"),xt=X(require("path")),pp=X(require("crypto"));var Io=class{constructor(e){this.type=K.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},nr=class{constructor(e){this.type=K.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},Ga=class{constructor(){this._emitter=new K.EventEmitter;this._bufferedEvents=[];this._root=new nr("");this._disposables=[];this.onDidChangeFile=this._emitter.event;this._disposables.push(K.workspace.registerFileSystemProvider("tempsvnfs",this,{isCaseSensitive:!0}),K.workspace.onDidCloseTextDocument(e=>{e.uri.scheme==="tempsvnfs"&&this.delete(e.uri)}))}watch(e){return new K.Disposable(()=>{})}stat(e){return this._lookup(e,!1)}readDirectory(e){let t=this._lookupAsDirectory(e,!1),r=[];for(let[i,o]of t.entries)r.push([i,o.type]);return r}createDirectory(e){let t=xt.posix.basename(e.path),r=e.with({path:xt.posix.dirname(e.path)}),i=this._lookupAsDirectory(r,!1),o=new nr(t);i.entries.set(o.name,o),i.mtime=Date.now(),i.size+=1,this._fireSoon({type:K.FileChangeType.Changed,uri:r},{type:K.FileChangeType.Created,uri:e})}readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw K.FileSystemError.FileNotFound()}writeFile(e,t,r){let i=xt.posix.basename(e.path),o=this._lookupParentDirectory(e),s=o.entries.get(i);if(s instanceof nr)throw K.FileSystemError.FileIsADirectory(e);if(!s&&!r.create)throw K.FileSystemError.FileNotFound(e);if(s&&r.create&&!r.overwrite)throw K.FileSystemError.FileExists(e);s||(s=new Io(i),o.entries.set(i,s),this._fireSoon({type:K.FileChangeType.Created,uri:e})),s.mtime=Date.now(),s.size=t.byteLength,s.data=t,this._fireSoon({type:K.FileChangeType.Changed,uri:e})}delete(e){let t=e.with({path:xt.posix.dirname(e.path)}),r=xt.posix.basename(e.path),i=this._lookupAsDirectory(t,!1);if(!i.entries.has(r))throw K.FileSystemError.FileNotFound(e);i.entries.delete(r),i.mtime=Date.now(),i.size-=1,this._fireSoon({type:K.FileChangeType.Changed,uri:t},{type:K.FileChangeType.Deleted,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw K.FileSystemError.FileExists(t);let i=this._lookup(e,!1),o=this._lookupParentDirectory(e),s=this._lookupParentDirectory(t),a=xt.posix.basename(t.path);o.entries.delete(i.name),i.name=a,s.entries.set(a,i),this._fireSoon({type:K.FileChangeType.Deleted,uri:e},{type:K.FileChangeType.Created,uri:t})}async createTempSvnRevisionFile(e,t,r){let i=`r${t}_${xt.basename(e.fsPath)}`,s=pp.createHash("md5").update(e.path).digest("hex"),a=$.get("default.encoding"),c;a?c=Buffer.from(fn.encode(r,a)):c=Buffer.from(r),this._root.entries.has(s)||this.createDirectory(K.Uri.parse(`tempsvnfs:/${s}`));let u=K.Uri.parse(`tempsvnfs:/${s}/${i}`,!0);return this.writeFile(u,c,{create:!0,overwrite:!0}),u}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[];for(let[e]of this.readDirectory(K.Uri.parse("tempsvnfs:/")))this.delete(K.Uri.parse(`tempsvnfs:/${e}`))}_lookup(e,t){let r=e.path.split("/"),i=this._root;for(let o of r){if(!o)continue;let s;if(i instanceof nr&&(s=i.entries.get(o)),!s){if(t)return;throw K.FileSystemError.FileNotFound(e)}i=s}return i}_lookupAsDirectory(e,t){let r=this._lookup(e,t);if(r instanceof nr)return r;throw K.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let r=this._lookup(e,t);if(r instanceof Io)return r;throw K.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let t=e.with({path:xt.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandler&&clearTimeout(this._fireSoonHandler),this._fireSoonHandler=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},1)}},jt=new Ga;var So=class extends U{constructor(){super("svn.searchLogByText",{repository:!0})}async execute(e){let t=await rt.window.showInputBox({prompt:"Search query"});if(!t)return;if(!an(t)){rt.window.showErrorMessage("Invalid search pattern: contains forbidden characters");return}let r=rt.Uri.parse("tempsvnfs:/svn.log");jt.writeFile(r,Buffer.from(""),{create:!0,overwrite:!0}),await rt.commands.executeCommand("vscode.open",r);try{let i=await rt.window.withProgress({cancellable:!1,location:rt.ProgressLocation.Notification,title:"Searching Log"},async()=>e.plainLogByText(t));jt.writeFile(r,Buffer.from(i),{create:!0,overwrite:!0})}catch(i){rt.window.showErrorMessage(`Search failed: ${i instanceof Error?i.message:String(i)}`),console.error(i)}}};var Nr=require("vscode");var Do=class extends U{constructor(){super("svn.merge",{repository:!0})}async execute(e){let t=await gr(e);t&&await this.merge(e,t)}async merge(e,t){let r=!1;Ec(e.currentBranch)&&(r=!0);try{await e.merge(t.path,r)}catch(i){let o=i;o.stderrFormated?o.stderrFormated.includes("try updating first")?await Nr.window.showErrorMessage("Seems like you need to update first prior to merging. Would you like to update now and try merging again?","Yes","No")==="Yes"&&(await Nr.commands.executeCommand("svn.update"),await this.merge(e,t)):Nr.window.showErrorMessage("Unable to merge branch: "+o.stderrFormated):(console.log(i),Nr.window.showErrorMessage("Unable to merge branch"))}}};function hp(n,e){e.push(new ji(n)),e.push(new Bi),e.push(new zi),e.push(new ro),e.push(new ki),e.push(new $n),e.push(new Gn),e.push(new so),e.push(new Ui),e.push(new Qi),e.push(new Ki),e.push(new Xi),e.push(new vo),e.push(new Do),e.push(new mo),e.push(new bo),e.push(new oo),e.push(new Ji),e.push(new Zi),e.push(new eo),e.push(new co),e.push(new ho),e.push(new po),e.push(new xo),e.push(new Gi),e.push(new yo),e.push(new Mi),e.push(new Li),e.push(new uo),e.push(new qi),e.push(new qn),e.push(new Bn),e.push(new lo),e.push(new Eo),e.push(new Vi),e.push(new no),e.push(new _i),e.push(new ao),e.push(new $i),e.push(new Wi),e.push(new Yi),e.push(new go),e.push(new to(n.svn.version)),e.push(new wo),e.push(new Co),e.push(new So)}var Ro=require("vscode");var mn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidChangeStatusRepository(this.checkHasChangesOnActiveEditor,this,this.disposables),Ro.window.onDidChangeActiveTextEditor(()=>this.checkHasChangesOnActiveEditor(),this,this.disposables)}checkHasChangesOnActiveEditor(){Ot("svnActiveEditorHasChanges",this.hasChangesOnActiveEditor())}hasChangesOnActiveEditor(){if(!Ro.window.activeTextEditor)return!1;let e=Ro.window.activeTextEditor.document.uri,t=this.sourceControlManager.getRepository(e);if(!t)return!1;let r=t.getResourceFromFile(e);if(!r)return!1;switch(r.type){case"added":case"deleted":case"external":case"ignored":case"none":case"normal":case"unversioned":return!1;case"conflicted":case"incomplete":case"merged":case"missing":case"modified":case"obstructed":case"replaced":return!0}return!0}dispose(){this.disposables.forEach(e=>e.dispose())}};H([De(100)],mn.prototype,"checkHasChangesOnActiveEditor",1);var gn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidOpenRepository(this.checkOpened,this,this.disposables),e.onDidCloseRepository(this.checkOpened,this,this.disposables),this.checkOpened()}checkOpened(){Ot("svnOpenRepositoryCount",this.sourceControlManager.repositories.length)}dispose(){this.disposables.forEach(e=>e.dispose())}};H([De(100)],gn.prototype,"checkOpened",1);var bn=X(require("path")),ie=require("vscode");var yp=require("crypto"),yn=X(require("path")),Ha=X(xp()),Gg=X(dp()),he=require("vscode");Ha.extend(Gg);var wn=class{constructor(e){this.path=e}toString(){return this.path}};function Or(n,e,t){return n.map(r=>({kind:e,data:r,parent:t}))}function To(n){let e=yn.join(__dirname,"..","icons"),t=r=>he.Uri.file(yn.join(e,r,`${n}.svg`));return{light:t("light"),dark:t("dark")}}async function _r(n,e){let t=he.env.clipboard;if(t===void 0){he.window.showErrorMessage("Clipboard is supported in VS Code 1.30 and newer");return}if(e.kind===2){let r=e.data;switch(n){case"msg":case"revision":await t.writeText(r[n])}}}function Xg(n,e,t){return!(n.length&&n[n.length-1].revision==="1"||e.length===0||e[e.length-1].revision==="1"||e.length<t)}function Po(n,e,t){let r=n.persisted.baseRevision;if(e.length&&r&&parseInt(e[0].revision,10)>r){let i=1;for(;e.length>i&&parseInt(e[i].revision,10)>r;)i++;let o=new he.TreeItem("BASE");o.tooltip="Log entries above do not exist in working copy",t.splice(i,0,{kind:4,data:o})}}async function Ya(n,e){if(n.localFullPath===void 0){e&&he.window.showErrorMessage("No working copy for this path");return}let t;try{t=await Ve(n.localFullPath.fsPath)}catch{return he.window.showWarningMessage("Not available from this working copy: "+n.localFullPath),!1}return t.isFile()?!0:(he.window.showErrorMessage("This target is not a file"),!1)}function vn(){let n=Number.parseInt($.get("log.length")||"50",10);if(isNaN(n)||n<=0)throw new Error("Invalid log.length setting value");return n}async function Ar(n){let e=n.persisted.commitFrom,t=n.entries;t.length&&(e=t[t.length-1].revision,e=(Number.parseInt(e,10)-1).toString());let r=[],i=vn();try{r=await n.repo.log(e,"1",i,n.svnTarget)}catch{}Xg(t,r,i)||(n.isComplete=!0),t.push(...r)}var mp=new Map;function Wg(n){let e=(0,yp.createHash)("md5");return e.write(n),e.digest().toString("hex")}function No(n,e=16){if(!$.get("gravatars.enabled",!0)||n===void 0)return new he.ThemeIcon("git-commit");let t=mp.get(n);if(t!==void 0)return t;let r=$.get("gravatar.icon_url","").replace("<AUTHOR>",n).replace("<AUTHOR_MD5>",Wg(n)).replace("<SIZE>",e.toString());return t=he.Uri.parse(r),mp.set(n,t),t}function Oo(n){let e=Ha(n.date).fromNow();return`r${n.revision}, ${e} by ${n.author}`}function _o(n){return n.msg?n.msg.split(/\r?\n/,1)[0]:"<blank>"}function Ao(n){let e=n.date;return isNaN(Date.parse(e))||(e=new Date(e).toString()),`Author: ${n.author}
${e}
Revision: ${n.revision}
Message: ${n.msg}`}async function gp(n,e,t){if(t==="BASE"){let s=n.getPathNormalizer().parse(e.toString(!0)).localFullPath;if(s===void 0||!await le(s.path)){let a="BASE revision doesn't exist for "+(s?s.path:"remote path");throw he.window.showErrorMessage(a),new Error(a)}return s}let r;try{r=await n.show(e,t)}catch(i){throw he.window.showErrorMessage("Failed to open path"),i}return jt.createTempSvnRevisionFile(e,t,r)}async function ir(n,e,t,r,i){let o=await gp(n,e,t),s=await gp(n,i||e,r),a={preview:!0},c=`${yn.basename(e.path)} (${t} : ${r})`;return he.commands.executeCommand("vscode.diff",o,s,c,a)}async function Lr(n,e,t){let r;try{r=await n.show(e,t)}catch{he.window.showErrorMessage("Failed to open path");return}let i=await jt.createTempSvnRevisionFile(e,t,r),o={preview:!0};return he.commands.executeCommand("vscode.open",i,o)}var Lo=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new ie.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose=[];this._dispose.push(ie.window.onDidChangeActiveTextEditor(this.editorChanged,this),ie.window.registerTreeDataProvider("itemlog",this),ie.commands.registerCommand("svn.itemlog.copymsg",async t=>_r("msg",t)),ie.commands.registerCommand("svn.itemlog.copyrevision",async t=>_r("revision",t)),ie.commands.registerCommand("svn.itemlog.openFileRemote",this.openFileRemoteCmd,this),ie.commands.registerCommand("svn.itemlog.openDiff",this.openDiffCmd,this),ie.commands.registerCommand("svn.itemlog.openDiffBase",this.openDiffBaseCmd,this),ie.commands.registerCommand("svn.itemlog.refresh",this.refresh,this)),this.refresh()}dispose(){Ie(this._dispose)}async openFileRemoteCmd(e){let t=e.data,r=ze(this.currentItem);return Lr(r.repo,r.svnTarget,t.revision)}async openDiffBaseCmd(e){let t=e.data,r=ze(this.currentItem);return ir(r.repo,r.svnTarget,t.revision,"BASE")}async openDiffCmd(e){let t=e.data,r=ze(this.currentItem),i=r.entries.findIndex(s=>s===t);if(i===r.entries.length-1){ie.window.showWarningMessage("Cannot diff last commit");return}let o=r.entries[i+1].revision;return ir(r.repo,r.svnTarget,o,t.revision)}async editorChanged(e){return this.refresh(void 0,e)}async refresh(e,t,r){if(r){await Ar(ze(this.currentItem)),this._onDidChangeTreeData.fire(e);return}if(t===void 0&&(t=ie.window.activeTextEditor),t){let i=t.document.uri;if(i.scheme==="file"){let o=this.sourceControlManager.getRepository(i);if(o!==null)try{let s=await o.getInfo(i.fsPath);this.currentItem={isComplete:!1,entries:[],repo:o,svnTarget:ie.Uri.parse(s.url),persisted:{commitFrom:"HEAD",baseRevision:parseInt(s.revision,10)},order:0}}catch{}}this._onDidChangeTreeData.fire(e)}}async getTreeItem(e){let t;if(e.kind===2){let r=e.data;t=new ie.TreeItem(_o(r),ie.TreeItemCollapsibleState.None),t.description=Oo(r),t.iconPath=No(r.author),t.tooltip=Ao(r),t.contextValue="diffable",t.command={command:"svn.itemlog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Shouldn't happen");return t}async getChildren(e){if(this.currentItem===void 0)return[];if(e===void 0){let t=bn.basename(this.currentItem.svnTarget.fsPath),r=new ie.TreeItem(t,ie.TreeItemCollapsibleState.Expanded);return r.tooltip=bn.dirname(this.currentItem.svnTarget.fsPath),r.description=bn.dirname(this.currentItem.svnTarget.fsPath),r.iconPath=new ie.ThemeIcon("history"),[{kind:4,data:r}]}else{let t=this.currentItem.entries;t.length===0&&await Ar(this.currentItem);let r=Or(t,2);if(Po(this.currentItem,t,r),!this.currentItem.isComplete){let i=new ie.TreeItem(`Load another ${vn()} revisions`),o={kind:4,data:i};i.tooltip="Paging size may be adjusted using log.length setting",i.command={command:"svn.itemlog.refresh",arguments:[e,void 0,!0],title:"refresh element"},i.iconPath=new ie.ThemeIcon("unfold"),r.push(o)}return r}}};var zt=X(require("path")),V=require("vscode");var Ip=X(require("path")),oe=require("vscode");var En=class{constructor(){this.operations=new Map}start(e){this.operations.set(e,(this.operations.get(e)||0)+1)}end(e){let t=(this.operations.get(e)||0)-1;t<=0?this.operations.delete(e):this.operations.set(e,t)}isRunning(e){return this.operations.has(e)}isIdle(){let e=this.operations.keys();for(let t of e)if(!Fn(t))return!1;return!0}};var Xt=require("path"),wp=X(require("path")),In=require("vscode");var Cn=require("path"),Qa=require("vscode");function Gt(n){return n.path||"/"}var dt=class{constructor(e,t,r,i,o){this.remoteRoot=e;this.branchRoot=t;this.checkoutRoot=r;this._path=i;this._revision=o;if(i.length===0||i.charAt(0)==="/")throw new Error("Invalid _path "+i)}get remoteFullPath(){return Qa.Uri.parse(this.remoteRoot.toString()+"/"+this._path)}get localFullPath(){if(this.checkoutRoot!==void 0)return Qa.Uri.file(Cn.posix.join(this.checkoutRoot.path,Cn.posix.relative(this.fromRepoToBranch,this._path)))}get relativeFromBranch(){return Cn.posix.relative(this.fromRepoToBranch,this._path)}get fromRepoToBranch(){return Cn.posix.relative(Gt(this.remoteRoot),Gt(this.branchRoot))}get revision(){return this._revision}toString(e){return this.remoteFullPath+(e&&this._revision||"")}};H([ge],dt.prototype,"remoteFullPath",1),H([ge],dt.prototype,"localFullPath",1),H([ge],dt.prototype,"relativeFromBranch",1),H([ge],dt.prototype,"fromRepoToBranch",1),H([ge],dt.prototype,"revision",1),H([ge],dt.prototype,"toString",1);var Wt=class{constructor(e){this.repoInfo=e;this.repoRoot=In.Uri.parse(e.repository.root),this.branchRoot=In.Uri.parse(e.url),e.wcInfo&&e.wcInfo.wcrootAbspath&&(this.checkoutRoot=In.Uri.file(e.wcInfo.wcrootAbspath))}getFullRepoPathFromUrl(e){if(e.startsWith("/"))return e.substr(1);if(e.startsWith("svn://")||e.startsWith("file://")){let t=In.Uri.parse(e).path;return Xt.posix.relative(Gt(this.repoRoot),t)}else throw new Error("unknown path")}parse(e,t=2,r){let i;if(t===2)i=this.getFullRepoPathFromUrl(e);else if(t===1){if(!Xt.posix.isAbsolute(e))throw new Error("Path isn't absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=wp.relative(this.checkoutRoot.fsPath,e),i=Xt.posix.join(this.fromRootToBranch(),i)}else if(t===0){if(Xt.posix.isAbsolute(e))throw new Error("Path is absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=Xt.posix.join(this.fromRootToBranch(),e)}else throw new Error("unsupported kind");return new dt(this.repoRoot,this.branchRoot,this.checkoutRoot,i,r)}fromRootToBranch(){return Xt.posix.relative(Gt(this.repoRoot),Gt(this.branchRoot))}fromBranchToRoot(){return Xt.posix.relative(Gt(this.branchRoot),Gt(this.repoRoot))}};H([ge],Wt.prototype,"fromRootToBranch",1),H([ge],Wt.prototype,"fromBranchToRoot",1);var vp=require("vscode");var Mo=class{constructor(e){this.repository=e;this._onDidChange=new vp.EventEmitter;this.disposables=[];e.onDidChangeStatus(this._onDidChange.fire,this._onDidChange,this.disposables),e.onDidChangeOperations(this._onDidChange.fire,this._onDidChange,this.disposables)}get onDidChange(){return this._onDidChange.event}get command(){if(!this.repository.currentBranch)return;let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch");return{command:"svn.switchBranch",tooltip:"Switch Branch...",title:`$(git-branch) ${this.repository.currentBranch}${e?" (Switching)":""}`,arguments:[this.repository.sourceControl]}}dispose(){this.disposables.forEach(e=>e.dispose())}};var bp=require("vscode");var Uo=class Uo{constructor(e){this.repository=e;this._onDidChange=new bp.EventEmitter;this.disposables=[];this._state=Uo.startState;e.onDidChangeStatus(this.onModelChange,this,this.disposables),e.onDidChangeOperations(this.onOperationsChange,this,this.disposables),this._onDidChange.fire()}get onDidChange(){return this._onDidChange.event}get state(){return this._state}set state(e){this._state=e,this._onDidChange.fire()}onOperationsChange(){let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch")||this.repository.operations.isRunning("Update")||this.repository.operations.isRunning("Merge"),t=this.repository.operations.isRunning("StatusRemote"),r=!this.repository.operations.isIdle();this.state={...this.state,isStatusRemoteRunning:t,isOperationRunning:r,isSyncRunning:e}}onModelChange(){this.state={...this.state,remoteChangedFiles:this.repository.remoteChangedFiles}}get command(){let e="$(sync)",t="",r="",i="";return this.state.isSyncRunning?(r="",e="$(sync~spin)",t="",i="Updating Revision..."):this.state.isStatusRemoteRunning?(r="",e="$(sync~spin)",t="",i="Checking remote updates..."):this.state.isOperationRunning?(r="",e="$(sync~spin)",t="Running",i="Running..."):this.state.needCleanUp?(r="svn.cleanup",e="$(alert)",t="Need cleanup",i="Run cleanup command"):this.state.isIncomplete?(r="svn.finishCheckout",e="$(issue-reopened)",t="Incomplete (Need finish checkout)",i="Run update to complete"):this.state.remoteChangedFiles>0?(e="$(cloud-download)",r="svn.update",i="Update Revision",t=`${this.state.remoteChangedFiles}\u2193`):(r="svn.update",i="Update Revision"),{command:r,title:[e,t].join(" ").trim(),tooltip:i,arguments:[this.repository]}}dispose(){this.disposables.forEach(e=>e.dispose())}};Uo.startState={isIncomplete:!1,isOperationRunning:!1,isStatusRemoteRunning:!1,isSyncRunning:!1,needCleanUp:!1,remoteChangedFiles:0};var Fo=Uo;var ko=class{constructor(e){this.disposables=[];this.checkoutStatusBar=new Mo(e),this.syncStatusBar=new Fo(e),this.disposables.push(this.checkoutStatusBar,this.syncStatusBar)}get onDidChange(){return ot(this.syncStatusBar.onDidChange,this.checkoutStatusBar.onDidChange)}get commands(){let e=[],t=this.checkoutStatusBar.command;t&&e.push(t);let r=this.syncStatusBar.command;return r&&e.push(r),e}dispose(){this.disposables.forEach(e=>e.dispose())}};var Dn=require("timers");var Sn=class{constructor(e,t,r){this.repository=e;this.getConfig=t;this.disposables=[];this.createRemoteChangedInterval(),this.disposables.push(r(i=>{i.affectsConfiguration("svn.remoteChanges.checkFrequency")&&(this.remoteChangedUpdateInterval&&(0,Dn.clearInterval)(this.remoteChangedUpdateInterval),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles())}))}createRemoteChangedInterval(){let e=this.getConfig("remoteChanges.checkFrequency",300);e&&(this.remoteChangedUpdateInterval=(0,Dn.setInterval)(()=>{this.updateRemoteChangedFiles()},1e3*e))}async updateRemoteChangedFiles(){var t;this.getConfig("remoteChanges.checkFrequency",300)?await this.repository.run("StatusRemote"):((t=this.repository.remoteChanges)==null||t.dispose(),this.repository.remoteChanges=void 0)}dispose(){this.remoteChangedUpdateInterval&&((0,Dn.clearInterval)(this.remoteChangedUpdateInterval),this.remoteChangedUpdateInterval=void 0),this.disposables.forEach(e=>e.dispose()),this.disposables=[]}};H([De(1e3)],Sn.prototype,"updateRemoteChangedFiles",1);var $o=class{constructor(e,t){this.sourceControl=e;this.disposables=t;this.changelists=new Map;this.changes=this.sourceControl.createResourceGroup("changes","Changes"),this.conflicts=this.sourceControl.createResourceGroup("conflicts","Conflicts"),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.changes.hideWhenEmpty=!0,this.unversioned.hideWhenEmpty=!0,this.conflicts.hideWhenEmpty=!0,this.disposables.push(this.changes),this.disposables.push(this.conflicts),this.disposables.push(this.unversioned)}updateChangelists(e){this.changelists.forEach(t=>{t.resourceStates=[]}),e.forEach((t,r)=>{let i=this.changelists.get(r);i||(i=this.sourceControl.createResourceGroup(`changelist-${r}`,`Changelist "${r}"`),i.hideWhenEmpty=!0,this.disposables.push(i),this.changelists.set(r,i)),i.resourceStates=t})}recreateUnversionedGroup(){let e=this.unversioned.resourceStates;this.unversioned.dispose(),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.unversioned.hideWhenEmpty=!0,this.unversioned.resourceStates=e}recreateRemoteChangesGroup(e){var r,i;let t=((r=this.remoteChanges)==null?void 0:r.resourceStates)??[];(i=this.remoteChanges)==null||i.dispose(),this.remoteChanges=this.sourceControl.createResourceGroup("remotechanges","Remote Changes"),e&&(this.remoteChanges.repository=e),this.remoteChanges.hideWhenEmpty=!0,this.remoteChanges.resourceStates=t}clearAll(){this.changes.resourceStates=[],this.unversioned.resourceStates=[],this.conflicts.resourceStates=[],this.changelists.forEach(e=>{e.resourceStates=[]})}getAllGroups(){return[this.changes,this.conflicts,this.unversioned,...this.changelists.values()]}dispose(){var e;(e=this.remoteChanges)==null||e.dispose()}};var Rn=X(require("path")),Mr=require("vscode");var Bo=class{constructor(e,t,r){this.repository=e;this.resourceGroups=t;this.events=r}async updateModelState(e,t,r,i,o,s,a=!1){let c=[],u=[],d=[],m=new Map,g=[];e=[],t=[],r=!1,i=!1;let l=$.get("sourceControl.combineExternalIfSameServer",!1),y=await this.repository.retryRun(async()=>this.repository.getStatus({includeIgnored:!0,includeExternals:l,checkRemoteChanges:a}))??[],R=Mr.workspace.getConfiguration("files",Mr.Uri.file(this.repository.root)).get("exclude"),N=[];for(let x in R)if(R.hasOwnProperty(x)){let S=!R[x];N.push((S?"!":"")+x)}if(e=y.filter(x=>x.status==="external"),l&&e.length){let x=await this.repository.getRepositoryUuid();e=e.filter(S=>x!==S.repositoryUuid)}let D=y.filter(x=>x.status==="external"?!1:!e.some(S=>Se(S.path,x.path))),v=$.get("sourceControl.hideUnversioned"),p=$.get("sourceControl.ignore");for(let x of D){if(x.path==="."&&(r=x.status==="incomplete",i=x.wcStatus.locked),x.wcStatus.switched&&(r=!0),x.wcStatus.locked||x.wcStatus.switched||x.status==="incomplete"||rr(x.path,N,{dot:!0}))continue;let S=Mr.Uri.file(Rn.join(this.repository.workspaceRoot,x.path)),C=x.rename?Mr.Uri.file(Rn.join(this.repository.workspaceRoot,x.rename)):void 0;x.reposStatus&&g.push(new ee(S,x.reposStatus.item,void 0,x.reposStatus.props,!0));let T=new ee(S,x.status,C,x.props);if(!((x.status==="normal"||x.status==="none")&&(x.props==="normal"||x.props==="none")&&!x.changelist))if(x.status==="ignored")t.push(x);else if(x.status==="conflicted")d.push(T);else if(x.status==="unversioned"){if(v)continue;let P=x.path.match(/(.+?)\.(mine|working|merge-\w+\.r\d+|r\d+)$/);if(P&&P[1]&&y.some(O=>O.path===P[1])||p.length>0&&rr(Rn.sep+x.path,p,{dot:!0,matchBase:!0}))continue;u.push(T)}else if(x.changelist){let P=m.get(x.changelist);P||(P=[]),P.push(T),m.set(x.changelist,P)}else c.push(T)}this.resourceGroups.changes.resourceStates=c,this.resourceGroups.conflicts.resourceStates=d;let h=this.resourceGroups.changelists.size;this.resourceGroups.changelists.forEach((x,S)=>{x.resourceStates=[]});let E=[this.resourceGroups.changes,this.resourceGroups.conflicts],_=$.get("sourceControl.ignoreOnStatusCount");return this.resourceGroups.updateChangelists(m),m.forEach((x,S)=>{let C=this.resourceGroups.changelists.get(S);C&&!_.includes(S)&&E.push(C)}),h!==this.resourceGroups.changelists.size&&this.resourceGroups.recreateUnversionedGroup(),this.resourceGroups.unversioned.resourceStates=u,$.get("sourceControl.countUnversioned",!1)&&E.push(this.resourceGroups.unversioned),(!this.resourceGroups.remoteChanges||h!==this.resourceGroups.changelists.size)&&this.resourceGroups.recreateRemoteChangesGroup(),a&&this.resourceGroups.remoteChanges&&(this.resourceGroups.remoteChanges.resourceStates=g,g.length!==o&&(o=g.length,this.events.onDidChangeRemoteChangedFiles())),this.events.onDidChangeStatus(),s=await this.events.getCurrentBranch(),{statusExternal:e,statusIgnored:t,isIncomplete:r,needCleanUp:i,remoteChangedFiles:o,currentBranch:s}}};var ke=require("vscode"),Ep=require("fs");var Cp=require("path");var Tn=class{constructor(e){this.root=e;this.disposables=[];let t=ke.workspace.createFileSystemWatcher(new ke.RelativePattern(tt(e),"**"));this._onRepoChange=new ke.EventEmitter,this._onRepoCreate=new ke.EventEmitter,this._onRepoDelete=new ke.EventEmitter;let r,i,o;typeof ke.workspace.workspaceFolders<"u"&&!ke.workspace.workspaceFolders.filter(m=>Se(m.uri.fsPath,e)).length&&((0,Ep.watch)((0,Cp.join)(e,vt()),this.repoWatch.bind(this)).on("error",g=>{throw g}),r=this._onRepoChange.event,i=this._onRepoCreate.event,o=this._onRepoDelete.event),this.disposables.push(t);let s=m=>/[\\\/](\.svn|_svn)[\\\/]tmp/.test(m.path),a=m=>!s(m);this.onDidChange=me(t.onDidChange,a),this.onDidCreate=me(t.onDidCreate,a),this.onDidDelete=me(t.onDidDelete,a),this.onDidAny=ot(this.onDidChange,this.onDidCreate,this.onDidDelete);let c=/[\\\/](\.svn|_svn)[\\\/]/,u=m=>!c.test(m.path);this.onDidWorkspaceChange=me(this.onDidChange,u),this.onDidWorkspaceCreate=me(this.onDidCreate,u),this.onDidWorkspaceDelete=me(this.onDidDelete,u),this.onDidWorkspaceAny=ot(this.onDidWorkspaceChange,this.onDidWorkspaceCreate,this.onDidWorkspaceDelete);let d=m=>c.test(m.path);this.onDidSvnChange=me(this.onDidChange,d),this.onDidSvnCreate=me(this.onDidCreate,d),this.onDidSvnDelete=me(this.onDidDelete,d),r&&i&&o&&(this.onDidSvnChange=r,this.onDidSvnCreate=i,this.onDidSvnDelete=o),this.onDidSvnAny=ot(this.onDidSvnChange,this.onDidSvnCreate,this.onDidSvnDelete)}repoWatch(e,t){t&&(e==="change"?this._onRepoChange.fire(ke.Uri.parse(t)):e==="rename"&&le(t).then(r=>{r?this._onRepoCreate.fire(ke.Uri.parse(t)):this._onRepoDelete.fire(ke.Uri.parse(t))}))}dispose(){this.disposables.forEach(e=>e.dispose())}};H([De(1e3)],Tn.prototype,"repoWatch",1);function zg(n){switch(n){case"CurrentBranch":case"Show":case"Info":return!1;default:return!0}}var mt=class mt{constructor(e,t){this.repository=e;this.secrets=t;this.statusIgnored=[];this.statusExternal=[];this.disposables=[];this.currentBranch="";this.remoteChangedFiles=0;this.isIncomplete=!1;this.needCleanUp=!1;this.deletedUris=[];this.canSaveAuth=!1;this._onDidChangeRepository=new oe.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeState=new oe.EventEmitter;this.onDidChangeState=this._onDidChangeState.event;this._onDidChangeStatus=new oe.EventEmitter;this.onDidChangeStatus=this._onDidChangeStatus.event;this._onDidChangeRemoteChangedFiles=new oe.EventEmitter;this.onDidChangeRemoteChangedFile=this._onDidChangeRemoteChangedFiles.event;this._onRunOperation=new oe.EventEmitter;this.onRunOperation=this._onRunOperation.event;this._onDidRunOperation=new oe.EventEmitter;this.onDidRunOperation=this._onDidRunOperation.event;this._operations=new En;this._state=0;this._fsWatcher=new Tn(e.root),this.disposables.push(this._fsWatcher),this._fsWatcher.onDidAny(this.onFSChange,this,this.disposables),this._fsWatcher.onDidSvnAny(async o=>{await this.onDidAnyFileChanged(o)},this,this.disposables),this.sourceControl=oe.scm.createSourceControl("svn","SVN",oe.Uri.file(e.workspaceRoot)),this.sourceControl.count=0,this.sourceControl.inputBox.placeholder="Message (press Ctrl+Enter to commit)",this.sourceControl.acceptInputCommand={command:"svn.commitWithMessage",title:"commit",arguments:[this.sourceControl]},this.sourceControl.quickDiffProvider=this,this.disposables.push(this.sourceControl),this.statusBar=new ko(this),this.disposables.push(this.statusBar),this.statusBar.onDidChange(()=>this.sourceControl.statusBarCommands=this.statusBar.commands,null,this.disposables),this.resourceGroupManager=new $o(this.sourceControl,this.disposables);let r={root:this.repository.root,workspaceRoot:this.repository.workspaceRoot,getStatus:o=>this.repository.getStatus(o),getRepositoryUuid:()=>this.repository.getRepositoryUuid(),retryRun:o=>this.retryRun(o)},i={onDidChangeStatus:()=>this._onDidChangeStatus.fire(),onDidChangeRemoteChangedFiles:()=>this._onDidChangeRemoteChangedFiles.fire(),getCurrentBranch:async()=>this.currentBranch};this.statusService=new Bo(r,this.resourceGroupManager,i),this.remoteChangeService=new Sn(this,(o,s)=>$.get(o,s),$.onDidChange),this.disposables.push(this.remoteChangeService),this._fsWatcher.onDidWorkspaceDelete(o=>this.deletedUris.push(o),this,this.disposables),this.onDidChangeStatus(this.actionForDeletedFiles,this,this.disposables),this.disposables.push(oe.workspace.onDidSaveTextDocument(o=>{this.onDidSaveTextDocument(o)}))}get changes(){return this.resourceGroupManager.changes}get unversioned(){return this.resourceGroupManager.unversioned}get conflicts(){return this.resourceGroupManager.conflicts}get remoteChanges(){return this.resourceGroupManager.remoteChanges}get changelists(){return this.resourceGroupManager.changelists}get fsWatcher(){return this._fsWatcher}get onDidChangeOperations(){return ot(this.onRunOperation,this.onDidRunOperation)}get operations(){return this._operations}get state(){return this._state}set state(e){var t;this._state=e,this._onDidChangeState.fire(e),this.resourceGroupManager.clearAll(),(t=this.remoteChanges)==null||t.dispose(),this.isIncomplete=!1,this.needCleanUp=!1}get root(){return this.repository.root}get workspaceRoot(){return this.repository.workspaceRoot}get branchRoot(){return oe.Uri.parse(this.repository.info.url)}get inputBox(){return this.sourceControl.inputBox}get username(){return this.repository.username}set username(e){this.repository.username=e}get password(){return this.repository.password}set password(e){this.repository.password=e}static async create(e,t){let r=new mt(e,t);return await r.updateRemoteChangedFiles(),await r.status(),r}async onDidAnyFileChanged(e){await this.repository.updateInfo(),this._onDidChangeRepository.fire(e)}async actionForDeletedFiles(){if(!this.deletedUris.length)return;let e=this.deletedUris;this.deletedUris=[];let t=$.get("delete.actionForDeletedFiles","prompt");if(t==="none")return;let i=e.map(a=>this.getResourceFromFile(a)).filter(a=>a&&a.type==="missing").map(a=>a.resourceUri);if(!i.length)return;let s=$.get("delete.ignoredRulesForDeletedFiles",[]).map(a=>kf(a));if(s.length&&(i=i.filter(a=>{let c=this.repository.removeAbsolutePath(a.fsPath);return!s.some(u=>u.match(c)||u.match(a.fsPath))})),!!i.length){if(t==="remove")return this.removeFiles(i.map(a=>a.fsPath),!1);if(t==="prompt")return oe.commands.executeCommand("svn.promptRemove",...i)}}async updateRemoteChangedFiles(){return this.remoteChangeService.updateRemoteChangedFiles()}onFSChange(e){$.get("autorefresh")&&this.operations.isIdle()&&this.eventuallyUpdateWhenIdleAndWait()}eventuallyUpdateWhenIdleAndWait(){this.updateWhenIdleAndWait()}async updateWhenIdleAndWait(){await this.whenIdleAndFocused(),await this.status(),await os(5e3)}async whenIdleAndFocused(){for(;;){if(!this.operations.isIdle()){await Qt(this.onDidRunOperation);continue}if(!oe.window.state.focused){let e=me(oe.window.onDidChangeWindowState,t=>t.focused);await Qt(e);continue}return}}async updateModelState(e=!1){let t=await this.statusService.updateModelState(this.statusExternal,this.statusIgnored,this.isIncomplete,this.needCleanUp,this.remoteChangedFiles,this.currentBranch,e);return this.statusExternal=t.statusExternal,this.statusIgnored=t.statusIgnored,this.isIncomplete=t.isIncomplete,this.needCleanUp=t.needCleanUp,this.remoteChangedFiles=t.remoteChangedFiles,this.currentBranch=t.currentBranch,Promise.resolve()}getResourceFromFile(e){typeof e=="string"&&(e=oe.Uri.file(e));let t=[this.changes,this.conflicts,this.unversioned,...this.changelists.values()],r=e.toString();for(let i of t)for(let o of i.resourceStates)if(r===o.resourceUri.toString()&&o instanceof ee)return o}provideOriginalResource(e){if(e.scheme==="file"&&!Se(Ip.join(this.root,vt()),e.fsPath))return He(e,"SHOW",{},!0)}async getBranches(){try{return await this.repository.getBranches()}catch{return[]}}async status(){return this.run("Status")}async show(e,t){return this.run("Show",()=>this.repository.show(e,t))}async showBuffer(e,t){return this.run("Show",()=>this.repository.showBuffer(e,t))}async addFiles(e){return this.run("Add",()=>this.repository.addFiles(e))}async addChangelist(e,t){return this.run("AddChangelist",()=>this.repository.addChangelist(e,t))}async removeChangelist(e){return this.run("RemoveChangelist",()=>this.repository.removeChangelist(e))}async getCurrentBranch(){return this.run("CurrentBranch",async()=>this.repository.getCurrentBranch())}async newBranch(e,t="Created new branch"){return this.run("NewBranch",async()=>{await this.repository.newBranch(e,t),this.updateRemoteChangedFiles()})}async switchBranch(e,t=!1){await this.run("SwitchBranch",async()=>{await this.repository.switchBranch(e,t),this.updateRemoteChangedFiles()})}async merge(e,t=!1,r="postpone"){await this.run("Merge",async()=>{await this.repository.merge(e,t,r),this.updateRemoteChangedFiles()})}async updateRevision(e=!1){return this.run("Update",async()=>{let t=await this.repository.update(e);return this.updateRemoteChangedFiles(),t})}async pullIncomingChange(e){return this.run("Update",async()=>{let t=await this.repository.pullIncomingChange(e);return this.updateRemoteChangedFiles(),t})}async resolve(e,t){return this.run("Resolve",()=>this.repository.resolve(e,t))}async commitFiles(e,t){return this.run("Commit",()=>this.repository.commitFiles(e,t))}async revert(e,t){return this.run("Revert",()=>this.repository.revert(e,t))}async info(e){return this.run("Info",()=>this.repository.getInfo(e))}async patch(e){return this.run("Patch",()=>this.repository.patch(e))}async patchBuffer(e){return this.run("Patch",()=>this.repository.patchBuffer(e))}async patchChangelist(e){return this.run("Patch",()=>this.repository.patchChangelist(e))}async removeFiles(e,t){return this.run("Remove",()=>this.repository.removeFiles(e,t))}async plainLog(){return this.run("Log",()=>this.repository.plainLog())}async plainLogBuffer(){return this.run("Log",()=>this.repository.plainLogBuffer())}async plainLogByRevision(e){return this.run("Log",()=>this.repository.plainLogByRevision(e))}async plainLogByRevisionBuffer(e){return this.run("Log",()=>this.repository.plainLogByRevisionBuffer(e))}async plainLogByText(e){return this.run("Log",()=>this.repository.plainLogByText(e))}async plainLogByTextBuffer(e){return this.run("Log",()=>this.repository.plainLogByTextBuffer(e))}async log(e,t,r,i){return this.run("Log",()=>this.repository.log(e,t,r,i))}async logByUser(e){return this.run("Log",()=>this.repository.logByUser(e))}async cleanup(){return this.run("CleanUp",()=>this.repository.cleanup())}async removeUnversioned(){return this.run("CleanUp",()=>this.repository.removeUnversioned())}async getInfo(e,t){return this.run("Info",()=>this.repository.getInfo(e,t,!0))}async getChanges(){return this.run("Changes",()=>this.repository.getChanges())}async finishCheckout(){return this.run("SwitchBranch",()=>this.repository.finishCheckout())}async addToIgnore(e,t,r=!1){return this.run("Ignore",()=>this.repository.addToIgnore(e,t,r))}async rename(e,t){return this.run("Rename",()=>this.repository.rename(e,t))}async list(e){return this.run("List",()=>this.repository.ls(e))}getPathNormalizer(){return new Wt(this.repository.info)}getCredentialServiceName(){var r;let e="vscode.positron-svn",t=this.repository.info;return(r=t.repository)!=null&&r.root?e+=":"+t.repository.root:t.url&&(e+=":"+t.url),e}async loadStoredAuths(){this.lastPromptAuth&&await this.lastPromptAuth;let e=await this.secrets.get(this.getCredentialServiceName());return e===void 0?[]:JSON.parse(e)}async saveAuth(){if(this.canSaveAuth&&this.username&&this.password){let e=await this.secrets.get(this.getCredentialServiceName()),t=[];typeof e=="string"&&(t=JSON.parse(e)),t.push({account:this.username,password:this.password}),await this.secrets.store(this.getCredentialServiceName(),JSON.stringify(t)),this.canSaveAuth=!1}}async promptAuth(){if(this.lastPromptAuth)return this.lastPromptAuth;this.lastPromptAuth=oe.commands.executeCommand("svn.promptAuth");let e=await this.lastPromptAuth;return e&&(this.username=e.username,this.password=e.password,this.canSaveAuth=!0),this.lastPromptAuth=void 0,e}onDidSaveTextDocument(e){let t=e.uri.toString(),r=this.conflicts.resourceStates.find(o=>o.resourceUri.toString()===t);if(!r)return;let i=e.getText();/^<{7}[^]+^={7}[^]+^>{7}/m.test(i)||oe.commands.executeCommand("svn.resolved",r.resourceUri)}async run(e,t=()=>Promise.resolve(null)){if(this.state!==0)throw new Error("Repository not initialized");let r=async()=>{this._operations.start(e),this._onRunOperation.fire(e);try{let i=await this.retryRun(t),o=e==="StatusRemote";return Fn(e)||await this.updateModelState(o),i}catch(i){throw i.svnErrorCode===Ge.NotASvnRepository&&(this.state=1),await le(this.workspaceRoot)||await oe.commands.executeCommand("svn.close",this),i}finally{this._operations.end(e),this._onDidRunOperation.fire(e)}};return zg(e)?oe.window.withProgress({location:oe.ProgressLocation.SourceControl},r):r()}async retryRun(e=()=>Promise.resolve(null)){let t=0,r=[];for(;;)try{t++;let i=await e();return this.saveAuth(),i}catch(i){let o=i;if(o.svnErrorCode===Ge.RepositoryIsLocked&&t<=10)await os(Math.pow(t,2)*50);else if(o.svnErrorCode===Ge.AuthorizationFailed&&t<=1+r.length){t===1&&(r=await this.loadStoredAuths());let s=r.length-1;typeof r[s]<"u"&&(this.username=r[s].account,this.password=r[s].password)}else if(o.svnErrorCode===Ge.AuthorizationFailed&&t<=3+r.length){if(!await this.promptAuth())throw i}else throw i}}dispose(){this.disposables=Ie(this.disposables)}};H([ge],mt.prototype,"onDidChangeOperations",1),H([De(1e3)],mt.prototype,"onDidAnyFileChanged",1),H([De(1e3)],mt.prototype,"actionForDeletedFiles",1),H([De(1e3)],mt.prototype,"eventuallyUpdateWhenIdleAndWait",1),H([lr],mt.prototype,"updateWhenIdleAndWait",1),H([lr,dc("updateModelState")],mt.prototype,"updateModelState",1),H([lr],mt.prototype,"status",1);var Vt=mt;function Hg(n){let e;switch(n){case"A":e="status-added";break;case"D":e="status-deleted";break;case"M":e="status-modified";break;case"R":e="status-renamed";break}if(e!==void 0)return To(e)}var qo=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new V.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.logCache=new Map;this._dispose=[];this.refresh(),this._dispose.push(V.window.registerTreeDataProvider("repolog",this),V.commands.registerCommand("svn.repolog.copymsg",async t=>_r("msg",t)),V.commands.registerCommand("svn.repolog.copyrevision",async t=>_r("revision",t)),V.commands.registerCommand("svn.repolog.addrepolike",this.addRepolikeGui,this),V.commands.registerCommand("svn.repolog.remove",this.removeRepo,this),V.commands.registerCommand("svn.repolog.openFileRemote",this.openFileRemoteCmd,this),V.commands.registerCommand("svn.repolog.openDiff",this.openDiffCmd,this),V.commands.registerCommand("svn.repolog.openFileLocal",this.openFileLocal,this),V.commands.registerCommand("svn.repolog.refresh",this.refresh,this),this.sourceControlManager.onDidChangeRepository(async t=>this.refresh()))}getCached(e){let t=ze(e);return t.data instanceof wn?ze(this.logCache.get(t.data.toString())):this.getCached(t.parent)}dispose(){Ie(this._dispose)}removeRepo(e){this.logCache.delete(e.data.toString()),this.refresh()}async addRepolike(e,t){let r={entries:[],isComplete:!1,svnTarget:{},repo:{},persisted:{commitFrom:t,userAdded:!0},order:this.logCache.size};if(this.logCache.has(e)){V.window.showWarningMessage("This path is already added");return}let i=this.sourceControlManager.getRepository(e);if(i===null)try{let s;if(e.startsWith("^")){let c=this.sourceControlManager.getRepository(ze(V.workspace.workspaceFolders)[0].uri);if(!c)throw new Error("No repository in workspace root");let u=await c.getInfo(e);s=V.Uri.parse(u.url)}else s=V.Uri.parse(e);if(t!=="HEAD"&&isNaN(parseInt(t,10)))throw new Error("erroneous revision");let a=await this.sourceControlManager.getRemoteRepository(s);r.repo=a,r.svnTarget=s}catch(s){V.window.showWarningMessage("Failed to add repo: "+(s instanceof Error?s.message:""));return}else try{let s=await i.getInfo(e,t);r.repo=i,r.svnTarget=V.Uri.parse(s.url),r.persisted.baseRevision=parseInt(s.revision,10)}catch{V.window.showErrorMessage("Failed to resolve svn path");return}let o=r.svnTarget.toString(!0);if(this.logCache.has(o)){V.window.showWarningMessage("Repository with this name already exists");return}this.logCache.set(o,r),this._onDidChangeTreeData.fire(void 0)}addRepolikeGui(){let e=V.window.createInputBox();e.prompt="Enter SVN URL or local path",e.onDidAccept(async()=>{let t=e.value;if(!zt.isAbsolute(t)&&V.workspace.workspaceFolders&&!t.startsWith("^")&&!/^[a-z]+?:\/\//.test(t))for(let i of V.workspace.workspaceFolders){let o=zt.join(i.uri.fsPath,t);if(await le(o)){t=o;break}}e.dispose();let r=V.window.createInputBox();r.prompt="Enter starting revision (optional)",r.onDidAccept(async()=>{let i=r.value;return r.dispose(),this.addRepolike(t,i||"HEAD")},void 0),r.show()}),e.show()}async openFileRemoteCmd(e){let t=e.data,r=this.getCached(e),i=r.repo.getPathNormalizer().parse(t._);if(await Ya(i,!1)===!1)return;let o=e.parent.data;return Lr(r.repo,i.remoteFullPath,o.revision)}openFileLocal(e){let t=e.data,i=this.getCached(e).repo.getPathNormalizer().parse(t._);Ya(i,!0)&&V.commands.executeCommand("vscode.open",ze(i.localFullPath))}async openDiffCmd(e){let t=e.data,r=this.getCached(e),i=e.parent.data,o=r.repo.getPathNormalizer().parse(t._).remoteFullPath,s,a=await r.repo.log(i.revision,"1",2,o);if(a.length===2)s=a[1];else{V.window.showWarningMessage("Cannot find previous commit");return}return ir(r.repo,o,s.revision,i.revision)}async refresh(e,t){if(e===void 0){for(let[r,i]of this.logCache)i.persisted.userAdded||this.logCache.delete(r);for(let r of this.sourceControlManager.repositories){let i=r.branchRoot,o=i.toString(!0),s={commitFrom:"HEAD",baseRevision:parseInt(r.repository.info.revision,10)},a=this.logCache.get(o);a&&(s=a.persisted),this.logCache.set(o,{entries:[],isComplete:!1,repo:r,svnTarget:i,persisted:s,order:this.logCache.size})}}else if(e.kind===1){let r=this.getCached(e);t?await Ar(r):(r.entries=[],r.isComplete=!1)}this._onDidChangeTreeData.fire(e)}async getTreeItem(e){let t;if(e.kind===1){let r=e.data,i=this.getCached(e);t=new V.TreeItem(r.toString(),V.TreeItemCollapsibleState.Collapsed),i.persisted.userAdded?(t.label="\u2218 "+t.label,t.contextValue="userrepo"):t.contextValue="repo",i.repo instanceof Vt?t.iconPath=new V.ThemeIcon("folder-opened"):t.iconPath=new V.ThemeIcon("repo");let o=i.persisted.commitFrom||"HEAD";t.tooltip=`${r} since ${o}`}else if(e.kind===2){let r=e.data;t=new V.TreeItem(_o(r),V.TreeItemCollapsibleState.Collapsed),t.description=Oo(r),t.tooltip=Ao(r),t.iconPath=No(r.author),t.contextValue="commit"}else if(e.kind===3){let r=e.data,i=zt.basename(r._);t=new V.TreeItem(i,V.TreeItemCollapsibleState.None),t.description=zt.dirname(r._);let s=this.getCached(e).repo.getPathNormalizer();t.tooltip=s.parse(r._).relativeFromBranch,t.iconPath=Hg(r.action),t.contextValue="diffable",t.command={command:"svn.repolog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Unknown tree elem");return t}async getChildren(e){if(e===void 0)return Or(Array.from(this.logCache.entries()).sort(([t,r],[i,o])=>r.persisted.userAdded!==o.persisted.userAdded?r.persisted.userAdded?1:-1:r.order-o.order).map(([t,r])=>new wn(t)),1);if(e.kind===1){let t=vn(),r=this.getCached(e),i=r.entries;i.length===0&&await Ar(r);let o=Or(i,2,e);if(Po(r,i,o),!r.isComplete){let s=new V.TreeItem(`Load another ${t} revisions`);s.tooltip="Paging size may be adjusted using log.length setting",s.command={command:"svn.repolog.refresh",arguments:[e,!0],title:"refresh element"},s.iconPath=new V.ThemeIcon("unfold"),o.push({kind:4,data:s})}return o}else if(e.kind===2){let t=e.data;return Or(t.paths,3,e)}return[]}};var or=X(require("path")),pe=require("vscode");var Sp=require("vscode");var jo=class n{constructor(e){this.repo=e;this.info=e.info}static async open(e,t){let r=await e.open(t.toString(!0),"");return new n(r)}getPathNormalizer(){return new Wt(this.info)}get branchRoot(){return Sp.Uri.parse(this.info.url)}async log(e,t,r,i){return this.repo.log(e,t,r,i)}async show(e,t){return this.repo.show(e,t)}};var Pn=class{constructor(e,t,r){this._svn=e;this.extensionContact=r;this._onDidOpenRepository=new pe.EventEmitter;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new pe.EventEmitter;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidChangeRepository=new pe.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeStatusRepository=new pe.EventEmitter;this.onDidChangeStatusRepository=this._onDidChangeStatusRepository.event;this.openRepositories=[];this.disposables=[];this.enabled=!1;this.possibleSvnRepositoryPaths=new Set;this.ignoreList=[];this.maxDepth=0;this._onDidChangeState=new pe.EventEmitter;this.onDidchangeState=this._onDidChangeState.event;this._state="uninitialized";if(t!==0)throw new Error("Unsopported policy");return this.enabled=$.get("enabled")===!0,this.configurationChangeDisposable=pe.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this),(async()=>(this.enabled&&await this.enable(),this))()}get state(){return this._state}setState(e){this._state=e,this._onDidChangeState.fire(e)}get isInitialized(){return this._state==="initialized"?Promise.resolve():Qt(me(this.onDidchangeState,e=>e==="initialized"))}get repositories(){return this.openRepositories.map(e=>e.repository)}get svn(){return this._svn}openRepositoriesSorted(){return this.openRepositories.sort((e,t)=>t.repository.workspaceRoot.length-e.repository.workspaceRoot.length)}onDidChangeConfiguration(){let e=$.get("enabled")===!0;this.maxDepth=$.get("multipleFolders.depth",0),e!==this.enabled&&(this.enabled=e,e?this.enable():this.disable())}async enable(){$.get("multipleFolders.enabled",!1)&&(this.maxDepth=$.get("multipleFolders.depth",0),this.ignoreList=$.get("multipleFolders.ignore",[])),pe.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,this.disposables);let t=pe.workspace.createFileSystemWatcher("**");this.disposables.push(t);let r=ot(t.onDidChange,t.onDidCreate,t.onDidDelete);me(r,o=>o.scheme==="file"&&!this.getRepository(o))(this.onPossibleSvnRepositoryChange,this,this.disposables),this.setState("initialized"),await this.scanWorkspaceFolders()}onPossibleSvnRepositoryChange(e){let t=e.fsPath.replace(/\.svn.*$/,"");this.eventuallyScanPossibleSvnRepository(t)}eventuallyScanPossibleSvnRepository(e){this.possibleSvnRepositoryPaths.add(e),this.eventuallyScanPossibleSvnRepositories()}eventuallyScanPossibleSvnRepositories(){for(let e of this.possibleSvnRepositoryPaths)this.tryOpenRepository(e,1);this.possibleSvnRepositoryPaths.clear()}scanExternals(e){$.get("detectExternals")===!0&&e.statusExternal.map(r=>or.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}scanIgnored(e){$.get("detectIgnored")===!0&&e.statusIgnored.map(r=>or.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}disable(){this.repositories.forEach(e=>e.dispose()),this.openRepositories=[],this.possibleSvnRepositoryPaths.clear(),this.disposables=Ie(this.disposables)}async onDidChangeWorkspaceFolders({added:e,removed:t}){let r=e.filter(o=>!this.getOpenRepository(o.uri)),i=t.map(o=>this.getOpenRepository(o.uri.fsPath)).filter(o=>!!o).filter(o=>!(pe.workspace.workspaceFolders||[]).some(s=>o.repository.workspaceRoot.startsWith(s.uri.fsPath)));r.forEach(o=>this.tryOpenRepository(o.uri.fsPath)),i.forEach(o=>o.repository.dispose())}async scanWorkspaceFolders(){for(let e of pe.workspace.workspaceFolders||[]){let t=e.uri.fsPath;await this.tryOpenRepository(t)}}async tryOpenRepository(e,t=0){if(this.getRepository(e))return;if(await as(e,t===0)){let o=pe.workspace.getConfiguration("svn",pe.Uri.file(e));if(new Set((o.get("ignoreRepositories")||[]).map(a=>st(a))).has(st(e)))return;try{let a=await this.svn.getRepositoryRoot(e),c=await Vt.create(await this.svn.open(a,e),this.extensionContact.secrets);this.open(c)}catch(a){if(a instanceof Tt&&a.svnErrorCode===Ge.WorkingCopyIsTooOld){await pe.commands.executeCommand("svn.upgrade",e);return}console.error(a)}return}let i=t+1;if(i<=this.maxDepth){let o=[];try{o=await Ht(e)}catch{return}for(let s of o){let a=e+"/"+s,c;try{c=await wt(a)}catch{continue}c.isDirectory()&&!rr(a,this.ignoreList,{dot:!0})&&await this.tryOpenRepository(a,i)}}}async getRemoteRepository(e){return jo.open(this.svn,e)}getRepository(e){let t=this.getOpenRepository(e);return t&&t.repository?t.repository:null}getOpenRepository(e){if(e){if(e instanceof Vt)return this.openRepositories.find(t=>t.repository===e);if(e.repository instanceof Vt)return this.openRepositories.find(t=>t.repository===e.repository);if(typeof e=="string"&&(e=pe.Uri.file(e)),e instanceof pe.Uri)return this.openRepositoriesSorted().find(t=>{if(!Se(t.repository.workspaceRoot,e.fsPath))return!1;for(let r of t.repository.statusExternal){let i=or.join(t.repository.workspaceRoot,r.path);if(Se(i,e.fsPath))return!1}for(let r of t.repository.statusIgnored){let i=or.join(t.repository.workspaceRoot,r.path);if(Se(i,e.fsPath))return!1}return!0});for(let t of this.openRepositories){let r=t.repository;if(e===r.sourceControl||e===r.changes)return t}}}async getRepositoryFromUri(e){for(let t of this.openRepositoriesSorted()){let r=t.repository;if(Se(r.workspaceRoot,e.fsPath))try{let i=st(e.fsPath);return await r.info(i),r}catch{}}return null}open(e){let r=me(e.onDidChangeState,u=>u===1)(()=>a()),i=e.onDidChangeRepository(u=>this._onDidChangeRepository.fire({repository:e,uri:u})),o=e.onDidChangeStatus(()=>{this._onDidChangeStatusRepository.fire(e)}),s=e.onDidChangeStatus(()=>{this.scanExternals(e),this.scanIgnored(e)});this.scanExternals(e),this.scanIgnored(e);let a=()=>{r.dispose(),i.dispose(),o.dispose(),s.dispose(),e.dispose(),this.openRepositories=this.openRepositories.filter(u=>u!==c),this._onDidCloseRepository.fire(e)},c={repository:e,dispose:a};this.openRepositories.push(c),this._onDidOpenRepository.fire(e)}close(e){let t=this.getOpenRepository(e);t&&t.dispose()}async pickRepository(){if(this.openRepositories.length===0)throw new Error("There are no available repositories");let e=this.repositories.map(i=>({label:or.basename(i.root),repository:i})),r=await pe.window.showQuickPick(e,{placeHolder:"Choose a repository"});return r&&r.repository}async upgradeWorkingCopy(e){try{return(await this.svn.exec(e,["upgrade"])).exitCode===0}catch(t){console.log(t)}return!1}dispose(){this.disable(),this.configurationChangeDisposable.dispose()}};H([De(500)],Pn.prototype,"eventuallyScanPossibleSvnRepositories",1);var Fr=X(require("child_process")),Dp=X(require("path")),Xo=X(wr());var Go=class{findSvn(e){return(e?this.findSpecificSvn(e):Promise.reject(null)).then(void 0,()=>{switch(process.platform){case"darwin":return this.findSvnDarwin();case"win32":return this.findSvnWin32();default:return this.findSpecificSvn("svn")}}).then(r=>this.checkSvnVersion(r)).then(null,()=>Promise.reject(new Error("Svn installation not found.")))}findSvnWin32(){return this.findSystemSvnWin32(process.env.ProgramW6432).then(void 0,()=>this.findSystemSvnWin32(process.env["ProgramFiles(x86)"])).then(void 0,()=>this.findSystemSvnWin32(process.env.ProgramFiles)).then(void 0,()=>this.findSpecificSvn("svn"))}findSystemSvnWin32(e){return e?this.findSpecificSvn(Dp.join(e,"TortoiseSVN","bin","svn.exe")):Promise.reject("Not found")}findSvnDarwin(){return new Promise((e,t)=>{Fr.exec("which svn",(r,i)=>{if(r)return t("svn not found");let o=i.toString().replace(/^\s+|\s+$/g,"");function s(a){Fr.exec("svn --version --quiet",(c,u)=>c?t("svn not found"):e({path:a,version:u.trim()}))}if(o!=="/usr/bin/svn")return s(o);Fr.exec("xcode-select -p",a=>{if(a&&a.code===2)return t("svn not found");s(o)})})})}findSpecificSvn(e){return new Promise((t,r)=>{let i=[],o=Fr.spawn(e,["--version","--quiet"]);o.stdout.on("data",s=>i.push(s)),o.on("error",zf(r)),o.on("close",s=>s?r(new Error("Not found")):t({path:e,version:Buffer.concat(i).toString("utf8").trim()}))})}checkSvnVersion(e){return new Promise((t,r)=>{let i=e.version.replace(/^(\d+\.\d+\.\d+).*/,"$1");Xo.valid(i)?Xo.gte(i,"1.6.0")?t(e):r(new Error("Required svn version must be >= 1.6")):r(new Error("Invalid svn version"))})}};var Ur=require("vscode");var Rp=X(require("path")),zo=require("vscode");var Vo=require("vscode");var Wo=require("vscode"),Nn=class{getTreeItem(){return new Wo.TreeItem("No Incoming Changes",Wo.TreeItemCollapsibleState.None)}async getChildren(){return[]}};var On=class{constructor(e){this.repository=e}getTreeItem(){let e=new Vo.TreeItem("Incoming Changes",Vo.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("download","dark"),light:Et("download","light")},e}async getChildren(){if(!this.repository.remoteChanges)return[];let e=this.repository.remoteChanges.resourceStates.map(t=>new $e(t.resourceUri,t.type,this.repository));return e.length===0?[new Nn]:e}};var _n=class{constructor(e,t){this.repository=e;this.svnProvider=t;e.onDidChangeStatus(()=>{this.svnProvider.update(this)})}get label(){return Rp.basename(this.repository.workspaceRoot)}getTreeItem(){let e=new zo.TreeItem(this.label,zo.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("repo","dark"),light:Et("repo","light")},e}async getChildren(){return[new On(this.repository)]}};var An=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new Ur.EventEmitter;this._dispose=[];this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(Ur.window.registerTreeDataProvider("svn",this),Ur.commands.registerCommand("svn.treeview.refreshProvider",()=>this.refresh()))}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e.getTreeItem()}async getChildren(e){return!this.sourceControlManager||this.sourceControlManager.openRepositories.length===0?Promise.resolve([]):e?e.getChildren():this.sourceControlManager.openRepositories.map(r=>new _n(r.repository,this))}update(e){this._onDidChangeTreeData.fire(e)}dispose(){Ie(this._dispose)}};var sr=require("vscode");var Ho=class{constructor(e){this.model=e;this._dispose=[];this._onDidChangeTreeData=new sr.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(sr.window.registerTreeDataProvider("branchchanges",this),sr.commands.registerCommand("svn.branchchanges.openDiff",this.openDiffCmd,this),sr.commands.registerCommand("svn.branchchanges.refresh",()=>this._onDidChangeTreeData.fire(void 0),this),this.model.onDidChangeRepository(()=>this._onDidChangeTreeData.fire(void 0)))}dispose(){Ie(this._dispose)}getTreeItem(e){let t="";e.item==="added"?t="status-added":e.item==="deleted"?t="status-deleted":e.item==="modified"&&(t="status-modified");let r=To(t);return{label:e.localPath.fsPath,command:{command:"svn.branchchanges.openDiff",title:"Open diff",arguments:[e]},iconPath:r,tooltip:`${e.oldPath.fsPath.replace(e.repo.fsPath,"")}@r${e.oldRevision} \u2192 ${e.newPath.fsPath.replace(e.repo.fsPath,"")}@r${e.newRevision}`}}getChildren(e){if(e!==void 0)return Promise.resolve([]);let t=[];for(let r of this.model.repositories)t.push(r.getChanges());return Promise.all(t).then(r=>r.reduce((i,o)=>i.concat(o),[]))}async openDiffCmd(e){let t=await this.model.getRemoteRepository(e.repo);if(e.item==="modified")return ir(t,e.oldPath,e.oldRevision,e.newRevision,e.newPath);if(e.item==="added")return Lr(t,e.newPath,e.newRevision)}};var Tp=X(wr());var Yo=class{constructor(e){let t=Tp.satisfies(e,">= 1.9");Ot("isSvn19orGreater",t)}dispose(){}};var Pp=X(wr());var Qo=class{constructor(e){let t=Pp.satisfies(e,">= 1.8");Ot("isSvn18orGreater",t)}dispose(){}};var _e=require("vscode");var Yg=1e3*60*3,Qg=1e3*60*5,kr=class{constructor(e){this.sourceControlManager=e;this.disposables=[];this.cache=new Map;this._onDidChangeFile=new _e.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event;this.changedRepositoryRoots=new Set;this.disposables.push(e.onDidChangeRepository(this.onDidChangeRepository,this),_e.workspace.registerFileSystemProvider("svn",this,{isReadonly:!0,isCaseSensitive:!0})),setInterval(()=>this.cleanup(),Qg)}onDidChangeRepository({repository:e}){this.changedRepositoryRoots.add(e.root),this.eventuallyFireChangeEvents()}eventuallyFireChangeEvents(){this.fireChangeEvents()}async fireChangeEvents(){if(!_e.window.state.focused){let t=me(_e.window.onDidChangeWindowState,r=>r.focused);await Qt(t)}let e=[];for(let{uri:t}of this.cache.values()){let r=t.fsPath;for(let i of this.changedRepositoryRoots)if(Se(i,r)){e.push({type:_e.FileChangeType.Changed,uri:t});break}}e.length>0&&this._onDidChangeFile.fire(e),this.changedRepositoryRoots.clear()}watch(){return hc}async stat(e){await this.sourceControlManager.isInitialized;let{fsPath:t}=At(e),r=this.sourceControlManager.getRepository(t);if(!r)throw _e.FileSystemError.FileNotFound;let i=0,o=new Date().getTime();try{let s=await r.list(t);s.length&&(i=Number(s[0].size),o=Date.parse(s[0].commit.date))}catch(s){console.error("Failed to list SVN file:",s)}return{type:_e.FileType.File,size:i,mtime:o,ctime:0}}readDirectory(){throw new Error("readDirectory is not implemented")}createDirectory(){throw new Error("createDirectory is not implemented")}async readFile(e){await this.sourceControlManager.isInitialized;let{fsPath:t,extra:r,action:i}=At(e),o=this.sourceControlManager.getRepository(t);if(!o)throw _e.FileSystemError.FileNotFound();let s=e.toString(),a=new Date().getTime(),c={uri:e,timestamp:a};this.cache.set(s,c);try{if(i==="SHOW")return await o.showBuffer(t,r.ref);if(i==="LOG")return await o.plainLogBuffer();if(i==="LOG_REVISION"&&r.revision)return await o.plainLogByRevisionBuffer(r.revision);if(i==="LOG_SEARCH"&&r.search)return await o.plainLogByTextBuffer(r.search);if(i==="PATCH")return console.log("here"),await o.patchBuffer([t])}catch(u){console.error("Failed to read SVN file:",u)}return new Uint8Array(0)}writeFile(){throw new Error("writeFile is not implemented")}delete(){throw new Error("delete is not implemented")}rename(){throw new Error("rename is not implemented")}cleanup(){let e=new Date().getTime(),t=new Map;for(let r of this.cache.values()){let{fsPath:i}=At(r.uri);(_e.workspace.textDocuments.filter(s=>s.uri.scheme==="file").some(s=>pc(s.uri.fsPath,i))||e-r.timestamp<Yg)&&t.set(r.uri.toString(),r)}this.cache=t}dispose(){this.disposables.forEach(e=>e.dispose())}};H([De(1100)],kr.prototype,"eventuallyFireChangeEvents",1),H([lr],kr.prototype,"fireChangeEvents",1);async function Kg(n,e,t){console.log("SVN Extension: init() started");let r=$.get("path"),i=new Go;console.log("SVN Extension: Finding SVN executable...");let o=await i.findSvn(r);console.log(`SVN Extension: Found SVN ${o.version} at ${o.path}`);let s=new Oi({svnPath:o.path,version:o.version}),a=await new Pn(s,0,n);console.log("SVN Extension: Registering commands..."),hp(a,t),console.log("SVN Extension: Creating providers..."),t.push(a,jt,new kr(a),new An(a),new qo(a),new Lo(a),new Ho(a),new mn(a),new gn(a),new Qo(o.version),new Yo(o.version)),e.appendLine(`Using svn "${o.version}" from "${o.path}"`),console.log("SVN Extension: Providers created successfully");let c=u=>e.append(u);s.onOutput.addListener("log",c),t.push(it(()=>s.onOutput.removeListener("log",c))),t.push(it(Qf)),console.log("SVN Extension: init() complete")}async function Zg(n,e){let t=We.window.createOutputChannel("Svn");We.commands.registerCommand("svn.showOutput",()=>t.show()),e.push(t),$.get("showOutput")&&t.show();let i=async()=>{try{await Kg(n,t,e)}catch(o){let s=o;if(!/Svn installation not found/.test(s.message||""))throw o;if($.get("ignoreMissingSvnWarning")===!0)return;console.warn(s.message),t.appendLine(s.message),t.show();let c="Find SVN executable",u="Download SVN",d="Don't Show Again",m=await We.window.showWarningMessage("SVN not found. Install it or configure it using the 'svn.path' setting.",c,u,d);if(m===c){let g;Np.sep==="\\"&&(g={svn:["exe","bat"]});let l=await We.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:g});if(l&&l[0]){let y=l[0].fsPath;t.appendLine(`Updated "svn.path" with "${y}"`),await $.update("path",y),await i()}}else m===u?We.commands.executeCommand("vscode.open",We.Uri.parse("https://subversion.apache.org/packages.html")):m===d&&await $.update("ignoreMissingSvnWarning",!0)}};await i()}async function Jg(n){console.log("SVN Extension: activate() called");let e=[];n.subscriptions.push(new We.Disposable(()=>We.Disposable.from(...e).dispose())),await Zg(n,e).catch(t=>{console.error("SVN Extension: Activation failed",t),We.window.showErrorMessage(`SVN Extension activation failed: ${t.message||t}`)}),console.log("SVN Extension: activation complete")}function e2(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/
//# sourceMappingURL=extension.js.map
